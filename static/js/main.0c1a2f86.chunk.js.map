{"version":3,"sources":["ConfirmResolve/ConfirmResolve.js","redux/actions.js","CommentsColumn/CommentInput/CommentInput.js","authors.js","redux/store.js","CommentsColumn/CommentsColumnHeader/CommentsColumnHeader.js","CommentsColumn/Comment/TopRow/ProfileIcon/ProfileIcon.js","CommentsColumn/Comment/TopRow/TopRow.js","CommentsColumn/Comment/Comment.js","CommentsColumn/MainComment/MainComment.js","CommentsColumn/MainThread/MainThread.js","CommentsColumn/Thread/Thread.js","CommentsColumn/CommentsColumn.js","DrawCanvas/DrawCanvas.js","DrawOver/DrawOver.js","Header/Header.js","ModelRenderer.js","VariationsColumn/Variation/Variation.js","VariationsColumn/VariationsColumn.js","index.js"],"names":["ConfirmResolve","isModalOpen","onCancel","onResolve","props","id","className","onClick","event","stopPropagation","moveCamera","cameraPosition","type","data","selectComment","comment","deselectComment","unattachDrawOver","unattachPin","cancelComment","resolveComment","connect","isCommenting","fileIsAttached","file","drawOverIsAttached","drawing","pinIsAttached","pin","cancelEnabled","submitEnabled","selectedCommentId","beginComment","attachFile","unattachFile","attachDrawOver","attachPin","dispatchProps","ownProps","stateProps","onFocusTextArea","onBlurTextArea","length","onClickAttachFile","onClickAttachDrawOver","onClickAttachPin","onClickCancel","pinAttachable","mainThread","onClickSubmit","useState","inputComment","setInputComment","placeholder","value","onChange","target","onFocus","onBlur","data-tip","src","alt","place","effect","disabled","name","profilePicture","CURSOR","author","authors","Math","floor","random","initialState","cursor","position","focus","showPins","activeVariationIds","1","variations","thumbnail","model","comments","cameraPositionEquals","camera1","camera2","every","p","i","abs","f","store","createStore","state","selectedComment","find","camera","undefined","drawOver","JSON","parse","LZString","decompressFromEncodedURIComponent","conn","send","filter","reply","map","thread","attachedFile","attachedPin","trim","uuidV4","date","Date","getTime","text","compressToEncodedURIComponent","stringify","parent_id","activeThreadId","url","onOpen","onMessage","onError","onClose","this","ws","WebSocket","onopen","onmessage","onerror","onclose","action","commentAction","Array","isArray","Converter","unmarshall","sort","comment1","comment2","dispatch","console","log","redrawEnabled","repinEnabled","onRedraw","onRepin","headerText","iconImage","ProfileIcon","split","_","names","toLocaleUpperCase","join","relativeDateString","dateInMillis","today","toDateString","toLocaleTimeString","navigator","language","timeStyle","days","result","valueOf","setDate","getDate","addDays","toLocaleDateString","dateStyle","TopRow","closeMenu","setCloseMenu","useEffect","trigger","on","closeOnDocumentClick","closeOnEscape","arrow","selected","children","onClickReply","openThread","replyLabel","onAddComment","onClickComment","onResolveComment","resolveCommentId","setResolveCommentId","key","flatMap","onReturn","resolveReply","onAddReply","addReply","restOfDispatchProps","e","activeThread","onClickShowHide","isOpen","setIsOpen","handleUndo","isPainting","setPainting","line","slice","handleClick","ref","nativeEvent","offsetX","offsetY","x","current","clientWidth","y","clientHeight","handleDrag","currLine","convertTouchToMouse","handler","canvasRect","getBoundingClientRect","touch","targetTouches","pageX","left","pageY","top","DrawCanvas","lineWidth","lineColor","useRef","ctx","setContext","getContext","canvas","clearRect","width","height","rest","lineJoin","lineCap","strokeStyle","beginPath","moveTo","lineTo","stroke","paint","allowChanges","keyMap","undo","handlers","onMouseDown","onMouseMove","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","interactive","updateDrawing","Header","eyeOpen","onClickEye","alert","Model","path","fallback","setModel","a","async","Promise","resolve","reject","GLTFLoader","load","gltf","mroot","scene","bbox","Box3","setFromObject","scale","multiplyScalar","max","getSize","Vector3","toArray","copy","getCenter","object","Pin","pinPosition","color","mesh","geometry","verticesNeedUpdate","normal","endVertex","clone","addScaledVector","points","attach","vertices","visible","args","Controls","onOrbitChange","controlsRef","useFrame","controls","set","update","addEventListener","removeEventListener","useThree","domElement","gl","LoadingModel","loadingModel","setLoadingModel","stillMounted","setLength","rotation","extend","OrbitControls","pinFollowCursor","onPointerMove","point","face","placePinClick","modelPath","fov","near","onCreated","outputEncoding","sRGBEncoding","background","Color","minDistance","maxDistance","mouseHover","setMouseHover","onMouseEnter","onMouseLeave","selectVariation","variation","deselectVariation","onClickVariation","WrappedMainPage","activeVariations","Object","keys","variationId","onClickTopCamera","onClickFrontCamera","onClickSideCamera","hidePins","style","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0c1a2f86.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"./ConfirmResolve.css\";\r\n\r\nexport function ConfirmResolve({ isModalOpen, onCancel, onResolve, ...props }) {\r\n  return (\r\n    <div id=\"modal\" className={isModalOpen ? \"\" : \"hide\"} onClick={onCancel}>\r\n      <div\r\n        id=\"modal-dialog\"\r\n        onClick={event => event.stopPropagation()}\r\n        {...props}\r\n      >\r\n        <span id=\"modal-warning\">Are you sure you want to resolve?</span>\r\n        <div id=\"modal-actions\">\r\n          <span\r\n            id=\"modal-cancel\"\r\n            onClick={event => {\r\n              event.stopPropagation();\r\n              onCancel();\r\n            }}\r\n          >\r\n            Cancel\r\n          </span>\r\n          <span\r\n            id=\"modal-submit\"\r\n            onClick={event => {\r\n              event.stopPropagation();\r\n              onResolve();\r\n            }}\r\n          >\r\n            Submit\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * action types\r\n */\r\n\r\nexport const CHANGE_CAMERA = \"CHANGE_CAMERA\";\r\nexport const MOVE_CAMERA = \"MOVE_CAMERA\";\r\nexport const SELECT_COMMENT = \"SELECT_COMMENT\";\r\nexport const DESELECT_COMMENT = \"DESELECT_COMMENT\";\r\n\r\nexport const BEGIN_COMMENT = \"BEGIN_COMMENT\";\r\nexport const ATTACH_FILE = \"ATTACH_FILE\";\r\nexport const UNATTACH_FILE = \"UNATTACH_FILE\";\r\nexport const ATTACH_DRAW_OVER = \"ATTACH_DRAW_OVER\";\r\nexport const UNATTACH_DRAW_OVER = \"UNATTACH_DRAW_OVER\";\r\nexport const ATTACH_PIN = \"ATTACH_PIN\";\r\nexport const UNATTACH_PIN = \"UNATTACH_PIN\";\r\nexport const CANCEL_COMMENT = \"CANCEL_COMMENT\";\r\n\r\nexport const PLACE_PIN = \"PLACE_PIN\";\r\nexport const SET_PIN_POSITION = \"SET_PIN_POSITION\";\r\n\r\nexport const ADD_COMMENT = \"ADD_COMMENT\";\r\nexport const ADD_REPLY = \"ADD_REPLY\";\r\nexport const RESOLVE_COMMENT = \"RESOLVE_COMMENT\";\r\nexport const RESOLVE_REPLY = \"RESOLVE_REPLY\";\r\n\r\nexport const OPEN_THREAD = \"OPEN_THREAD\";\r\nexport const CLOSE_THREAD = \"CLOSE_THREAD\";\r\n\r\nexport const UPDATE_DRAWING = \"UPDATE_DRAWING\";\r\nexport const UPDATE_PIN = \"UPDATE_PIN\";\r\n\r\nexport const SELECT_VARIATION = \"SELECT_VARIATION\";\r\nexport const DESELECT_VARIATION = \"DESELECT_VARIATION\";\r\n\r\nexport const SHOW_PINS = \"SHOW_PINS\";\r\nexport const HIDE_PINS = \"HIDE_PINS\";\r\n\r\nexport const SET_COMMENTS = \"SET_COMMENTS\";\r\n\r\n/**\r\n * action creators\r\n */\r\n\r\nexport function changeCamera(cameraPosition) {\r\n  return { type: CHANGE_CAMERA, data: cameraPosition };\r\n}\r\nexport function moveCamera(cameraPosition) {\r\n  return { type: MOVE_CAMERA, data: cameraPosition };\r\n}\r\n\r\nexport function selectComment(comment) {\r\n  return { type: SELECT_COMMENT, data: comment };\r\n}\r\nexport function deselectComment() {\r\n  return { type: DESELECT_COMMENT };\r\n}\r\n\r\nexport function beginComment() {\r\n  return { type: BEGIN_COMMENT };\r\n}\r\nexport function attachFile() {\r\n  return { type: ATTACH_FILE };\r\n}\r\nexport function unattachFile() {\r\n  return { type: UNATTACH_FILE };\r\n}\r\nexport function attachDrawOver() {\r\n  return { type: ATTACH_DRAW_OVER };\r\n}\r\nexport function unattachDrawOver() {\r\n  return { type: UNATTACH_DRAW_OVER };\r\n}\r\nexport function attachPin() {\r\n  return { type: ATTACH_PIN };\r\n}\r\nexport function unattachPin() {\r\n  return { type: UNATTACH_PIN };\r\n}\r\nexport function setPinPosition(pinLocation) {\r\n  return { type: SET_PIN_POSITION, data: pinLocation };\r\n}\r\nexport function placePin() {\r\n  return { type: PLACE_PIN };\r\n}\r\n\r\nexport function cancelComment() {\r\n  return { type: CANCEL_COMMENT };\r\n}\r\n\r\nexport function addComment(text) {\r\n  return { type: ADD_COMMENT, data: text };\r\n}\r\nexport function addReply(comment, text) {\r\n  return { type: ADD_REPLY, data: { comment, text } };\r\n}\r\nexport function resolveComment(comment) {\r\n  return { type: RESOLVE_COMMENT, data: comment };\r\n}\r\nexport function resolveReply(comment, reply) {\r\n  return { type: RESOLVE_REPLY, data: { comment, reply } };\r\n}\r\n\r\nexport function openThread(comment) {\r\n  return { type: OPEN_THREAD, data: comment };\r\n}\r\nexport function closeThread() {\r\n  return { type: CLOSE_THREAD };\r\n}\r\n\r\nexport function updateDrawing(drawing) {\r\n  return { type: UPDATE_DRAWING, data: drawing };\r\n}\r\nexport function updatePin(pin) {\r\n  return { type: UPDATE_PIN, data: pin };\r\n}\r\n\r\nexport function selectVariation(variation) {\r\n  return { type: SELECT_VARIATION, data: variation };\r\n}\r\nexport function deselectVariation(variation) {\r\n  return { type: DESELECT_VARIATION, data: variation };\r\n}\r\n\r\nexport function showPins() {\r\n  return { type: SHOW_PINS };\r\n}\r\nexport function hidePins() {\r\n  return { type: HIDE_PINS };\r\n}\r\n\r\nexport function setComments(comments) {\r\n  return { type: SET_COMMENTS, data: comments };\r\n}\r\n","import React, { useState } from \"react\";\r\nimport TextareaAutosize from \"react-autosize-textarea/lib\";\r\nimport { connect } from \"react-redux\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport {\r\n  attachDrawOver,\r\n  attachFile,\r\n  attachPin,\r\n  beginComment,\r\n  cancelComment,\r\n  deselectComment,\r\n  unattachDrawOver,\r\n  unattachFile,\r\n  unattachPin\r\n} from \"../../redux/actions\";\r\nimport \"./CommentInput.css\";\r\n\r\nfunction CommentInput({\r\n  pinAttachable = false,\r\n  mainThread = false,\r\n  fileIsAttached,\r\n  drawOverIsAttached,\r\n  pinIsAttached,\r\n  cancelEnabled,\r\n  submitEnabled,\r\n  onFocusTextArea,\r\n  onBlurTextArea,\r\n  onClickAttachFile,\r\n  onClickAttachDrawOver,\r\n  onClickAttachPin,\r\n  onClickCancel,\r\n  onClickSubmit = () => {},\r\n  ...props\r\n}) {\r\n  const [inputComment, setInputComment] = useState();\r\n\r\n  return (\r\n    <div className=\"comment-input-column\" {...props}>\r\n      <TextareaAutosize\r\n        className=\"comment-input-text-area\"\r\n        placeholder=\"Add a comment\"\r\n        value={inputComment}\r\n        onChange={event => setInputComment(event.target.value)}\r\n        onFocus={onFocusTextArea}\r\n        onBlur={() => onBlurTextArea(inputComment)}\r\n      />\r\n      <div className=\"comment-input-actions-row\">\r\n        <div className=\"comment-input-icon-actions\">\r\n          <button\r\n            className={\r\n              \"comment-input-icon-action-button\" +\r\n              (fileIsAttached ? \" active\" : \"\")\r\n            }\r\n            data-tip=\"Attach file\"\r\n            onClick={() => onClickAttachFile(inputComment)}\r\n          >\r\n            <img src=\"assets/clip.svg\" alt=\"File attachment icon\" />\r\n          </button>\r\n          <button\r\n            className={\r\n              \"comment-input-icon-action-button\" +\r\n              (drawOverIsAttached ? \" active\" : \"\")\r\n            }\r\n            data-tip=\"Drawover\"\r\n            onClick={() => onClickAttachDrawOver(inputComment)}\r\n          >\r\n            <img src=\"assets/pencil.svg\" alt=\"File attachment icon\" />\r\n          </button>\r\n          {pinAttachable && (\r\n            <button\r\n              className={\r\n                \"comment-input-icon-action-button\" +\r\n                (pinIsAttached ? \" active\" : \"\")\r\n              }\r\n              data-tip=\"Pin\"\r\n              onClick={() => onClickAttachPin(inputComment)}\r\n            >\r\n              <img src=\"assets/pin.svg\" alt=\"File attachment icon\" />\r\n            </button>\r\n          )}\r\n          <ReactTooltip\r\n            className=\"comment-input-tooltip\"\r\n            place=\"bottom\"\r\n            effect=\"solid\"\r\n          />\r\n        </div>\r\n        <div className=\"comment-input-text-actions\">\r\n          <button\r\n            className=\"comment-input-text-action-button comment-input-cancel-button\"\r\n            disabled={\r\n              !(cancelEnabled || (inputComment && inputComment.length > 0))\r\n            }\r\n            onClick={() => {\r\n              setInputComment(\"\");\r\n              onClickCancel();\r\n            }}\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            className=\"comment-input-text-action-button comment-input-submit-button\"\r\n            disabled={\r\n              !(submitEnabled || (inputComment && inputComment.length > 0))\r\n            }\r\n            onClick={() => {\r\n              onClickSubmit(inputComment);\r\n              setInputComment(\"\");\r\n            }}\r\n          >\r\n            Submit\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mergeProps(\r\n  { selectedCommentId, ...stateProps },\r\n  dispatchProps,\r\n  ownProps\r\n) {\r\n  const {\r\n    deselectComment,\r\n    beginComment,\r\n    attachFile,\r\n    unattachFile,\r\n    attachDrawOver,\r\n    unattachDrawOver,\r\n    attachPin,\r\n    unattachPin,\r\n    cancelComment\r\n  } = dispatchProps;\r\n\r\n  return {\r\n    ...ownProps,\r\n    ...stateProps,\r\n    onFocusTextArea: () => {\r\n      if (!stateProps.isCommenting) {\r\n        if (selectedCommentId) {\r\n          deselectComment();\r\n        }\r\n        beginComment();\r\n      }\r\n    },\r\n    onBlurTextArea: comment =>\r\n      !stateProps.fileIsAttached &&\r\n      !stateProps.drawOverIsAttached &&\r\n      !stateProps.pinIsAttached &&\r\n      (!comment || comment.length === 0) &&\r\n      cancelComment(),\r\n    onClickAttachFile: comment => {\r\n      if (stateProps.fileIsAttached) {\r\n        if (\r\n          !stateProps.drawOverIsAttached &&\r\n          !stateProps.pinIsAttached &&\r\n          (!comment || comment.length === 0)\r\n        ) {\r\n          cancelComment();\r\n        } else {\r\n          unattachFile();\r\n        }\r\n      } else {\r\n        if (!stateProps.cancelEnabled) {\r\n          deselectComment();\r\n          beginComment();\r\n        }\r\n        attachFile();\r\n      }\r\n    },\r\n    onClickAttachDrawOver: comment => {\r\n      if (stateProps.drawOverIsAttached) {\r\n        if (\r\n          !stateProps.fileIsAttached &&\r\n          !stateProps.pinIsAttached &&\r\n          (!comment || comment.length === 0)\r\n        ) {\r\n          cancelComment();\r\n        } else {\r\n          unattachDrawOver();\r\n        }\r\n      } else {\r\n        if (!stateProps.cancelEnabled) {\r\n          deselectComment();\r\n          beginComment();\r\n        }\r\n        attachDrawOver();\r\n      }\r\n    },\r\n    onClickAttachPin: comment => {\r\n      if (stateProps.pinIsAttached) {\r\n        if (\r\n          !stateProps.fileIsAttached &&\r\n          !stateProps.drawOverIsAttached &&\r\n          (!comment || comment.length === 0)\r\n        ) {\r\n          cancelComment();\r\n        } else {\r\n          unattachPin();\r\n        }\r\n      } else {\r\n        if (!stateProps.cancelEnabled) {\r\n          deselectComment();\r\n          beginComment();\r\n        }\r\n        attachPin();\r\n      }\r\n    },\r\n    onClickCancel: () => cancelComment()\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  ({\r\n    isCommenting,\r\n    fileIsAttached,\r\n    file,\r\n    drawOverIsAttached,\r\n    drawing,\r\n    pinIsAttached,\r\n    pin,\r\n    selectedCommentId\r\n  }) => ({\r\n    fileIsAttached,\r\n    drawOverIsAttached,\r\n    pinIsAttached,\r\n    cancelEnabled: isCommenting,\r\n    submitEnabled:\r\n      (fileIsAttached && file) ||\r\n      (drawOverIsAttached && drawing) ||\r\n      (pinIsAttached && pin),\r\n    selectedCommentId\r\n  }),\r\n  {\r\n    deselectComment,\r\n    beginComment,\r\n    attachFile,\r\n    unattachFile,\r\n    attachDrawOver,\r\n    unattachDrawOver,\r\n    attachPin,\r\n    unattachPin,\r\n    cancelComment\r\n  },\r\n  mergeProps\r\n)(CommentInput);\r\n","export default [\r\n  {\r\n    name: \"Greg Gottesman\",\r\n    profilePicture:\r\n      \"https://assets.website-files.com/5d3152346d95065922960b3a/5db769036b1dff3418bffd20_Greg.jpg\"\r\n  },\r\n  {\r\n    name: \"Ed Lazowska\",\r\n    profilePicture:\r\n      \"https://upload.wikimedia.org/wikipedia/en/thumb/9/9b/Edward_D_Lazowska.jpg/1200px-Edward_D_Lazowska.jpg\"\r\n  },\r\n  {\r\n    name: \"Peter Denton\",\r\n    profilePicture:\r\n      \"https://cdn.geekwire.com/wp-content/uploads/2017/03/Peter-Denton-300x300.jpg\"\r\n  },\r\n  {\r\n    name: \"Gaurav Oberoi\",\r\n    profilePicture:\r\n      \"https://media-exp1.licdn.com/dms/image/C4E03AQEwMhRAnT--iA/profile-displayphoto-shrink_200_200/0?e=1585785600&v=beta&t=pZjeE2f7NZ2e_Tcftcdon5XXDlfozRSIVRmFzaQqRck\"\r\n  },\r\n  {\r\n    name: \"David Zager\",\r\n    profilePicture:\r\n      \"https://pbs.twimg.com/profile_images/934197736378793985/Ol1kYt_d_400x400.jpg\"\r\n  },\r\n  {\r\n    name: \"Ben Gilbert\",\r\n    profilePicture:\r\n      \"http://benjamingilbert.net/wp-content/uploads/2009/10/Ben-PSL-Headshot.jpg\"\r\n  },\r\n  {\r\n    name: \"Xiao Wang\",\r\n    profilePicture:\r\n      \"https://assets-wp.boundless.com/uploads/2017/12/BoundlessXiao.jpg\"\r\n  },\r\n  {\r\n    name: \"Aaron Easterly\",\r\n    profilePicture:\r\n      \"https://cdn.geekwire.com/wp-content/uploads/2017/07/Aaron-Headshot.jpg\"\r\n  },\r\n  {\r\n    name: \"John Cook\",\r\n    profilePicture:\r\n      \"https://cdn.geekwire.com/wp-content/uploads/2019/12/John-square-300x300.jpg\"\r\n  },\r\n  {\r\n    name: \"Glenn Kelman\",\r\n    profilePicture:\r\n      \"https://miro.medium.com/fit/c/256/256/0*wPsOMUjFt95aKYMy.jpg\"\r\n  },\r\n  {\r\n    name: \"Kelly Wright\",\r\n    profilePicture:\r\n      \"https://cdn.geekwire.com/wp-content/uploads/2016/01/wright-kelly-247x300.png\"\r\n  },\r\n  {\r\n    name: \"Palvi Mehta\",\r\n    profilePicture:\r\n      \"https://res-5.cloudinary.com/crunchbase-production/image/upload/c_thumb,h_256,w_256,f_auto,g_faces,z_0.7,q_auto:eco/v1401363391/fn99pnvtsrgeo2ze1blm.png\"\r\n  },\r\n  {\r\n    name: \"Kabir Shahani\",\r\n    profilePicture:\r\n      \"https://www.adweek.com/wp-content/uploads/2018/11/kabir.jpg\"\r\n  },\r\n  {\r\n    name: \"Matt McIlwain\",\r\n    profilePicture:\r\n      \"https://ga-core.s3.amazonaws.com/production/uploads/instructor/image/3032/thumb_Matt_McIlwain.png\"\r\n  },\r\n  {\r\n    name: \"Jeana Kim\",\r\n    profilePicture:\r\n      \"https://www.wsgr.com/images/content/6/2/v1/6250/Kim_Jeana%2020160209%20HI_email.jpg\"\r\n  },\r\n  {\r\n    name: \"Steve Singh\",\r\n    profilePicture:\r\n      \"https://media-exp1.licdn.com/dms/image/C5103AQES2HWYu834NA/profile-displayphoto-shrink_200_200/0?e=1587600000&v=beta&t=e85cbE830lKu3L4wbpIqVu83o5byIKrhQx8pPpbpPbQ\"\r\n  },\r\n  {\r\n    name: \"Dan Levitan\",\r\n    profilePicture:\r\n      \"https://media-exp1.licdn.com/dms/image/C4E03AQEz4UJyxd_X2A/profile-displayphoto-shrink_200_200/0?e=1585785600&v=beta&t=EL_ECN6D5drKOXq77lWBIdtcGOBeRH5DKglaRGUCR3c\"\r\n  }\r\n];","import { Converter } from \"aws-sdk/clients/dynamodb\";\r\nimport LZString from \"lz-string\";\r\nimport { createStore } from \"redux\";\r\nimport { v4 as uuidV4 } from \"uuid\";\r\nimport authors from \"../authors\";\r\nimport {\r\n  ADD_COMMENT,\r\n  ADD_REPLY,\r\n  ATTACH_DRAW_OVER,\r\n  ATTACH_FILE,\r\n  ATTACH_PIN,\r\n  BEGIN_COMMENT,\r\n  CANCEL_COMMENT,\r\n  CHANGE_CAMERA,\r\n  CLOSE_THREAD,\r\n  DESELECT_COMMENT,\r\n  DESELECT_VARIATION,\r\n  HIDE_PINS,\r\n  MOVE_CAMERA,\r\n  OPEN_THREAD,\r\n  PLACE_PIN,\r\n  RESOLVE_COMMENT,\r\n  RESOLVE_REPLY,\r\n  SELECT_COMMENT,\r\n  SELECT_VARIATION,\r\n  setComments,\r\n  SET_COMMENTS,\r\n  SET_PIN_POSITION,\r\n  SHOW_PINS,\r\n  UNATTACH_DRAW_OVER,\r\n  UNATTACH_FILE,\r\n  UNATTACH_PIN,\r\n  UPDATE_DRAWING\r\n} from \"./actions\";\r\n\r\nexport const CURSOR = {\r\n  DEFAULT: \"pointer\",\r\n  DRAWOVER: \"drawover\",\r\n  PIN: \"pin\"\r\n};\r\n\r\nexport const author = authors[Math.floor(Math.random() * authors.length)];\r\n\r\nconst initialState = {\r\n  cursor: CURSOR.DEFAULT,\r\n  cameraPosition: { position: [0, 1, 4], focus: [0, 0, 0] },\r\n  isCommenting: false,\r\n  fileIsAttached: false,\r\n  drawOverIsAttached: false,\r\n  pinIsAttached: false,\r\n  showPins: true,\r\n  activeVariationIds: { 1: true },\r\n  variations: [\r\n    {\r\n      id: 1,\r\n      name: \"Original\",\r\n      thumbnail: \"assets/nike_shoe_thumbnail.png\",\r\n      model: \"models/gltf/nike_shoe/scene.gltf\"\r\n    },\r\n    {\r\n      id: 2,\r\n      name: \"Magenta\",\r\n      thumbnail: \"assets/nike_shoe_pink_thumbnail.png\",\r\n      model: \"models/gltf/nike_shoe_pink/scene.gltf\"\r\n    },\r\n    {\r\n      id: 3,\r\n      name: \"Turquoise\",\r\n      thumbnail: \"assets/nike_shoe_turquoise_thumbnail.png\",\r\n      model: \"models/gltf/nike_shoe_turquoise/scene.gltf\"\r\n    },\r\n    {\r\n      id: 4,\r\n      name: \"Black\",\r\n      thumbnail: \"assets/nike_shoe_black_thumbnail.png\",\r\n      model: \"models/gltf/nike_shoe_black/scene.gltf\"\r\n    }\r\n  ],\r\n  comments: []\r\n};\r\n\r\nexport function cameraPositionEquals(camera1, camera2) {\r\n  return (\r\n    camera1 === camera2 ||\r\n    (camera1 &&\r\n      camera2 &&\r\n      camera1.position.every(\r\n        (p, i) => Math.abs(p - camera2.position[i]) < 1e-10\r\n      ) &&\r\n      camera1.focus.every((f, i) => Math.abs(f - camera2.focus[i]) < 1e-10))\r\n  );\r\n}\r\n\r\nfunction rootReducer(state = initialState, { type, data }) {\r\n  switch (type) {\r\n    case CHANGE_CAMERA:\r\n      const selectedComment = state.comments.find(\r\n        ({ id }) => id === state.selectedCommentId\r\n      );\r\n      if (\r\n        selectedComment &&\r\n        !cameraPositionEquals(selectedComment.camera, data)\r\n      ) {\r\n        return {\r\n          ...state,\r\n          cameraPosition: data,\r\n          selectedCommentId: null,\r\n          drawing: undefined\r\n        };\r\n      }\r\n      return { ...state, cameraPosition: data };\r\n    case MOVE_CAMERA:\r\n      return { ...state, cameraPosition: data };\r\n    case SELECT_COMMENT:\r\n      return {\r\n        ...state,\r\n        selectedCommentId: data.id,\r\n        cameraPosition: data.camera,\r\n        activeVariationIds: data.activeVariationIds || state.activeVariationIds,\r\n        drawing:\r\n          data.drawOver &&\r\n          JSON.parse(LZString.decompressFromEncodedURIComponent(data.drawOver))\r\n      };\r\n    case DESELECT_COMMENT:\r\n      return { ...state, selectedCommentId: null, drawing: undefined };\r\n    case RESOLVE_COMMENT:\r\n      conn.send(\"deletecomment\", { id: data.id });\r\n      return {\r\n        ...state,\r\n        comments: state.comments.filter(({ id }) => id !== data.id)\r\n      };\r\n    case RESOLVE_REPLY:\r\n      conn.send(\"deletecomment\", { id: data.reply.id });\r\n      return {\r\n        ...state,\r\n        comments: state.comments.map(comment =>\r\n          comment.id === data.comment.id\r\n            ? {\r\n                ...comment,\r\n                thread: comment.thread.filter(({ id }) => id !== data.reply.id)\r\n              }\r\n            : comment\r\n        )\r\n      };\r\n    case BEGIN_COMMENT:\r\n      return { ...state, isCommenting: true };\r\n    case ATTACH_FILE:\r\n      return { ...state, fileIsAttached: true };\r\n    case UNATTACH_FILE:\r\n      return { ...state, fileIsAttached: false, attachedFile: undefined };\r\n    case ATTACH_DRAW_OVER:\r\n      return { ...state, drawOverIsAttached: true, cursor: CURSOR.DRAWOVER };\r\n    case UNATTACH_DRAW_OVER:\r\n      return {\r\n        ...state,\r\n        drawOverIsAttached: false,\r\n        drawing: undefined,\r\n        cursor: CURSOR.DEFAULT\r\n      };\r\n    case ATTACH_PIN:\r\n      return {\r\n        ...state,\r\n        pinIsAttached: true,\r\n        cursor: CURSOR.PIN\r\n      };\r\n    case UNATTACH_PIN:\r\n      return {\r\n        ...state,\r\n        pinIsAttached: false,\r\n        attachedPin: undefined,\r\n        cursor: CURSOR.DEFAULT\r\n      };\r\n    case SET_PIN_POSITION:\r\n      return { ...state, pin: data };\r\n    case PLACE_PIN:\r\n      return { ...state, cursor: CURSOR.DEFAULT };\r\n    case CANCEL_COMMENT:\r\n      return {\r\n        ...state,\r\n        isCommenting: false,\r\n        fileIsAttached: false,\r\n        attachedFile: undefined,\r\n        drawOverIsAttached: false,\r\n        drawing: undefined,\r\n        pinIsAttached: false,\r\n        pin: undefined,\r\n        cursor: CURSOR.DEFAULT\r\n      };\r\n    case ADD_COMMENT:\r\n      if (typeof data === \"string\" && data.trim().length === 0) {\r\n        data = undefined;\r\n      }\r\n      const comment = {\r\n        id: uuidV4(),\r\n        author: author.name,\r\n        profilePicture: author.profilePicture,\r\n        date: new Date().getTime(),\r\n        text: data,\r\n        file: state.file,\r\n        drawOver:\r\n          state.drawing &&\r\n          LZString.compressToEncodedURIComponent(JSON.stringify(state.drawing)),\r\n        pin: state.pin,\r\n        camera: state.cameraPosition,\r\n        activeVariationIds: state.activeVariationIds,\r\n        thread: []\r\n      };\r\n      conn.send(\"addcomment\", comment);\r\n      return { ...state, comments: [comment, ...state.comments] };\r\n    case ADD_REPLY:\r\n      if (typeof data === \"string\" && data.trim().length === 0) {\r\n        data = undefined;\r\n      }\r\n      const reply = {\r\n        id: uuidV4(),\r\n        author: author.name,\r\n        profilePicture: author.profilePicture,\r\n        date: new Date().getTime(),\r\n        text: data.text,\r\n        file: state.file,\r\n        drawOver:\r\n          state.drawing &&\r\n          LZString.compressToEncodedURIComponent(JSON.stringify(state.drawing)),\r\n        camera: state.cameraPosition,\r\n        activeVariationIds: state.activeVariationIds,\r\n        // needed for API\r\n        parent_id: data.comment.id\r\n      };\r\n      conn.send(\"addcomment\", reply);\r\n      return {\r\n        ...state,\r\n        comments: state.comments.map(comment =>\r\n          comment.id === data.comment.id\r\n            ? {\r\n                ...comment,\r\n                thread: [reply, ...comment.thread]\r\n              }\r\n            : comment\r\n        )\r\n      };\r\n    case OPEN_THREAD:\r\n      return { ...state, activeThreadId: data.id };\r\n    case CLOSE_THREAD:\r\n      return { ...state, activeThreadId: null };\r\n    case UPDATE_DRAWING:\r\n      return { ...state, drawing: data };\r\n    case SELECT_VARIATION:\r\n      return {\r\n        ...state,\r\n        activeVariationIds: { ...state.activeVariationIds, [data.id]: true }\r\n      };\r\n    case DESELECT_VARIATION:\r\n      return {\r\n        ...state,\r\n        activeVariationIds: { ...state.activeVariationIds, [data.id]: false }\r\n      };\r\n    case SHOW_PINS:\r\n      return { ...state, showPins: true };\r\n    case HIDE_PINS:\r\n      return { ...state, showPins: false };\r\n    case SET_COMMENTS:\r\n      return { ...state, comments: data };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst store = createStore(rootReducer);\r\n\r\nclass AWSConnection {\r\n  constructor(url, onOpen, onMessage, onError = null, onClose = null) {\r\n    if (url) {\r\n      this.ws = new WebSocket(url);\r\n      this.ws.onopen = onOpen;\r\n      this.ws.onmessage =\r\n        onMessage &&\r\n        function({ data, ...event }) {\r\n          onMessage({ data: JSON.parse(data), ...event });\r\n        };\r\n      this.ws.onerror = onError;\r\n      this.ws.onclose = onClose;\r\n    }\r\n  }\r\n\r\n  send(action, data) {\r\n    if (this.ws) {\r\n      this.ws.send(JSON.stringify({ commentAction: action, ...data }));\r\n    }\r\n  }\r\n}\r\n\r\nconst conn = new AWSConnection(\r\n  \"wss://m4wsvsc677.execute-api.us-east-1.amazonaws.com/poctest\",\r\n  function() {\r\n    conn.send(\"fetchcomments\");\r\n  },\r\n  function({ data }) {\r\n    if (Array.isArray(data)) {\r\n      data = data.map(comment => Converter.unmarshall(comment));\r\n      data = data\r\n        .filter(({ parent_id }) => !parent_id)\r\n        .map(comment => ({\r\n          ...comment,\r\n          thread: data\r\n            .filter(({ parent_id }) => parent_id === comment.id)\r\n            .sort((comment1, comment2) => comment2.date - comment1.date)\r\n        }))\r\n        .sort((comment1, comment2) => comment2.date - comment1.date);\r\n      store.dispatch(setComments(data));\r\n    } else {\r\n      conn.send(\"fetchcomments\");\r\n    }\r\n  },\r\n  console.log\r\n);\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { unattachDrawOver, unattachPin } from \"../../redux/actions\";\r\nimport { CURSOR } from \"../../redux/store\";\r\nimport \"./CommentsColumnHeader.css\";\r\n\r\nfunction CommentsColumnHeader({\r\n  headerText,\r\n  iconImage,\r\n  className,\r\n  redrawEnabled,\r\n  repinEnabled,\r\n  onRedraw,\r\n  onRepin,\r\n  ...props\r\n}) {\r\n  return (\r\n    <div\r\n      className={\r\n        \"comments-column-header-row\" + (className ? \" \" + className : \"\")\r\n      }\r\n      {...props}\r\n    >\r\n      <div>\r\n        {iconImage && (\r\n          <img\r\n            className=\"comments-column-header-icon-image\"\r\n            src={iconImage}\r\n            alt=\"Back icon\"\r\n          />\r\n        )}\r\n        <span className=\"comments-column-header-text\">{headerText}</span>\r\n      </div>\r\n      {!iconImage && redrawEnabled && (\r\n        <button\r\n          className=\"comments-column-header-redo-button\"\r\n          onClick={onRedraw}\r\n        >\r\n          Redraw\r\n        </button>\r\n      )}\r\n      {!iconImage && repinEnabled && (\r\n        <button\r\n          className=\"comments-column-header-redo-button\"\r\n          onClick={onRepin}\r\n        >\r\n          Repin\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  ({ cursor, drawing, pin }) => ({\r\n    redrawEnabled: cursor === CURSOR.DRAWOVER && drawing,\r\n    repinEnabled: cursor === CURSOR.PIN && pin\r\n  }),\r\n  dispatch => ({\r\n    onRedraw: () => {\r\n      dispatch(unattachDrawOver());\r\n    },\r\n    onRepin: () => {\r\n      dispatch(unattachPin());\r\n    }\r\n  })\r\n)(CommentsColumnHeader);\r\n","import React from \"react\";\r\nimport \"./ProfileIcon.css\";\r\n\r\nexport function ProfileIcon({ src, author }) {\r\n  return src ? (\r\n    <img className=\"profile-picture\" src={src} alt={author} />\r\n  ) : (\r\n    <div className=\"initials\">\r\n      {author\r\n        .split(\" \")\r\n        .filter((_, i, names) => i === 0 || i === names.length - 1)\r\n        .map(name => name[0].toLocaleUpperCase())\r\n        .join(\"\")}\r\n    </div>\r\n  );\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport Popup from \"reactjs-popup\";\r\nimport { ProfileIcon } from \"./ProfileIcon/ProfileIcon\";\r\nimport \"./TopRow.css\";\r\n\r\nfunction addDays(date, days) {\r\n  const result = new Date(date.valueOf());\r\n  result.setDate(date.getDate() + days);\r\n  return result;\r\n}\r\n\r\nfunction relativeDateString(dateInMillis) {\r\n  const today = new Date();\r\n  const date = new Date(dateInMillis);\r\n\r\n  if (today.toDateString() === date.toDateString()) {\r\n    return `${date.toLocaleTimeString(navigator.language, {\r\n      timeStyle: \"short\"\r\n    })} Today`;\r\n  } else if (today.toDateString() === addDays(date, 1).toDateString()) {\r\n    return \"Yesterday\";\r\n  } else {\r\n    return date.toLocaleDateString(navigator.language, { dateStyle: \"medium\" });\r\n  }\r\n}\r\n\r\nexport function TopRow({ profilePicture, author, date, onResolve }) {\r\n  const [closeMenu, setCloseMenu] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (closeMenu) {\r\n      setCloseMenu(false);\r\n    }\r\n  }, [closeMenu, setCloseMenu]);\r\n\r\n  return (\r\n    <div className=\"comment-top-row\">\r\n      <ProfileIcon src={profilePicture} author={author} />\r\n      <div className=\"comment-top-column\">\r\n        <div className=\"author-name\">{author}</div>\r\n        <div className=\"comment-date\">{relativeDateString(date)}</div>\r\n      </div>\r\n      <Popup\r\n        className=\"top-row-popup\"\r\n        trigger={\r\n          <button className=\"small-icon-button\">\r\n            <img src=\"assets/dots.svg\" alt=\"More options icon\" />\r\n          </button>\r\n        }\r\n        position=\"bottom right\"\r\n        on=\"click\"\r\n        closeOnDocumentClick\r\n        closeOnEscape\r\n        disabled={closeMenu}\r\n        arrow={false}\r\n      >\r\n        <div className=\"top-row-menu\">\r\n          <div className=\"top-row-menu-options-row\">\r\n            Options\r\n            <button className=\"small-icon-button\">\r\n              <img\r\n                src=\"assets/close.svg\"\r\n                alt=\"Close menu icon\"\r\n                onClick={() => setCloseMenu(true)}\r\n              />\r\n            </button>\r\n          </div>\r\n          <div\r\n            onClick={() => {\r\n              setCloseMenu(true);\r\n              onResolve();\r\n            }}\r\n          >\r\n            Resolve\r\n          </div>\r\n          <div onClick={() => setCloseMenu(true)}>Edit</div>\r\n          <div\r\n            onClick={() => {\r\n              setCloseMenu(true);\r\n              onResolve();\r\n            }}\r\n          >\r\n            Delete\r\n          </div>\r\n        </div>\r\n      </Popup>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { unattachDrawOver } from \"../../redux/actions\";\r\nimport { CURSOR } from \"../../redux/store\";\r\nimport \"./Comment.css\";\r\nimport { TopRow } from \"./TopRow/TopRow\";\r\n\r\nfunction Comment({\r\n  comment: { text, drawOver, pin, ...comment },\r\n  selected,\r\n  redrawEnabled,\r\n  onRedraw,\r\n  onResolve,\r\n  children,\r\n  ...props\r\n}) {\r\n  return (\r\n    <div className={\"comment\" + (selected ? \" selected\" : \"\")} {...props}>\r\n      <div className=\"comment-content\">\r\n        <TopRow {...comment} onResolve={onResolve} />\r\n        <p className=\"comment-text\">{text}</p>\r\n        {children}\r\n      </div>\r\n      <div className=\"comment-flag-row\">\r\n        {drawOver && (\r\n          <img\r\n            className=\"comment-flag\"\r\n            src=\"assets/drawover-flag.svg\"\r\n            alt=\"Drawover flag\"\r\n          />\r\n        )}\r\n        {pin && (\r\n          <img\r\n            className=\"comment-flag\"\r\n            src=\"assets/pin-flag.svg\"\r\n            alt=\"Pin flag\"\r\n          />\r\n        )}\r\n        {redrawEnabled && (\r\n          <button className=\"comment-flag-redo-button\" onClick={onRedraw}>\r\n            Redraw\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  (\r\n    { cursor, activeThreadId, selectedCommentId, drawing },\r\n    { comment: { id } }\r\n  ) => ({\r\n    selected: id === selectedCommentId,\r\n    redrawEnabled:\r\n      id === activeThreadId && cursor === CURSOR.DRAWOVER && drawing\r\n  }),\r\n  dispatch => ({\r\n    onRedraw: () => {\r\n      dispatch(unattachDrawOver());\r\n    }\r\n  })\r\n)(Comment);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { cancelComment, openThread, selectComment } from \"../../redux/actions\";\r\nimport Comment from \"../Comment/Comment\";\r\nimport \"./MainComment.css\";\r\n\r\nfunction MainComment({\r\n  comment: { thread, ...comment },\r\n  onClickReply,\r\n  ...props\r\n}) {\r\n  function replyLabel(thread) {\r\n    if (thread && thread.length > 0) {\r\n      if (thread.length > 1) {\r\n        return `${thread.length} Replies`;\r\n      } else {\r\n        return \"1 Reply\";\r\n      }\r\n    } else {\r\n      return \"Reply\";\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Comment comment={comment} {...props}>\r\n      <button\r\n        className=\"reply-button\"\r\n        onClick={event => {\r\n          event.stopPropagation();\r\n          onClickReply();\r\n        }}\r\n      >\r\n        {replyLabel(thread)}\r\n      </button>\r\n    </Comment>\r\n  );\r\n}\r\n\r\nexport default connect(null, (dispatch, { comment }) => ({\r\n  onClickReply: () => {\r\n    dispatch(cancelComment());\r\n    dispatch(selectComment(comment));\r\n    dispatch(openThread(comment));\r\n  }\r\n}))(MainComment);\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { ConfirmResolve } from \"../../ConfirmResolve/ConfirmResolve\";\r\nimport {\r\n  addComment,\r\n  cancelComment,\r\n  deselectComment,\r\n  resolveComment,\r\n  selectComment\r\n} from \"../../redux/actions\";\r\nimport CommentInput from \"../CommentInput/CommentInput\";\r\nimport CommentsColumnHeader from \"../CommentsColumnHeader/CommentsColumnHeader\";\r\nimport MainComment from \"../MainComment/MainComment\";\r\nimport \"./MainThread.css\";\r\n\r\nfunction MainThread({\r\n  isCommenting,\r\n  comments,\r\n  onAddComment,\r\n  onClickComment,\r\n  onResolveComment,\r\n  ...props\r\n}) {\r\n  const [resolveCommentId, setResolveCommentId] = useState();\r\n\r\n  return (\r\n    <div id=\"comment-column\" {...props}>\r\n      <div id=\"input-column\">\r\n        <CommentsColumnHeader headerText=\"Comments\" />\r\n        <CommentInput pinAttachable mainThread onClickSubmit={onAddComment} />\r\n      </div>\r\n      <div className={\"scroll-column\" + (isCommenting ? \" focused\" : \"\")}>\r\n        {comments.map(comment => (\r\n          <MainComment\r\n            key={comment.id}\r\n            comment={comment}\r\n            onClick={() => onClickComment(comment)}\r\n            onResolve={() => setResolveCommentId(comment.id)}\r\n          />\r\n        ))}\r\n        {isCommenting && <div id=\"comment-vignette\"></div>}\r\n      </div>\r\n      <ConfirmResolve\r\n        isModalOpen={resolveCommentId}\r\n        onCancel={() => setResolveCommentId(null)}\r\n        onResolve={() => {\r\n          onResolveComment(comments.find(({ id }) => id === resolveCommentId));\r\n          setResolveCommentId(null);\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  ({ isCommenting, selectedCommentId, comments }) => ({\r\n    isCommenting,\r\n    selectedComment: comments.find(({ id }) => id === selectedCommentId),\r\n    comments\r\n  }),\r\n  dispatch => ({\r\n    onAddComment: comment => {\r\n      dispatch(addComment(comment));\r\n      dispatch(cancelComment());\r\n    },\r\n    selectComment: comment => dispatch(selectComment(comment)),\r\n    deselectComment: () => dispatch(deselectComment()),\r\n    resolveComment: comment => dispatch(resolveComment(comment))\r\n  }),\r\n  (\r\n    { selectedComment, ...stateProps },\r\n    { selectComment, deselectComment, resolveComment, ...dispatchProps },\r\n    ownProps\r\n  ) => ({\r\n    ...ownProps,\r\n    ...stateProps,\r\n    ...dispatchProps,\r\n    onClickComment: comment =>\r\n      comment !== selectedComment ? selectComment(comment) : deselectComment(),\r\n    onResolveComment: comment => {\r\n      if (comment === selectedComment) {\r\n        deselectComment();\r\n      }\r\n      resolveComment(comment);\r\n    }\r\n  })\r\n)(MainThread);\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { ConfirmResolve } from \"../../ConfirmResolve/ConfirmResolve\";\r\nimport {\r\n  addReply,\r\n  cancelComment,\r\n  closeThread,\r\n  deselectComment,\r\n  resolveComment,\r\n  resolveReply,\r\n  selectComment\r\n} from \"../../redux/actions\";\r\nimport Comment from \"../Comment/Comment\";\r\nimport CommentInput from \"../CommentInput/CommentInput\";\r\nimport CommentsColumnHeader from \"../CommentsColumnHeader/CommentsColumnHeader\";\r\nimport \"./Thread.css\";\r\n\r\nfunction Thread({\r\n  comment,\r\n  isCommenting,\r\n  onReturn,\r\n  onClickComment,\r\n  onClickReply,\r\n  onAddReply,\r\n  onResolveComment,\r\n  ...props\r\n}) {\r\n  const [resolveCommentId, setResolveCommentId] = useState();\r\n\r\n  return comment ? (\r\n    <div id=\"thread-column\" {...props}>\r\n      <CommentsColumnHeader\r\n        className=\"thread-column-header\"\r\n        iconImage=\"assets/left-arrow.svg\"\r\n        headerText=\"Back to all comments\"\r\n        onClick={onReturn}\r\n      />\r\n      <Comment\r\n        comment={comment}\r\n        onClick={() => onClickComment(comment)}\r\n        onResolve={() => setResolveCommentId(comment.id)}\r\n      >\r\n        <CommentInput\r\n          onClick={e => e.stopPropagation()}\r\n          onClickSubmit={text => onAddReply(comment, text)}\r\n        />\r\n      </Comment>\r\n      <div className=\"scroll-column\">\r\n        {comment &&\r\n          comment.thread.map(reply => (\r\n            <Comment\r\n              key={reply.id}\r\n              comment={reply}\r\n              onClick={() => onClickReply(reply)}\r\n              onResolve={() => setResolveCommentId(reply.id)}\r\n            />\r\n          ))}\r\n        {isCommenting && <div id=\"reply-vignette\"></div>}\r\n      </div>\r\n      <ConfirmResolve\r\n        isModalOpen={resolveCommentId}\r\n        onCancel={() => setResolveCommentId(null)}\r\n        onResolve={() => {\r\n          onResolveComment(\r\n            [comment, ...comment.thread].find(\r\n              ({ id }) => id === resolveCommentId\r\n            )\r\n          );\r\n          setResolveCommentId(null);\r\n        }}\r\n      />\r\n    </div>\r\n  ) : null;\r\n}\r\n\r\nfunction mergeProps(\r\n  { selectedComment, ...stateProps },\r\n  dispatchProps,\r\n  ownProps\r\n) {\r\n  const {\r\n    selectComment,\r\n    deselectComment,\r\n    resolveComment,\r\n    resolveReply,\r\n    ...restOfDispatchProps\r\n  } = dispatchProps;\r\n\r\n  return {\r\n    ...ownProps,\r\n    ...stateProps,\r\n    ...restOfDispatchProps,\r\n    onClickComment: comment => {\r\n      if (!stateProps.isCommenting && comment !== selectedComment) {\r\n        selectComment(comment);\r\n      }\r\n    },\r\n    onClickReply: comment =>\r\n      comment !== selectedComment ? selectComment(comment) : deselectComment(),\r\n    onResolveComment: comment => {\r\n      if (comment === selectedComment) {\r\n        deselectComment();\r\n      }\r\n      if (comment === ownProps.comment) {\r\n        resolveComment(comment);\r\n      } else {\r\n        resolveReply(ownProps.comment, comment);\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  ({ isCommenting, selectedCommentId, comments }) => ({\r\n    isCommenting,\r\n    selectedComment: comments\r\n      .flatMap(comment => [comment, ...comment.thread])\r\n      .find(({ id }) => id === selectedCommentId)\r\n  }),\r\n  dispatch => ({\r\n    onReturn: () => {\r\n      dispatch(cancelComment());\r\n      dispatch(closeThread());\r\n    },\r\n    selectComment: comment => dispatch(selectComment(comment)),\r\n    deselectComment: () => dispatch(deselectComment()),\r\n    resolveComment: comment => dispatch(resolveComment(comment)),\r\n    resolveReply: (comment, reply) => dispatch(resolveReply(comment, reply)),\r\n    onAddReply: (comment, text) => {\r\n      dispatch(addReply(comment, text));\r\n      dispatch(cancelComment());\r\n    }\r\n  }),\r\n  mergeProps\r\n)(Thread);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport \"./CommentsColumn.css\";\r\nimport MainThread from \"./MainThread/MainThread\";\r\nimport Thread from \"./Thread/Thread\";\r\nimport { useState } from \"react\";\r\nimport CommentsColumnHeader from \"./CommentsColumnHeader/CommentsColumnHeader\";\r\nimport { closeThread, cancelComment } from \"../redux/actions\";\r\n\r\nfunction CommentsColumn({ activeThread, onClickShowHide, ...props }) {\r\n  const [isOpen, setIsOpen] = useState(true);\r\n  return (\r\n    <div id=\"comments-row\" className={isOpen ? \"\" : \"closed\"}>\r\n      <CommentsColumnHeader\r\n        headerText=\"Show comments\"\r\n        className={\"comments-column-closed-label\" + (isOpen ? \"\" : \" closed\")}\r\n        onClick={() => setIsOpen(true)}\r\n      />\r\n      <div className={\"comments-column-inside\" + (isOpen ? \"\" : \" closed\")}>\r\n        <MainThread\r\n          className={\r\n            \"main-thread\" + (activeThread ? \" main-thread-inactive\" : \"\")\r\n          }\r\n          {...props}\r\n        />\r\n        <Thread\r\n          className={\r\n            \"active-thread\" + (!activeThread ? \" active-thread-inactive\" : \"\")\r\n          }\r\n          comment={activeThread}\r\n        />\r\n      </div>\r\n      <button\r\n        className={\"comments-column-close-button\" + (isOpen ? \"\" : \" closed\")}\r\n        onClick={() => {\r\n          setIsOpen(!isOpen);\r\n          onClickShowHide();\r\n        }}\r\n      >\r\n        <img src=\"assets/right-arrow.svg\" alt=\"Close sidebar icon\" />\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  ({ activeThreadId, comments }) => ({\r\n    activeThread: comments.find(({ id }) => id === activeThreadId)\r\n  }),\r\n  dispatch => ({\r\n    onClickShowHide: () => {\r\n      dispatch(cancelComment());\r\n      dispatch(closeThread());\r\n    }\r\n  })\r\n)(CommentsColumn);\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { HotKeys } from \"react-hotkeys\";\r\nimport \"./DrawCanvas.css\";\r\n\r\nfunction handleUndo(isPainting, setPainting, value, onChange) {\r\n  return () => {\r\n    if (isPainting) {\r\n      setPainting(false);\r\n    }\r\n    value = value.filter(line => line.length > 1);\r\n    if (value.length > 0) {\r\n      onChange && onChange(value.slice(0, value.length - 1));\r\n    }\r\n  };\r\n}\r\n\r\nfunction handleClick(setPainting, onChange, value, ref) {\r\n  return ({ nativeEvent }) => {\r\n    const { offsetX, offsetY } = nativeEvent;\r\n    setPainting(true);\r\n    onChange &&\r\n      onChange([\r\n        ...value,\r\n        [\r\n          {\r\n            x: offsetX / ref.current.clientWidth,\r\n            y: offsetY / ref.current.clientHeight\r\n          }\r\n        ]\r\n      ]);\r\n  };\r\n}\r\n\r\nfunction handleDrag(isPainting, value, onChange, ref) {\r\n  return ({ nativeEvent }) => {\r\n    if (isPainting) {\r\n      const { offsetX, offsetY } = nativeEvent;\r\n      if (value.length > 0) {\r\n        const currLine = value[value.length - 1];\r\n        onChange &&\r\n          onChange([\r\n            ...value.slice(0, value.length - 1),\r\n            [\r\n              ...currLine,\r\n              {\r\n                x: offsetX / ref.current.clientWidth,\r\n                y: offsetY / ref.current.clientHeight\r\n              }\r\n            ]\r\n          ]);\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nfunction convertTouchToMouse(handler) {\r\n  return ({ nativeEvent }) => {\r\n    const canvasRect = nativeEvent.target.getBoundingClientRect();\r\n    const touch = nativeEvent.targetTouches[0];\r\n    handler({\r\n      nativeEvent: {\r\n        offsetX: touch.pageX - canvasRect.left,\r\n        offsetY: touch.pageY - canvasRect.top\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nfunction paint(canvas, ctx, value, lineWidth, lineColor) {\r\n  if (ctx) {\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    for (const line of value) {\r\n      const [{ x, y }, ...rest] = line;\r\n\r\n      ctx.lineJoin = \"round\";\r\n      ctx.lineCap = \"round\";\r\n      ctx.lineWidth = lineWidth;\r\n      ctx.strokeStyle = lineColor;\r\n\r\n      ctx.beginPath();\r\n      ctx.moveTo(x * canvas.width, y * canvas.height);\r\n      for (const { x, y } of rest) {\r\n        ctx.lineTo(x * canvas.width, y * canvas.height);\r\n      }\r\n      ctx.stroke();\r\n    }\r\n  }\r\n}\r\n\r\nexport function DrawCanvas({\r\n  lineWidth = 3,\r\n  lineColor = \"black\",\r\n  value,\r\n  onChange,\r\n  ...props\r\n}) {\r\n  value = value || [];\r\n  const ref = useRef();\r\n  const width = 1024;\r\n  const height = 1024;\r\n  const [ctx, setContext] = useState();\r\n  const [isPainting, setPainting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!ctx) {\r\n      setContext(ref.current.getContext(\"2d\"));\r\n    }\r\n  }, [ref, ctx]);\r\n  useEffect(() => paint(ref.current, ctx, value, lineWidth, lineColor), [\r\n    ref,\r\n    ctx,\r\n    value,\r\n    lineWidth,\r\n    lineColor\r\n  ]);\r\n\r\n  return (\r\n    <HotKeys\r\n      allowChanges\r\n      className=\"draw-canvas-hotkeys\"\r\n      keyMap={{ undo: [\"command+z\", \"ctrl+z\", \"backspace\"] }}\r\n      handlers={{\r\n        undo: handleUndo(isPainting, setPainting, value, onChange)\r\n      }}\r\n    >\r\n      <canvas\r\n        ref={ref}\r\n        className=\"draw-canvas\"\r\n        width={width}\r\n        height={height}\r\n        onMouseDown={handleClick(setPainting, onChange, value, ref)}\r\n        onMouseMove={handleDrag(isPainting, value, onChange, ref)}\r\n        onMouseUp={() => setPainting(false)}\r\n        onTouchStart={convertTouchToMouse(\r\n          handleClick(setPainting, onChange, value, ref)\r\n        )}\r\n        onTouchMove={convertTouchToMouse(\r\n          handleDrag(isPainting, value, onChange, ref)\r\n        )}\r\n        onTouchEnd={() => setPainting(false)}\r\n        onTouchCancel={handleUndo(isPainting, setPainting, value, onChange)}\r\n        {...props}\r\n      />\r\n    </HotKeys>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { DrawCanvas } from \"../DrawCanvas/DrawCanvas\";\r\nimport { updateDrawing } from \"../redux/actions\";\r\nimport { CURSOR } from \"../redux/store\";\r\nimport \"./DrawOver.css\";\r\n\r\nfunction DrawOver({ interactive, drawing, onChange, children, ...props }) {\r\n  return (\r\n    <div id=\"sketch-container\" {...props}>\r\n      {children}\r\n      <div id=\"sketch-canvas\" className={!interactive ? \"static\" : \"\"}>\r\n        <DrawCanvas\r\n          lineWidth={2}\r\n          lineColor=\"#ff0035\"\r\n          value={drawing}\r\n          onChange={onChange}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  ({ cursor, drawing }) => ({\r\n    interactive: cursor === CURSOR.DRAWOVER,\r\n    drawing\r\n  }),\r\n  dispatch => ({ onChange: drawing => dispatch(updateDrawing(drawing)) })\r\n)(DrawOver);\r\n","import React from \"react\";\r\nimport { author } from \"../redux/store\";\r\nimport \"./Header.css\";\r\n\r\nfunction Header({ eyeOpen, onClickEye }) {\r\n  return (\r\n    <div className=\"head\">\r\n      <button className=\"back-button\">Back</button>\r\n      <div className=\"button-row\">\r\n        <img\r\n          className=\"profile\"\r\n          alt={author.name}\r\n          src={author.profilePicture}\r\n        />\r\n        <button className=\"AR\" onClick={() => alert(\"more features to come\")}>\r\n          AR\r\n        </button>\r\n        <button className=\"share\" onClick={() => alert(\"share link copied\")}>\r\n          Share\r\n        </button>\r\n        <button className=\"eye\" onClick={onClickEye}>\r\n          <img\r\n            src={`assets/eye-${eyeOpen ? \"open\" : \"closed\"}.svg`}\r\n            alt=\"Show/hide pins icon\"\r\n          />\r\n        </button>\r\n      </div>\r\n      <div className=\"greeting-row\">\r\n        <span>Nike Zoom Prototype 1</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Canvas, extend, useFrame, useThree } from \"react-three-fiber\";\r\nimport { Box3, Color, sRGBEncoding, Vector3 } from \"three\";\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\r\nimport { changeCamera, placePin, setPinPosition } from \"./redux/actions\";\r\nimport { cameraPositionEquals, CURSOR } from \"./redux/store\";\r\n\r\nextend({ OrbitControls });\r\n\r\nfunction Model({ path, fallback, ...props }) {\r\n  const [model, setModel] = useState();\r\n\r\n  useEffect(() => {\r\n    if (!model) {\r\n      (async () => {\r\n        const gltf = await new Promise((resolve, reject) =>\r\n          new GLTFLoader().load(path, resolve, undefined, reject)\r\n        );\r\n        var mroot = gltf.scene;\r\n\r\n        //Rescale the object to normalized space\r\n        var bbox = new Box3().setFromObject(mroot);\r\n        mroot.scale.multiplyScalar(\r\n          5 / Math.max(...bbox.getSize(new Vector3()).toArray())\r\n        );\r\n\r\n        //Centering Object\r\n        bbox.setFromObject(mroot);\r\n        mroot.position.copy(bbox.getCenter(new Vector3())).multiplyScalar(-1);\r\n\r\n        setModel(gltf);\r\n      })();\r\n    }\r\n  }, [path, model]);\r\n\r\n  return model ? <primitive object={model.scene} {...props} /> : fallback;\r\n}\r\n\r\nfunction Pin({ pinPosition, color = \"red\" }) {\r\n  const mesh = useRef();\r\n\r\n  useEffect(() => {\r\n    if (mesh.current) {\r\n      mesh.current.geometry.verticesNeedUpdate = true;\r\n    }\r\n  });\r\n\r\n  if (!pinPosition) return null;\r\n\r\n  let position = new Vector3(...pinPosition.position);\r\n  let normal = new Vector3(...pinPosition.normal);\r\n\r\n  let endVertex = position.clone();\r\n  endVertex.addScaledVector(normal, 0.2); //length of pin\r\n\r\n  var points = [position, endVertex];\r\n\r\n  var pin = (\r\n    <group>\r\n      <line ref={mesh}>\r\n        <geometry\r\n          attach=\"geometry\"\r\n          vertices={points}\r\n          verticesNeedUpdate={true}\r\n        />\r\n        <meshBasicMaterial attach=\"material\" color=\"#7B7B7B\" />\r\n      </line>\r\n\r\n      <mesh visible position={points[1]}>\r\n        <sphereGeometry attach=\"geometry\" args={[0.03, 16, 16]} />\r\n        <meshStandardMaterial attach=\"material\" color={color} />\r\n      </mesh>\r\n    </group>\r\n  );\r\n\r\n  return pin;\r\n}\r\n\r\nfunction Controls({ cameraPosition, onOrbitChange, ...props }) {\r\n  const controlsRef = useRef();\r\n\r\n  useFrame(() => {\r\n    const controls = controlsRef.current;\r\n    if (\r\n      cameraPosition &&\r\n      !cameraPositionEquals(cameraPosition, {\r\n        position: controls.object.position.toArray(),\r\n        focus: controls.target.toArray()\r\n      })\r\n    ) {\r\n      const { position, focus } = cameraPosition;\r\n      controls.object.position.set(...position);\r\n      controls.target.set(...focus);\r\n      controls.update();\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    const controls = controlsRef.current;\r\n    controls.addEventListener(\"change\", onOrbitChange);\r\n    return () => controls.removeEventListener(\"change\", onOrbitChange);\r\n  }, [cameraPosition, controlsRef, onOrbitChange]);\r\n\r\n  const {\r\n    camera,\r\n    gl: { domElement }\r\n  } = useThree();\r\n  return (\r\n    <orbitControls ref={controlsRef} args={[camera, domElement]} {...props} />\r\n  );\r\n}\r\n\r\nfunction LoadingModel({ color = \"orange\", position, ...props }) {\r\n  const mesh = useRef();\r\n  const [loadingModel, setLoadingModel] = useState();\r\n\r\n  useEffect(() => {\r\n    let stillMounted = true;\r\n    if (!loadingModel) {\r\n      (async function() {\r\n        const gltf = await new Promise((resolve, reject) =>\r\n          new GLTFLoader().load(\r\n            \"models/gltf/vivid3d_loader/scene.gltf\",\r\n            resolve,\r\n            undefined,\r\n            reject\r\n          )\r\n        );\r\n        if (stillMounted) {\r\n          gltf.scene.scale.setLength(13);\r\n          setLoadingModel(gltf);\r\n        }\r\n      })();\r\n    }\r\n    \r\n    return function() {\r\n      stillMounted = false;\r\n    };\r\n  }, [loadingModel, setLoadingModel]);\r\n\r\n  useFrame(() => {\r\n    if (mesh.current) {\r\n      mesh.current.rotation.y -= 0.03;\r\n      mesh.current.position.set(...position);\r\n    }\r\n  });\r\n\r\n  return loadingModel ? (\r\n    <primitive ref={mesh} object={loadingModel.scene} {...props} />\r\n  ) : null;\r\n}\r\n\r\nfunction ModelRenderer({\r\n  cameraPosition,\r\n  comments,\r\n  modelPath,\r\n  pinIsAttached,\r\n  pinFollowCursor,\r\n  pin,\r\n  showPins,\r\n  onOrbitChange,\r\n  placePinClick,\r\n  onPointerMove,\r\n  ...props\r\n}) {\r\n  return (\r\n    <Canvas\r\n      camera={{ fov: 60, near: 1 }}\r\n      onCreated={({ gl, scene }) => {\r\n        if (gl) gl.outputEncoding = sRGBEncoding;\r\n        if (scene) scene.background = new Color(0xe5e5e5);\r\n      }}\r\n      {...props}\r\n    >\r\n      <Controls\r\n        cameraPosition={cameraPosition}\r\n        minDistance={1}\r\n        maxDistance={50}\r\n        onOrbitChange={onOrbitChange}\r\n      />\r\n      <ambientLight />\r\n      <Model\r\n        path={modelPath}\r\n        fallback={<LoadingModel position={cameraPosition.focus} />}\r\n        onPointerMove={pinFollowCursor && onPointerMove}\r\n        onClick={pinFollowCursor && placePinClick}\r\n      />\r\n      {pinIsAttached && <Pin pinPosition={pin} color=\"#E37FFA\" />}\r\n      {showPins &&\r\n        comments\r\n          .filter(comment => comment.pin)\r\n          .map(comment => <Pin key={comment.id} pinPosition={comment.pin} />)}\r\n    </Canvas>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  ({ cameraPosition, comments, pinIsAttached, cursor, pin, showPins }) => ({\r\n    cameraPosition,\r\n    comments,\r\n    pinIsAttached,\r\n    pinFollowCursor: cursor === CURSOR.PIN,\r\n    pin,\r\n    showPins\r\n  }),\r\n  dispatch => ({\r\n    onOrbitChange: ({\r\n      target: {\r\n        object: { position },\r\n        target: focus\r\n      }\r\n    }) =>\r\n      dispatch(\r\n        changeCamera({ position: position.toArray(), focus: focus.toArray() })\r\n      ),\r\n    onPointerMove: event =>\r\n      dispatch(\r\n        setPinPosition({\r\n          position: event.point.toArray(),\r\n          normal: event.face.normal.toArray()\r\n        })\r\n      ),\r\n    placePinClick: () => dispatch(placePin())\r\n  })\r\n)(ModelRenderer);\r\n","import React, { useState } from \"react\";\r\nimport \"./Variation.css\";\r\nimport { connect } from \"react-redux\";\r\n\r\nfunction Variation({ id, name, thumbnail, selected, ...props }) {\r\n  const [mouseHover, setMouseHover] = useState(false);\r\n\r\n  return (\r\n    <div\r\n      className=\"variation\"\r\n      onMouseEnter={() => setMouseHover(true)}\r\n      onMouseLeave={() => setMouseHover(false)}\r\n      {...props}\r\n    >\r\n      <span className=\"variation-name\">{name}</span>\r\n      <img\r\n        className=\"variation-thumbnail-image\"\r\n        src={thumbnail}\r\n        alt={`${name} thumbnail`}\r\n      />\r\n      {(selected || mouseHover) && (\r\n        <div\r\n          className={\"variation-checked-circle\" + (selected ? \" selected\" : \"\")}\r\n        >\r\n          {selected && (\r\n            <img\r\n              src=\"assets/variation-check.svg\"\r\n              alt=\"Variation checked icon\"\r\n            />\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  ({ activeVariationIds }, ownProps) => ({\r\n    selected: activeVariationIds[ownProps.id]\r\n  }),\r\n  () => ({})\r\n)(Variation);\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport CommentsColumnHeader from \"../CommentsColumn/CommentsColumnHeader/CommentsColumnHeader\";\r\nimport {\r\n  deselectComment,\r\n  deselectVariation,\r\n  selectVariation\r\n} from \"../redux/actions\";\r\nimport Variation from \"./Variation/Variation\";\r\nimport \"./VariationsColumn.css\";\r\n\r\nfunction VariationsColumn({ variations, onClickVariation, ...props }) {\r\n  const [isOpen, setIsOpen] = useState(true);\r\n\r\n  return (\r\n    <div id=\"variations-column\" className={isOpen ? \"\" : \"closed\"} {...props}>\r\n      <CommentsColumnHeader\r\n        headerText=\"Show Variations\"\r\n        className={\"variations-column-closed-label\" + (isOpen ? \"\" : \" closed\")}\r\n        onClick={() => setIsOpen(true)}\r\n      />\r\n      <div className={\"variations-column-inside\" + (isOpen ? \"\" : \" closed\")}>\r\n        <CommentsColumnHeader\r\n          className=\"variations-header\"\r\n          headerText=\"Variations\"\r\n        />\r\n        <div className=\"variations-scroll-column\">\r\n          {variations.map(variation => (\r\n            <Variation\r\n              key={variation.id}\r\n              onClick={() => onClickVariation(variation)}\r\n              {...variation}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <button\r\n        className={\"variations-column-close-button\" + (isOpen ? \"\" : \" closed\")}\r\n        onClick={() => setIsOpen(!isOpen)}\r\n      >\r\n        <img src=\"assets/right-arrow.svg\" alt=\"Close sidebar icon\" />\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  ({ activeVariationIds, variations }) => ({ activeVariationIds, variations }),\r\n  dispatch => ({\r\n    selectVariation: variation => dispatch(selectVariation(variation)),\r\n    deselectVariation: variation => dispatch(deselectVariation(variation)),\r\n    deselectComment: () => dispatch(deselectComment())\r\n  }),\r\n  (\r\n    { activeVariationIds, ...stateProps },\r\n    { selectVariation, deselectVariation, deselectComment },\r\n    ownProps\r\n  ) => ({\r\n    ...ownProps,\r\n    ...stateProps,\r\n    onClickVariation: variation => {\r\n      deselectComment();\r\n      if (activeVariationIds[variation.id]) {\r\n        deselectVariation(variation);\r\n      } else {\r\n        selectVariation(variation);\r\n      }\r\n    }\r\n  })\r\n)(VariationsColumn);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { connect, Provider } from \"react-redux\";\r\nimport CommentsColumn from \"./CommentsColumn/CommentsColumn\";\r\nimport DrawOver from \"./DrawOver/DrawOver\";\r\nimport Header from \"./Header/Header\";\r\nimport \"./index.css\";\r\nimport ModelRenderer from \"./ModelRenderer\";\r\nimport store from \"./redux/store\";\r\nimport {\r\n  deselectComment,\r\n  moveCamera,\r\n  showPins,\r\n  hidePins\r\n} from \"./redux/actions\";\r\nimport VariationsColumn from \"./VariationsColumn/VariationsColumn\";\r\n\r\nfunction MainPage({\r\n  cursor,\r\n  showPins,\r\n  activeVariations,\r\n  onClickEye,\r\n  onClickTopCamera,\r\n  onClickFrontCamera,\r\n  onClickSideCamera\r\n}) {\r\n  return (\r\n    <div id=\"app-container\" className={cursor}>\r\n      <Header eyeOpen={showPins} onClickEye={onClickEye} />\r\n      <div id=\"main-area\">\r\n        <VariationsColumn />\r\n        <DrawOver className=\"draw-over\">\r\n          <div className=\"renderer-row\">\r\n            {activeVariations.map(variation => (\r\n              <div\r\n                key={variation.id}\r\n                className=\"renderer\"\r\n                style={{\r\n                  width: `calc(100%/${activeVariations.length})`\r\n                }}\r\n              >\r\n                <ModelRenderer modelPath={variation.model} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"camera-button-row\">\r\n            <button\r\n              className=\"camera-button top-camera-button\"\r\n              onClick={onClickTopCamera}\r\n            >\r\n              <div className=\"camera-button-icon-container\">\r\n                <img src=\"assets/top-icon.svg\" alt=\"Top camera view icon\" />\r\n              </div>\r\n              Top\r\n            </button>\r\n            <button\r\n              className=\"camera-button front-camera-button\"\r\n              onClick={onClickFrontCamera}\r\n            >\r\n              <div className=\"camera-button-icon-container\">\r\n                <img src=\"assets/front-icon.svg\" alt=\"Top camera view icon\" />\r\n              </div>\r\n              Front\r\n            </button>\r\n            <button\r\n              className=\"camera-button side-camera-button\"\r\n              onClick={onClickSideCamera}\r\n            >\r\n              <div className=\"camera-button-icon-container\">\r\n                <img src=\"assets/side-icon.svg\" alt=\"Top camera view icon\" />\r\n              </div>\r\n              Side\r\n            </button>\r\n          </div>\r\n        </DrawOver>\r\n        <CommentsColumn />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst WrappedMainPage = connect(\r\n  ({ cursor, activeVariationIds, variations, showPins }) => ({\r\n    cursor,\r\n    activeVariations: Object.keys(activeVariationIds)\r\n      .filter(id => activeVariationIds[id])\r\n      .map(variationId => variations.find(({ id }) => `${id}` === variationId)),\r\n    showPins\r\n  }),\r\n  dispatch => ({\r\n    onClickTopCamera: () => {\r\n      dispatch(deselectComment());\r\n      dispatch(moveCamera({ position: [0, 4, 0], focus: [0, 0, 0] }));\r\n    },\r\n    onClickFrontCamera: () => {\r\n      dispatch(deselectComment());\r\n      dispatch(moveCamera({ position: [0, 0, 4], focus: [0, 0, 0] }));\r\n    },\r\n    onClickSideCamera: () => {\r\n      dispatch(deselectComment());\r\n      dispatch(moveCamera({ position: [-4, 0, 0], focus: [0, 0, 0] }));\r\n    },\r\n    showPins: () => dispatch(showPins()),\r\n    hidePins: () => dispatch(hidePins())\r\n  }),\r\n  (stateProps, { showPins, hidePins, ...dispatchProps }, ownProps) => ({\r\n    ...ownProps,\r\n    ...stateProps,\r\n    ...dispatchProps,\r\n    onClickEye: () => {\r\n      if (stateProps.showPins) {\r\n        hidePins();\r\n      } else {\r\n        showPins();\r\n      }\r\n    }\r\n  })\r\n)(MainPage);\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <WrappedMainPage />\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}