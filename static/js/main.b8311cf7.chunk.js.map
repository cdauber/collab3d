{"version":3,"sources":["ConfirmResolve/ConfirmResolve.js","redux/actions.js","CommentsColumn/CommentInput/CommentInput.js","CommentsColumn/CommentsColumnHeader/CommentsColumnHeader.js","CommentsColumn/Comment/TopRow/ProfileIcon/ProfileIcon.js","CommentsColumn/Comment/TopRow/TopRow.js","CommentsColumn/Comment/Comment.js","CommentsColumn/MainComment/MainComment.js","CommentsColumn/MainThread/MainThread.js","CommentsColumn/Thread/Thread.js","CommentsColumn/CommentsColumn.js","DrawCanvas/DrawCanvas.js","comments.js","redux/store.js","DrawOver/DrawOver.js","Header/Header.js","ModelRenderer.js","index.js"],"names":["ConfirmResolve","isModalOpen","onCancel","onResolve","props","id","className","onClick","event","stopPropagation","selectComment","comment","type","data","deselectComment","cancelComment","resolveComment","connect","isCommenting","fileIsAttached","drawOverIsAttached","pinIsAttached","cancelEnabled","submitEnabled","beginComment","attachFile","unattachFile","attachDrawOver","unattachDrawOver","attachPin","unattachPin","stateProps","dispatchProps","ownProps","onFocusTextArea","onBlurTextArea","length","onClickAttachFile","onClickAttachDrawOver","onClickAttachPin","onClickCancel","pinAttachable","onClickSubmit","useState","inputComment","setInputComment","placeholder","value","onChange","target","onFocus","onBlur","data-tip","src","alt","place","effect","disabled","CommentsColumnHeader","headerText","iconImage","ProfileIcon","author","split","filter","_","i","names","map","name","toLocaleUpperCase","join","addDays","date","days","result","Date","valueOf","setDate","getDate","TopRow","profilePic","closeMenu","setCloseMenu","useEffect","dateInMillis","today","toDateString","toLocaleTimeString","navigator","language","timeStyle","toLocaleDateString","dateStyle","relativeDateString","trigger","position","on","closeOnDocumentClick","closeOnEscape","arrow","selectedCommentId","selected","dispatch","text","drawOver","pin","children","onClickReply","openThread","thread","replyLabel","comments","selectedComment","find","onAddComment","onClickComment","onResolveComment","resolveCommentId","setResolveCommentId","key","flatMap","onReturn","resolveReply","reply","onAddReply","addReply","restOfDispatchProps","activeThreadId","activeThread","handleUndo","isPainting","setPainting","line","slice","handleClick","ref","nativeEvent","offsetX","offsetY","x","current","clientWidth","y","clientHeight","handleDrag","currLine","convertTouchToMouse","handler","canvasRect","getBoundingClientRect","touch","targetTouches","pageX","left","pageY","top","DrawCanvas","lineWidth","lineColor","useRef","ctx","setContext","getContext","canvas","clearRect","width","height","rest","lineJoin","lineCap","strokeStyle","beginPath","moveTo","lineTo","stroke","paint","allowChanges","keyMap","undo","handlers","onMouseDown","onMouseMove","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","getTime","camera","focus","CURSOR","INITIAL_CAMERA_POSITION","initialState","cursor","cameraPosition","maxCommentId","createStore","state","cameraPositionEquals","camera1","camera2","every","p","Math","abs","f","drawing","JSON","parse","LZString","decompressFromEncodedURIComponent","attachedFile","attachedPin","file","compressToEncodedURIComponent","stringify","interactive","updateDrawing","Header","alert","React","Component","Model","path","gltf","useLoader","GLTFLoader","mroot","scene","bbox","Box3","setFromObject","scale","multiplyScalar","max","getSize","Vector3","toArray","copy","getCenter","object","Controls","onOrbitChange","controlsRef","controls","set","addEventListener","update","removeEventListener","useThree","domElement","gl","args","extend","OrbitControls","reduce","acc","fov","near","onCreated","outputEncoding","sRGBEncoding","background","Color","minDistance","maxDistance","fallback","WrappedMainPage","ReactDOM","render","store","document","getElementById"],"mappings":"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","file":"static/js/main.b8311cf7.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"./ConfirmResolve.css\";\r\n\r\nexport function ConfirmResolve({ isModalOpen, onCancel, onResolve, ...props }) {\r\n  return (\r\n    <div id=\"modal\" className={isModalOpen ? \"\" : \"hide\"} onClick={onCancel}>\r\n      <div\r\n        id=\"modal-dialog\"\r\n        onClick={event => event.stopPropagation()}\r\n        {...props}\r\n      >\r\n        <span id=\"modal-warning\">Are you sure you want to resolve?</span>\r\n        <div id=\"modal-actions\">\r\n          <span\r\n            id=\"modal-cancel\"\r\n            onClick={event => {\r\n              event.stopPropagation();\r\n              onCancel();\r\n            }}\r\n          >\r\n            Cancel\r\n          </span>\r\n          <span\r\n            id=\"modal-submit\"\r\n            onClick={event => {\r\n              event.stopPropagation();\r\n              onResolve();\r\n            }}\r\n          >\r\n            Submit\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * action types\r\n */\r\n\r\nexport const CHANGE_CAMERA = \"CHANGE_CAMERA\";\r\nexport const SELECT_COMMENT = \"SELECT_COMMENT\";\r\nexport const DESELECT_COMMENT = \"DESELECT_COMMENT\";\r\n\r\nexport const BEGIN_COMMENT = \"BEGIN_COMMENT\";\r\nexport const ATTACH_FILE = \"ATTACH_FILE\";\r\nexport const UNATTACH_FILE = \"UNATTACH_FILE\";\r\nexport const ATTACH_DRAW_OVER = \"ATTACH_DRAW_OVER\";\r\nexport const UNATTACH_DRAW_OVER = \"UNATTACH_DRAW_OVER\";\r\nexport const ATTACH_PIN = \"ATTACH_PIN\";\r\nexport const UNATTACH_PIN = \"UNATTACH_PIN\";\r\nexport const CANCEL_COMMENT = \"CANCEL_COMMENT\";\r\n\r\nexport const ADD_COMMENT = \"ADD_COMMENT\";\r\nexport const ADD_REPLY = \"ADD_REPLY\";\r\nexport const RESOLVE_COMMENT = \"RESOLVE_COMMENT\";\r\nexport const RESOLVE_REPLY = \"RESOLVE_REPLY\";\r\n\r\nexport const OPEN_THREAD = \"OPEN_THREAD\";\r\nexport const CLOSE_THREAD = \"CLOSE_THREAD\";\r\n\r\nexport const UPDATE_DRAWING = \"UPDATE_DRAWING\";\r\n\r\n/**\r\n * action creators\r\n */\r\n\r\nexport function changeCamera(cameraPosition) {\r\n  return { type: CHANGE_CAMERA, data: cameraPosition };\r\n}\r\nexport function selectComment(comment) {\r\n  return { type: SELECT_COMMENT, data: comment };\r\n}\r\nexport function deselectComment() {\r\n  return { type: DESELECT_COMMENT };\r\n}\r\n\r\nexport function beginComment() {\r\n  return { type: BEGIN_COMMENT };\r\n}\r\nexport function attachFile() {\r\n  return { type: ATTACH_FILE };\r\n}\r\nexport function unattachFile() {\r\n  return { type: UNATTACH_FILE };\r\n}\r\nexport function attachDrawOver() {\r\n  return { type: ATTACH_DRAW_OVER };\r\n}\r\nexport function unattachDrawOver() {\r\n  return { type: UNATTACH_DRAW_OVER };\r\n}\r\nexport function attachPin() {\r\n  return { type: ATTACH_PIN };\r\n}\r\nexport function unattachPin() {\r\n  return { type: UNATTACH_PIN };\r\n}\r\nexport function cancelComment() {\r\n  return { type: CANCEL_COMMENT };\r\n}\r\n\r\nexport function addComment(text) {\r\n  return { type: ADD_COMMENT, data: text };\r\n}\r\nexport function addReply(comment, text) {\r\n  return { type: ADD_REPLY, data: { comment, text } };\r\n}\r\nexport function resolveComment(comment) {\r\n  return { type: RESOLVE_COMMENT, data: comment };\r\n}\r\nexport function resolveReply(comment, reply) {\r\n  return { type: RESOLVE_REPLY, data: { comment, reply } };\r\n}\r\n\r\nexport function openThread(comment) {\r\n  return { type: OPEN_THREAD, data: comment };\r\n}\r\nexport function closeThread() {\r\n  return { type: CLOSE_THREAD };\r\n}\r\n\r\nexport function updateDrawing(drawing) {\r\n  return { type: UPDATE_DRAWING, data: drawing };\r\n}\r\n","import React, { useState } from \"react\";\r\nimport TextareaAutosize from \"react-autosize-textarea/lib\";\r\nimport { connect } from \"react-redux\";\r\nimport \"./CommentInput.css\";\r\nimport {\r\n  attachFile,\r\n  unattachFile,\r\n  attachDrawOver,\r\n  unattachDrawOver,\r\n  attachPin,\r\n  unattachPin,\r\n  cancelComment,\r\n  beginComment,\r\n  deselectComment\r\n} from \"../../redux/actions\";\r\nimport ReactTooltip from \"react-tooltip\";\r\n\r\nfunction CommentInput({\r\n  pinAttachable = false,\r\n  fileIsAttached,\r\n  drawOverIsAttached,\r\n  pinIsAttached,\r\n  cancelEnabled,\r\n  submitEnabled,\r\n  onFocusTextArea,\r\n  onBlurTextArea,\r\n  onClickAttachFile,\r\n  onClickAttachDrawOver,\r\n  onClickAttachPin,\r\n  onClickCancel,\r\n  onClickSubmit = () => {},\r\n  ...props\r\n}) {\r\n  const [inputComment, setInputComment] = useState();\r\n\r\n  return (\r\n    <div className=\"comment-input-column\" {...props}>\r\n      <TextareaAutosize\r\n        className=\"comment-input-text-area\"\r\n        placeholder=\"Add a comment\"\r\n        value={inputComment}\r\n        onChange={event => setInputComment(event.target.value)}\r\n        onFocus={onFocusTextArea}\r\n        onBlur={() => onBlurTextArea(inputComment)}\r\n      />\r\n      <div className=\"comment-input-actions-row\">\r\n        <div className=\"comment-input-icon-actions\">\r\n          <button\r\n            className={\r\n              \"comment-input-icon-action-button\" +\r\n              (fileIsAttached ? \" active\" : \"\")\r\n            }\r\n            data-tip=\"Attach file\"\r\n            onClick={() => onClickAttachFile(inputComment)}\r\n          >\r\n            <img src=\"assets/clip.svg\" alt=\"File attachment icon\" />\r\n          </button>\r\n          <button\r\n            className={\r\n              \"comment-input-icon-action-button\" +\r\n              (drawOverIsAttached ? \" active\" : \"\")\r\n            }\r\n            data-tip=\"Drawover\"\r\n            onClick={() => onClickAttachDrawOver(inputComment)}\r\n          >\r\n            <img src=\"assets/pencil.svg\" alt=\"File attachment icon\" />\r\n          </button>\r\n          {pinAttachable && (\r\n            <button\r\n              className={\r\n                \"comment-input-icon-action-button\" +\r\n                (pinIsAttached ? \" active\" : \"\")\r\n              }\r\n              data-tip=\"Pin\"\r\n              onClick={() => onClickAttachPin(inputComment)}\r\n            >\r\n              <img src=\"assets/pin.svg\" alt=\"File attachment icon\" />\r\n            </button>\r\n          )}\r\n          <ReactTooltip\r\n            className=\"comment-input-tooltip\"\r\n            place=\"bottom\"\r\n            effect=\"solid\"\r\n          />\r\n        </div>\r\n        <div className=\"comment-input-text-actions\">\r\n          <button\r\n            className=\"comment-input-text-action-button comment-input-cancel-button\"\r\n            disabled={\r\n              !(cancelEnabled || (inputComment && inputComment.length > 0))\r\n            }\r\n            onClick={() => {\r\n              setInputComment(\"\");\r\n              onClickCancel();\r\n            }}\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            className=\"comment-input-text-action-button comment-input-submit-button\"\r\n            disabled={\r\n              !(submitEnabled || (inputComment && inputComment.length > 0))\r\n            }\r\n            onClick={() => {\r\n              onClickSubmit(inputComment || \"\");\r\n              setInputComment(\"\");\r\n            }}\r\n          >\r\n            Submit\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mergeProps(stateProps, dispatchProps, ownProps) {\r\n  const {\r\n    deselectComment,\r\n    beginComment,\r\n    attachFile,\r\n    unattachFile,\r\n    attachDrawOver,\r\n    unattachDrawOver,\r\n    attachPin,\r\n    unattachPin,\r\n    cancelComment\r\n  } = dispatchProps;\r\n\r\n  return {\r\n    ...ownProps,\r\n    ...stateProps,\r\n    onFocusTextArea: () =>\r\n      stateProps.isCommenting || (deselectComment() && beginComment()),\r\n    onBlurTextArea: comment =>\r\n      !stateProps.fileIsAttached &&\r\n      !stateProps.drawOverIsAttached &&\r\n      !stateProps.pinIsAttached &&\r\n      (!comment || comment.length === 0) &&\r\n      cancelComment(),\r\n    onClickAttachFile: comment => {\r\n      if (stateProps.fileIsAttached) {\r\n        if (\r\n          !stateProps.drawOverIsAttached &&\r\n          !stateProps.pinIsAttached &&\r\n          (!comment || comment.length === 0)\r\n        ) {\r\n          cancelComment();\r\n        } else {\r\n          unattachFile();\r\n        }\r\n      } else {\r\n        if (!stateProps.cancelEnabled) {\r\n          deselectComment();\r\n          beginComment();\r\n        }\r\n        attachFile();\r\n      }\r\n    },\r\n    onClickAttachDrawOver: comment => {\r\n      if (stateProps.drawOverIsAttached) {\r\n        if (\r\n          !stateProps.fileIsAttached &&\r\n          !stateProps.pinIsAttached &&\r\n          (!comment || comment.length === 0)\r\n        ) {\r\n          cancelComment();\r\n        } else {\r\n          unattachDrawOver();\r\n        }\r\n      } else {\r\n        if (!stateProps.cancelEnabled) {\r\n          deselectComment();\r\n          beginComment();\r\n        }\r\n        attachDrawOver();\r\n      }\r\n    },\r\n    onClickAttachPin: comment => {\r\n      if (stateProps.pinIsAttached) {\r\n        if (\r\n          !stateProps.fileIsAttached &&\r\n          !stateProps.drawOverIsAttached &&\r\n          (!comment || comment.length === 0)\r\n        ) {\r\n          cancelComment();\r\n        } else {\r\n          unattachPin();\r\n        }\r\n      } else {\r\n        if (!stateProps.cancelEnabled) {\r\n          deselectComment();\r\n          beginComment();\r\n        }\r\n        attachPin();\r\n      }\r\n    },\r\n    onClickCancel: () => cancelComment()\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  ({ isCommenting, fileIsAttached, drawOverIsAttached, pinIsAttached }) => ({\r\n    fileIsAttached,\r\n    drawOverIsAttached,\r\n    pinIsAttached,\r\n    cancelEnabled: isCommenting,\r\n    submitEnabled: fileIsAttached || drawOverIsAttached || pinIsAttached\r\n  }),\r\n  {\r\n    deselectComment,\r\n    beginComment,\r\n    attachFile,\r\n    unattachFile,\r\n    attachDrawOver,\r\n    unattachDrawOver,\r\n    attachPin,\r\n    unattachPin,\r\n    cancelComment\r\n  },\r\n  mergeProps\r\n)(CommentInput);\r\n","import React from \"react\";\r\nimport \"./CommentsColumnHeader.css\";\r\n\r\nexport function CommentsColumnHeader({\r\n  headerText,\r\n  iconImage,\r\n  className,\r\n  ...props\r\n}) {\r\n  return (\r\n    <div\r\n      className={\r\n        \"comments-column-header-row\" + (className ? \" \" + className : \"\")\r\n      }\r\n      {...props}\r\n    >\r\n      {iconImage && (\r\n        <img\r\n          className=\"comments-column-header-icon-image\"\r\n          src={iconImage}\r\n          alt=\"Back icon\"\r\n        />\r\n      )}\r\n      <span className=\"comments-column-header-text\">{headerText}</span>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./ProfileIcon.css\";\r\n\r\nexport function ProfileIcon({ src, author }) {\r\n  return src ? (\r\n    <img className=\"profile-picture\" src={src} alt={author} />\r\n  ) : (\r\n    <div className=\"initials\">\r\n      {author\r\n        .split(\" \")\r\n        .filter((_, i, names) => i === 0 || i === names.length - 1)\r\n        .map(name => name[0].toLocaleUpperCase())\r\n        .join(\"\")}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Popup from \"reactjs-popup\";\r\nimport { ProfileIcon } from \"./ProfileIcon/ProfileIcon\";\r\nimport \"./TopRow.css\";\r\n\r\nexport function addDays(date, days) {\r\n  const result = new Date(date.valueOf());\r\n  result.setDate(date.getDate() + days);\r\n  return result;\r\n}\r\n\r\nfunction relativeDateString(dateInMillis) {\r\n  const today = new Date();\r\n  const date = new Date(dateInMillis);\r\n\r\n  if (today.toDateString() === date.toDateString()) {\r\n    return `${date.toLocaleTimeString(navigator.language, {\r\n      timeStyle: \"short\"\r\n    })} Today`;\r\n  } else if (today.toDateString() === addDays(date, 1).toDateString()) {\r\n    return \"Yesterday\";\r\n  } else {\r\n    return date.toLocaleDateString(navigator.language, { dateStyle: \"medium\" });\r\n  }\r\n}\r\n\r\nexport function TopRow({ profilePic, author, date, onResolve }) {\r\n  const [closeMenu, setCloseMenu] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (closeMenu) {\r\n      setCloseMenu(false);\r\n    }\r\n  }, [closeMenu, setCloseMenu]);\r\n\r\n  return (\r\n    <div className=\"comment-top-row\">\r\n      <ProfileIcon src={profilePic} author={author} />\r\n      <div className=\"comment-top-column\">\r\n        <div className=\"author-name\">{author}</div>\r\n        <div className=\"comment-date\">{relativeDateString(date)}</div>\r\n      </div>\r\n      <Popup\r\n        className=\"top-row-popup\"\r\n        trigger={\r\n          <button className=\"small-icon-button\">\r\n            <img src=\"assets/dots.svg\" alt=\"More options icon\" />\r\n          </button>\r\n        }\r\n        position=\"bottom right\"\r\n        on=\"click\"\r\n        closeOnDocumentClick\r\n        closeOnEscape\r\n        disabled={closeMenu}\r\n        arrow={false}\r\n      >\r\n        <div className=\"top-row-menu\">\r\n          <div className=\"top-row-menu-options-row\">\r\n            Options\r\n            <button className=\"small-icon-button\">\r\n              <img\r\n                src=\"assets/close.svg\"\r\n                alt=\"Close menu icon\"\r\n                onClick={() => setCloseMenu(true)}\r\n              />\r\n            </button>\r\n          </div>\r\n          <div\r\n            onClick={() => {\r\n              setCloseMenu(true);\r\n              onResolve();\r\n            }}\r\n          >\r\n            Resolve\r\n          </div>\r\n          <div onClick={() => setCloseMenu(true)}>Edit</div>\r\n          <div\r\n            onClick={() => {\r\n              setCloseMenu(true);\r\n              onResolve();\r\n            }}\r\n          >\r\n            Delete\r\n          </div>\r\n        </div>\r\n      </Popup>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./Comment.css\";\r\nimport { connect } from \"react-redux\";\r\nimport { TopRow } from \"./TopRow/TopRow\";\r\n\r\nfunction Comment({\r\n  comment: { text, drawOver, pin, ...comment },\r\n  selected,\r\n  onResolve,\r\n  children,\r\n  ...props\r\n}) {\r\n  return (\r\n    <div className={\"comment\" + (selected ? \" selected\" : \"\")} {...props}>\r\n      <div className=\"comment-content\">\r\n        <TopRow {...comment} onResolve={onResolve} />\r\n        <p className=\"comment-text\">{text}</p>\r\n        {children}\r\n      </div>\r\n      <div className=\"comment-flag-row\">\r\n        {drawOver && (\r\n          <img\r\n            className=\"comment-flag\"\r\n            src=\"assets/drawover-flag.svg\"\r\n            alt=\"Drawover flag\"\r\n          />\r\n        )}\r\n        {pin && (\r\n          <img\r\n            className=\"comment-flag\"\r\n            src=\"assets/pin-flag.svg\"\r\n            alt=\"Pin flag\"\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  ({ selectedCommentId }, { comment: { id } }) => ({\r\n    selected: id === selectedCommentId\r\n  }),\r\n  dispatch => ({})\r\n)(Comment);\r\n","import React from \"react\";\r\nimport \"./MainComment.css\";\r\nimport Comment from \"../Comment/Comment\";\r\nimport { connect } from \"react-redux\";\r\nimport { openThread, selectComment, cancelComment } from \"../../redux/actions\";\r\n\r\nfunction MainComment({\r\n  comment: { thread, ...comment },\r\n  onClickReply,\r\n  ...props\r\n}) {\r\n  function replyLabel(thread) {\r\n    if (thread && thread.length > 0) {\r\n      if (thread.length > 1) {\r\n        return `${thread.length} Replies`;\r\n      } else {\r\n        return \"1 Reply\";\r\n      }\r\n    } else {\r\n      return \"Reply\";\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Comment comment={comment} {...props}>\r\n      <button\r\n        className=\"reply-button\"\r\n        onClick={event => {\r\n          event.stopPropagation();\r\n          onClickReply();\r\n        }}\r\n      >\r\n        {replyLabel(thread)}\r\n      </button>\r\n    </Comment>\r\n  );\r\n}\r\n\r\nexport default connect(null, (dispatch, { comment }) => ({\r\n  onClickReply: () => {\r\n    dispatch(cancelComment());\r\n    dispatch(selectComment(comment));\r\n    dispatch(openThread(comment));\r\n  }\r\n}))(MainComment);\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { ConfirmResolve } from \"../../ConfirmResolve/ConfirmResolve\";\r\nimport {\r\n  addComment,\r\n  cancelComment,\r\n  deselectComment,\r\n  resolveComment,\r\n  selectComment\r\n} from \"../../redux/actions\";\r\nimport CommentInput from \"../CommentInput/CommentInput\";\r\nimport { CommentsColumnHeader } from \"../CommentsColumnHeader/CommentsColumnHeader\";\r\nimport MainComment from \"../MainComment/MainComment\";\r\nimport \"./MainThread.css\";\r\n\r\nfunction MainThread({\r\n  isCommenting,\r\n  comments,\r\n  onAddComment,\r\n  onClickComment,\r\n  onResolveComment,\r\n  ...props\r\n}) {\r\n  const [resolveCommentId, setResolveCommentId] = useState();\r\n\r\n  return (\r\n    <div id=\"comment-column\" {...props}>\r\n      <div id=\"input-column\">\r\n        <CommentsColumnHeader headerText=\"Comments\" />\r\n        <CommentInput pinAttachable onClickSubmit={onAddComment} />\r\n      </div>\r\n      <div className={\"scroll-column\" + (isCommenting ? \" focused\" : \"\")}>\r\n        {comments.map(comment => (\r\n          <MainComment\r\n            key={comment.id}\r\n            comment={comment}\r\n            onClick={() => onClickComment(comment)}\r\n            onResolve={() => setResolveCommentId(comment.id)}\r\n          />\r\n        ))}\r\n        {isCommenting && <div id=\"comment-vignette\"></div>}\r\n      </div>\r\n      <ConfirmResolve\r\n        isModalOpen={resolveCommentId}\r\n        onCancel={() => setResolveCommentId(null)}\r\n        onResolve={() => {\r\n          onResolveComment(comments.find(({ id }) => id === resolveCommentId));\r\n          setResolveCommentId(null);\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  ({ isCommenting, selectedCommentId, comments }) => ({\r\n    isCommenting,\r\n    selectedComment: comments.find(({ id }) => id === selectedCommentId),\r\n    comments\r\n  }),\r\n  dispatch => ({\r\n    onAddComment: comment => {\r\n      dispatch(addComment(comment));\r\n      dispatch(cancelComment());\r\n    },\r\n    selectComment: comment => dispatch(selectComment(comment)),\r\n    deselectComment: () => dispatch(deselectComment()),\r\n    resolveComment: comment => dispatch(resolveComment(comment))\r\n  }),\r\n  (\r\n    { selectedComment, ...stateProps },\r\n    { selectComment, deselectComment, resolveComment, ...dispatchProps },\r\n    ownProps\r\n  ) => ({\r\n    ...ownProps,\r\n    ...stateProps,\r\n    ...dispatchProps,\r\n    onClickComment: comment =>\r\n      comment !== selectedComment ? selectComment(comment) : deselectComment(),\r\n    onResolveComment: comment => {\r\n      if (comment === selectedComment) {\r\n        deselectComment();\r\n      }\r\n      resolveComment(comment);\r\n    }\r\n  })\r\n)(MainThread);\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { ConfirmResolve } from \"../../ConfirmResolve/ConfirmResolve\";\r\nimport {\r\n  addReply,\r\n  cancelComment,\r\n  closeThread,\r\n  deselectComment,\r\n  resolveComment,\r\n  resolveReply,\r\n  selectComment\r\n} from \"../../redux/actions\";\r\nimport Comment from \"../Comment/Comment\";\r\nimport CommentInput from \"../CommentInput/CommentInput\";\r\nimport { CommentsColumnHeader } from \"../CommentsColumnHeader/CommentsColumnHeader\";\r\nimport \"./Thread.css\";\r\n\r\nfunction Thread({\r\n  comment,\r\n  isCommenting,\r\n  onReturn,\r\n  onClickComment,\r\n  onAddReply,\r\n  onResolveComment,\r\n  ...props\r\n}) {\r\n  const [resolveCommentId, setResolveCommentId] = useState();\r\n\r\n  return comment ? (\r\n    <div id=\"thread-column\" {...props}>\r\n      <CommentsColumnHeader\r\n        className=\"thread-column-header\"\r\n        iconImage=\"assets/left-arrow.svg\"\r\n        headerText=\"Back to all comments\"\r\n        onClick={onReturn}\r\n      />\r\n      <Comment\r\n        comment={comment}\r\n        onClick={() => onClickComment(comment)}\r\n        onResolve={() => {}}\r\n      >\r\n        <CommentInput onClickSubmit={text => onAddReply(comment, text)} />\r\n      </Comment>\r\n      <div className=\"scroll-column\">\r\n        {comment &&\r\n          comment.thread.map(reply => (\r\n            <Comment\r\n              key={reply.id}\r\n              comment={reply}\r\n              onClick={() => onClickComment(reply)}\r\n              onResolve={() => setResolveCommentId(reply.id)}\r\n            />\r\n          ))}\r\n        {isCommenting && <div id=\"reply-vignette\"></div>}\r\n      </div>\r\n      <ConfirmResolve\r\n        isModalOpen={resolveCommentId}\r\n        onCancel={() => setResolveCommentId(null)}\r\n        onResolve={() => {\r\n          onResolveComment(\r\n            [comment, ...comment.thread].find(\r\n              ({ id }) => id === resolveCommentId\r\n            )\r\n          );\r\n          setResolveCommentId(null);\r\n        }}\r\n      />\r\n    </div>\r\n  ) : null;\r\n}\r\n\r\nfunction mergeProps(\r\n  { selectedComment, ...stateProps },\r\n  dispatchProps,\r\n  ownProps\r\n) {\r\n  const {\r\n    selectComment,\r\n    deselectComment,\r\n    resolveComment,\r\n    resolveReply,\r\n    ...restOfDispatchProps\r\n  } = dispatchProps;\r\n\r\n  return {\r\n    ...ownProps,\r\n    ...stateProps,\r\n    ...restOfDispatchProps,\r\n    onClickComment: comment =>\r\n      comment !== selectedComment ? selectComment(comment) : deselectComment(),\r\n    onResolveComment: comment => {\r\n      if (comment === selectedComment) {\r\n        deselectComment();\r\n      }\r\n      if (comment === ownProps.comment) {\r\n        resolveComment(comment);\r\n      } else {\r\n        resolveReply(ownProps.comment, comment);\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  ({ isCommenting, selectedCommentId, comments }) => ({\r\n    isCommenting,\r\n    selectedComment: comments\r\n      .flatMap(comment => [comment, ...comment.thread])\r\n      .find(({ id }) => id === selectedCommentId)\r\n  }),\r\n  dispatch => ({\r\n    onReturn: () => {\r\n      dispatch(cancelComment());\r\n      dispatch(closeThread());\r\n    },\r\n    selectComment: comment => dispatch(selectComment(comment)),\r\n    deselectComment: () => dispatch(deselectComment()),\r\n    resolveComment: comment => dispatch(resolveComment(comment)),\r\n    resolveReply: reply => dispatch(resolveReply(reply)),\r\n    onAddReply: (comment, text) => {\r\n      dispatch(addReply(comment, text));\r\n      dispatch(cancelComment());\r\n    }\r\n  }),\r\n  mergeProps\r\n)(Thread);\r\n","import React from \"react\";\r\nimport MainThread from \"./MainThread/MainThread\";\r\nimport Thread from \"./Thread/Thread\";\r\nimport \"./CommentsColumn.css\";\r\nimport { connect } from \"react-redux\";\r\n\r\nfunction CommentsColumn({ activeThread, ...props }) {\r\n  return (\r\n    <div id=\"comments-row\">\r\n      <MainThread\r\n        className={\r\n          \"main-thread\" + (activeThread ? \" main-thread-inactive\" : \"\")\r\n        }\r\n        {...props}\r\n      />\r\n      <Thread\r\n        className={\r\n          \"active-thread\" + (!activeThread ? \" active-thread-inactive\" : \"\")\r\n        }\r\n        comment={activeThread}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  ({ activeThreadId, comments }) => ({\r\n    activeThread: comments.find(({ id }) => id === activeThreadId)\r\n  }),\r\n  () => ({})\r\n)(CommentsColumn);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport \"./DrawCanvas.css\";\r\nimport { useRef } from \"react\";\r\nimport { HotKeys } from \"react-hotkeys\";\r\n\r\nfunction handleUndo(isPainting, setPainting, value, onChange) {\r\n  return () => {\r\n    if (isPainting) {\r\n      setPainting(false);\r\n    }\r\n    value = value.filter(line => line.length > 1);\r\n    if (value.length > 0) {\r\n      onChange && onChange(value.slice(0, value.length - 1));\r\n    }\r\n  };\r\n}\r\n\r\nfunction handleClick(setPainting, onChange, value, ref) {\r\n  return ({ nativeEvent }) => {\r\n    const { offsetX, offsetY } = nativeEvent;\r\n    setPainting(true);\r\n    onChange &&\r\n      onChange([\r\n        ...value,\r\n        [\r\n          {\r\n            x: offsetX / ref.current.clientWidth,\r\n            y: offsetY / ref.current.clientHeight\r\n          }\r\n        ]\r\n      ]);\r\n  };\r\n}\r\n\r\nfunction handleDrag(isPainting, value, onChange, ref) {\r\n  return ({ nativeEvent }) => {\r\n    if (isPainting) {\r\n      const { offsetX, offsetY } = nativeEvent;\r\n      if (value.length > 0) {\r\n        const currLine = value[value.length - 1];\r\n        onChange &&\r\n          onChange([\r\n            ...value.slice(0, value.length - 1),\r\n            [\r\n              ...currLine,\r\n              {\r\n                x: offsetX / ref.current.clientWidth,\r\n                y: offsetY / ref.current.clientHeight\r\n              }\r\n            ]\r\n          ]);\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nfunction convertTouchToMouse(handler) {\r\n  return ({ nativeEvent }) => {\r\n    const canvasRect = nativeEvent.target.getBoundingClientRect();\r\n    const touch = nativeEvent.targetTouches[0];\r\n    handler({\r\n      nativeEvent: {\r\n        offsetX: touch.pageX - canvasRect.left,\r\n        offsetY: touch.pageY - canvasRect.top\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nfunction paint(canvas, ctx, value, lineWidth, lineColor) {\r\n  if (ctx) {\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    for (const line of value) {\r\n      const [{ x, y }, ...rest] = line;\r\n\r\n      ctx.lineJoin = \"round\";\r\n      ctx.lineCap = \"round\";\r\n      ctx.lineWidth = lineWidth;\r\n      ctx.strokeStyle = lineColor;\r\n\r\n      ctx.beginPath();\r\n      ctx.moveTo(x * canvas.width, y * canvas.height);\r\n      for (const { x, y } of rest) {\r\n        ctx.lineTo(x * canvas.width, y * canvas.height);\r\n      }\r\n      ctx.stroke();\r\n    }\r\n  }\r\n}\r\n\r\nexport function DrawCanvas({\r\n  lineWidth = 3,\r\n  lineColor = \"black\",\r\n  value,\r\n  onChange,\r\n  ...props\r\n}) {\r\n  value = value || [];\r\n  const ref = useRef();\r\n  const width = 1024;\r\n  const height = 1024;\r\n  const [ctx, setContext] = useState();\r\n  const [isPainting, setPainting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!ctx) {\r\n      setContext(ref.current.getContext(\"2d\"));\r\n    }\r\n  }, [ref, ctx]);\r\n  useEffect(() => paint(ref.current, ctx, value, lineWidth, lineColor), [\r\n    ref,\r\n    ctx,\r\n    value,\r\n    lineWidth,\r\n    lineColor\r\n  ]);\r\n\r\n  return (\r\n    <HotKeys\r\n      allowChanges\r\n      className=\"draw-canvas-hotkeys\"\r\n      keyMap={{ undo: [\"command+z\", \"ctrl+z\", \"backspace\"] }}\r\n      handlers={{\r\n        undo: handleUndo(isPainting, setPainting, value, onChange)\r\n      }}\r\n    >\r\n      <canvas\r\n        ref={ref}\r\n        className=\"draw-canvas\"\r\n        width={width}\r\n        height={height}\r\n        onMouseDown={handleClick(setPainting, onChange, value, ref)}\r\n        onMouseMove={handleDrag(isPainting, value, onChange, ref)}\r\n        onMouseUp={() => setPainting(false)}\r\n        onTouchStart={convertTouchToMouse(\r\n          handleClick(setPainting, onChange, value, ref)\r\n        )}\r\n        onTouchMove={convertTouchToMouse(\r\n          handleDrag(isPainting, value, onChange, ref)\r\n        )}\r\n        onTouchEnd={() => setPainting(false)}\r\n        onTouchCancel={handleUndo(isPainting, setPainting, value, onChange)}\r\n        {...props}\r\n      />\r\n    </HotKeys>\r\n  );\r\n}\r\n","import { addDays } from \"./CommentsColumn/Comment/TopRow/TopRow\";\r\n\r\nexport default [\r\n  {\r\n    id: 1,\r\n    author: \"Palvi Mehta\",\r\n    date: new Date().getTime(),\r\n    text:\r\n      \"I dont like how the openings end before the bottom of the black canvas, what can we do about this?\",\r\n    camera: {\r\n      position: [3.6724893617668513, 0.10448181831762553, -0.10443959458119491],\r\n      focus: [0, 0, 0]\r\n    },\r\n    thread: []\r\n  },\r\n  {\r\n    id: 2,\r\n    author: \"Ed Lazowska\",\r\n    date: addDays(new Date(), -1).getTime(),\r\n    text:\r\n      \"I'm really proud of the lacing design here, do we think it will be too complicated?\",\r\n    camera: {\r\n      position: [-0.2391278466290959, 0.2413250726086689, 1.7599386342780603],\r\n      focus: [0, 0, 0]\r\n    },\r\n    thread: []\r\n  },\r\n  {\r\n    id: 3,\r\n    author: \"Kabir Shahani\",\r\n    date: addDays(new Date(), -2).getTime(),\r\n    text:\r\n      \"I love the differnent fonts, but make the nike and zoom closer together in size\",\r\n    drawOver:\r\n      \"NrDeCIA9wLgBgHQGYCsSBMB2AbKjO91sAacAT1kQBYAOOATgEZs4k40rVHHMBfYiNHjIU2RujSjxksaQrCqmenDgFUNTJhrYJ-QZRE16mTiiMnU9OQcWYG9dEmzYq49Iyp6oBpxkXa-LVxHawVMDBp0KiosWgZmLyFEJ0wUdxS0xgyUUOpMLJM4KjM4RjTsPgFvYSQ7WtY6xtYc8ht82qoikrKiSv0akxckDSohkedchFH6UdFaGhQqejEaTyqk5C0mcK2eWqNJ0dSUTAlGZRokZfpEnxoeZ2GH3HuaQ4qUE7OLq+wb9buLCuNG0rHoIJYVHecxBi2WjEu6Dg2FuNRB6IxmKsrQUuEKxToPQq6FRyXoSGYjnJlKuFJa8moeM6BNK5VOpOQxlM5m5XMOKHoDicLjcBTW-WopTsMylDE6PH5gsczlc6HSJg5zM+qy6ZmZJBx1G6bJ4n1OKE1cBBFIul3OVtW-MJJuO5s13GwdCYzC93Ew-LEyI0cDVylULndFPYrijiyyjADjCDdlDKhw4uq1D2ux2Rj2BoZUykyZD6DD6c1SLVSirWAcIcTJdT4YzGxizDS7ewnfcFUbnpTZbTEYBCgkDgF46nAqQ-eDzYro+o6A0Jgcq6WK7ehqLgYHpfLI4lUwpOlpNOpLjng8PrZs6i5D4sAuvB+Hd4UtQw5y-7nJ4VfBcj0zKZ5WlMC5VKAsbDjcFFAiKIYj6EDolQtD0OiflXDg8IV0QrBNUUMskGiU5yVI2cd2KICkHUTQNE1FBShiYpmKiJisn5Gi6K0ZC20WVwBQEsp6AErih3DWizHoviYNOFxRPkpYvnpGDuOk3jGO0IwCU9GZpPEw8pNXBilymMQ0FWCzhlGMpoIUNIJLUDTTOPUZOHGDzBk4f0qMcoyeNclDu3uc4Qu4ZYzEM4djJkzVPWcBgEpYZYNGiyTAtksIynsfImMFPKoT81h7gqckjApMsLTMxReWfHkSP5ErmCUYZqSqzVNCRJQutUYxTiap4yrayrRM1e5aA8Cbpo8VSFFmFxYSWFYMCQcbODYWgNqKVZKMLaJu0WhZloRVbxvyJRaAumYNAVKiFvmOEVscTUmGowVZrLN69psA6YWO+FLler4FJB5STEOP6jqe07XoWVIlnhuFtEh2JfSBdgSOq48OJY3H2NZVGTHR1hMeKDkmKQ1AiiwanOCJuImAxjhsZApj8jVdm3HZ9AGZJtgWYp7hflKLJllFor9qQxnmFJwWzJQDwCaV1ilb5+JmaxoXwNlGUeATe6rV+GZDsetaFfOGY2EtzgGyokbxH6+xHCyxBHJrUsPerQ4HbLTRndqCmsGRT5g+7NJ8h9irHf9pVA4VilaOUROrlYDwo-ap249dhAOAROgSPz1gYgz0bY6FHO0Caeoa8j+3o796UK4pmMkzjWMY1LmOm5dlvBNE6IRIE3n68z8ve4VrbaJ27atq7xuA8rxW8PYcRIlXn7PwbrPm4V9u29b6MDf232d4nnHRHBFRL7odg-nns-44v8EhwFSJlDfh-x6ftmdAqOg-5aGREQH2N4Yp0RRArZwok7J-EVqIe+9swEZWkpAnGHMJCqG5lgze1B6jqQ0GgtmhQSGdFIcfe8yDnKEIpj1U4fVepKG3CfKhuAIEUx1MUPUupHRILfCgmhCtrT2mEbaXBJ5WGxSIRsScsiJzyJAXwghOAKapUSmolKnpQH8OoSohWBUcoGPysYbRyjpEGBYBIEUIY5hJgkKYpybDUEchYPvI+HcHEBWcWZFgkQdBJj8e4K0I8WE6KcYI48YhuDRJiTEkJlCwlSJcWUGy1krJlElgksxyTIi0RWI4JwCJ4mfkkewnxQTAkBKIO4ChJTEllMiRIVAYgmlSAkJkup2TynLDLDoHp-TfKhK6ZEpOadRkp2xEMxxSSfFPBwC8Z4wxil4NKd4yJeM2KqxYp48BayQIuGJE4I4yojg7IEXo9ZM1JrXPuGc3R5jhDdlyoY4whi7nhIufs0Odhw5h0+OIny9S9kbHCmFMwEVwrvJmZEzR2hYXqKhQ0-Z3Yoi9h7B2AF+DplIpBZ6eIPp8WelqSsoFETkUwIQRS6Bc0SXDP2acI5hyDkMsRcCixqR0gfE5akTFqyyUgqAYAgBvRblKOxWyx5uTClSvyby0lnyQWXBwEGWoLBPTDFZfyixcKko6o0ZqhVFixEiLtBcA1DzEB-EcOGIUNqQhiq8Vqx5VK4GwNEssk829v45z+KCyKoVIqQyNtcB6sJzaRMFLbG21tBQ0tAsGv4oaFjhpAnYK0iw03HUzUGy4IbTZho5IOL2dYqwAs6LmxN+bk2FtXivZe680g5uNkmtANbfk-O+SHJteb-qtrMjrHgkFB0zHVkzOWWt+1VP8cE6dzDfpow1uO8mk7OZYNXRg0dssBYTuPBgrm663Cbs1su3dWQuVno5QUSGLaTpA0ncYvKzzFbXqrTDO9p7Lq3U-fkOd80b2AxTRsfI-5vwgb-B06gW1cKRGiGjRghbur9UQ71X9kHVjQfwsTeD-bkP0LoUiVDoF0MIVg1hhDaoKOUao4NUqrVt6syA5gvda6zg0ZauVTODGDCnGLbxyZalxUmRzmREiRFyJiYg0WbCxG8KkcLWwHAtrFPWsGTBaT8FZNIXk3+X8P5cIeuKHuecjiPyIFwnp0Dv4DPFn3EBUzCBwjSoKbKpwTpWS9FNCpeTlNaY+fCM+vyccVSig6N5mm-nwtcEVEKYLaoxTyeZScplknbKImREmWzgHuOMoZYlo57wOhdGdL0Ek-b9jbHK9mfjuJCssiJOyMrl4qSnipCl19t6MDIkLV2dFKKYgGfawBpEFqHM9dRR2VFA3XTfATf8XddUFuuaopW3tt77P1UfGYR89lGQm1W4DdbWzlZ42JVMdo+JjS9G6-jI7xRTuKDFEV9zFRutjG8sMbyhwMOkZliNkwQRAgBCiEoL7JHpbo26+uTQm4Nzki+4rH4PbuyFv3Ux7Bqmwg92FKqdw63Uf49UF9rHsXcco+5ZkDI7gvuOvojoLjwhL2U4vZkQ4-MyZcB4Cj5p0hudNJ21MNnHAOfCZkDztpaB+e0E0wusdWWGei9aS0iXrPpfE0XXLszCutdLf2jJmD4OGBc-F7z5XVE9eYcZkbpXJudc2DhTjx7BIrdi+t5L+3IWLs0Gd4rnnbuAbPXS8iEXiMTjI1D0sVn-vTrDYy8H8E4f48I2q9QZQdWXSiBR9YqxrgbFXioqny7FRTR-ZOJcRQpeSKpC0IcGLIo4u1fp5rhRcjxwAtrw7hvKPm-d7bwb2XmMS-d+nHD-Pfet0D678P4fbfBckS4HjofciZ-q-Z4rBfU+l+TEbw5lvu+R+Fm38q9VR+lVqq36URHK2FKFrVaflVR-z8iObabObqbZ3VKnVTncTEhp0bHjfipD-GdL-A-ZqYaL1AAz-KA8-FSJ-ENYTd-RAkAgwdmD5IIccP7JA6A7-c5dAgUTAwArA8-Aec4c3aISA4A7A0AkgnCMHCgypSgrfbgViX-DjDXBzLAxg7-Zgn-WjNg+goAypJg2KPAgeUrXdTgoQ7gkQ7QccRYcQt-QgpQ07eBDzabBHbDCQ5Qrgg-fWdQkRdbSQj-Jgi6M0GbVYAQog7gy-PbI6Sw5QpgmwpNewqglApEILOvdUFwnQtwgOEnAobwqQg-ZRTSftIw-xLfEIoKIDcI5A4QTsWfUwG-e-W-VVZESIovfQi4QwlI3I-nNIWQoSdTXCSfPfVvSIwomgmTUoxfffFA7dUwHgkqBQoDCvcvLQSvUvLfBojnFgyIFHDo9osvKvQjNAC3fmTQ1NWxXPHPbPbo8Y9XSY1okPJPJGCPb-OfRWWaMApQFHFYsPJPbounKojTL3ftCnc9JnLfToXA2QkvFjAnDHN2G43RdAv7GHaHKHNccRWCMgpCQ-dyD7QEzya40+ceQ7G7SElQtPNQsw7rNFcbPrNUa47+EnFo7jMhTE1QLEp43OVQzIswhHeTHMSrHYZPPE+rTzc0c4BLY5HLE5LfIXLYvon0MLKmPzKLb-JkpooaM43dSzczMDD1T4bk7YoaeTO1BTK1BTRk6kpw5wBDPjWsEHLkuU2bUYP7IgcGLUxSIgONT4fvUUw-JLXLOk3EmzYzIyQtCzHTQUyTUQBeDw1Ua079HgG6H9LfaGDrYbdEhnF5R9IxFQr0obYBa0g9cM4U4MgPHQGtPWAdcCT0x6b00M-tBhPDJDK0RMpaEMmM1M9tEOCOLtb-KM6PFM3dBoCs2uBoLMqPNLXM8s9NRQFQLNZsmst9Tres-ZSNGNK2C-USNs5MzskFf1CFcFMFAcnM30y1MDG0vTCc6MqchAPSXSHSMwPSfUksusxcz0AuVwEEYufOec0soc7VdRZKXVCYYs8AsefIFxBYBERWe8p8xtK8v-MuW8nxGVIpPJb8z06898pY7VQlX0AlckhBN87uQCx5QVEVYBf+IM-8yClxeZOZR4e4eZP8iCxuKCy1XMCrEk0Y2zcVV-AVE0sin4oirxEi9lIdeMhgT0y03Zaix5V1SleBalBi1ZZiy1PFb0Xij0UVA-SipilxJEibHrCixilBbipchZFC9CtCzioFGSs8vVc8sC4S6SlxMckcsFQSlAzS5yFStit1di80wypxYy1JFJdJNAMCn5DLKSn1B9f0t5b-BypsJyFxOkvLZlLfDywy7yoEt7QE+ywPQKnxWY6Y7Pbgfy8KpylxVCuStC4UgKhK2ZMYggTK3ARYOKozKhRK4HIHfwYIfUtKgq2ZA+eMdxWK9y+KiqxpBtNeJEetVK+qnRFxH3Lq3Kuq-Kjq8pNHCMsq9qhcTqqAyglQ8q-qyJb8pzH8yIfy8w5-DPHxGy2ySyda+0tUitWw5JEWYWcWZgxahHdUw6ZJWJC67gVKpapHFxC8+FFKc07a5akbVIk-NIrRdym6q-O6txP6ra763anxUWfasWFgcQY6uAn6-Rd+dgF+D+cEH45626-RdStG0Y5G6GnGWoqcfIzGoGnGBqLbDbDGwGhaDhZctc1c7SSG+UlawmwQxmvGsms6hWfDNMxDUmk6na8mtm6UyUm1Wm06+m4hHEsWyalmkWmRZjGWziL67ml6imY-N62-AGhWlGnGLPaK2xIWnm1mzWl3Q2pGyWkbbULUbhLhXhA-fG3mi+EU+2h20QXWxWveZq2tJq429WrGtmS282zhJ2+WqGgmn23zSLPzZ2jWtmYEUEaOoEQUCO72mRQufc5O3c66r24OpOrIVOCZNONWoO22tmP5Qs9tCWjOwumRRE3rHsBOzOtw5ncnXHWuiulA4dCCOMsugu-WtmFWSEtiZu7umRA68GsGiWAeqWlAp9J9Tuum02h4+egaQO2eimMO1e+mJe4Wue3uzZDiMqk216AM15Fy-O5emqL4j4tcMscekbeYOOiEMECEa+9aaeKeTaXaJ+mqK5L+2aD+tyRhDM-DX+lCEYzowY1ILmruiesIYiUiGBiTIBtsTNDNZs5Bmeze+KNSzBp6-emqZLPBxe62nBtyP1EhqKDevWqBxkLyYE97bB8uwemwNJda6ygOwh+hyh8yEGw60etBihm+qm-SbSQRuhyB-hpSXU0Gc0BBtTfuYSIok+9Bmqdi1i6lZgaRhyHezRuWth0RwiL9d0t0q6T23RmqMTUTETCidRyDDCGxhRvhwiHsqNbsqx0CIeQeeRtR8hl2tydu3xqCFxnyAUoJgJp8RbF8LxyOtsF+3aN+7aPe9hm+lrc8M8S8Ox7xlCRxzJu2HR0+tyUO9kyLYx3JlCDfHvAJ47Cp4oIpxRvJqUpTaU3h9JtsZU+sasVpgJouVOg8kEDpjxvp5YDp96N6NID6QzDpjuaq-eDpmYuxaKrakarymqB0G0ZZk1eZvq0apZ0hbEnZiGXqxyhqlCOG2Gt+IcfIiyqSGSzoXOm5hCrC-qHCqYFQFcJYZ51YMMLATCtgpCsyWOh+mO8ENKV8757CjkK4DbCF+0zcjsxc0GuFgZ4sx09vcQMFprZJ5rMoT0g5xJVFsZHO7O5OLFzyq035zEMl9EDS7FmiMFzyYK6h+0gUcfI0mlu+gF++hlm2hU0l5h2y1JDllmkbJKoV14Rk0UlkwV3czpvcguUVzYnk0qMFkkpVg4LkuVsU0qPkkCWoS+2HFcaHc0sV3g1k3597Wl8YfI-E0w2AmS3TGcsDa4nMg5xVwx-Rq6BEFE4nTw2F66N1100Y2wPwr1sFymoRlc-s7-GEgkr4YN6mkN9c64wvK1hrY8YUe6+66EsEnuezeknNlwc0jyG852bN4IEqwHYIH44osHLAbfOa2tlaa40g04zDGt1l1toobovgzNsF4msJsC1grt35hPNYxPfIpwOQytlcbt63Y3KQI48dxt6DbtpsxspBxQboxo9V9jbt-AHKndwgUdhY2XR5rgZ8h8s9lGDYw9rdY9jk299tjY1feV2F15kMd5t59Yg-Ho5k3g59kBoYyvfIlcY434jTMF-98DnADIpN8w7NnluDiySI37JdVAMDphtDzF7-KInOcxuBix2qSIwNjvbD2B8TPDvZ3Q2e+YMDqVmjsCvQwkgw6jlO6Vg8uj9Pa149v2rjooH47OlyYDmIMDnhbj9e3Qzd-8sF-F8ZAl1gJg8Tt8yT5OGTm54gkD77bNqTzTwlnAk49TxTvFpT8Zc-V4yowVrTgz2TnAkz44szwz8zn49gG27D+z5T8-ftiA35lzoznA9z--TzuzgLyz0A0RpYfT257z4Lyjm1rznOrfML5T1z7-eL6TiLmwK+Q0uVjTwLlT-PRI+fZL+zmvaMqloT324TnjmvMfTWQVkTs2ir0fGXJlpwJjyV5j84Srxr6rsD6J2eGJjrtXDLmrsxkj8xlLGYTr8dIbsj3Dsbqryb1Dta9DuNTcbHD3LUBbjapbmvZUTwx3GtiDtoyD-PHboj9b35g7sByXZF+vC7MDj5t919j9tLk7tbroO799+7p7hQa79UM7lNu9gpsbl7m7v7rVx88H89x8q74H37t7wdyHhHi9-aH7vb7drAXd9H-d7b1bkHuH-7vd7KrH47nH2Hk9MH5dlsldmvJ7Sk1IQV5BldlBtd-PGn9PeninhnrNanyN0w9n1d-nyPdsmPIPJd-npn3E2gfwhvTVjYVADn+XiX93XHp3QdhX8X1nJtn7L0UX8X9Xs3TXvvHXxnqns3VXJD9guXsXk33XM3-mI3ynrns3FfUUvgAAXVd6AA\",\r\n    camera: {\r\n      position: [\r\n        1.2556252511652628,\r\n        -1.8845128318655633,\r\n        -0.006335531414734807\r\n      ],\r\n      focus: [1.2637327202535016, 0, -0.09982552431336995]\r\n    },\r\n    thread: []\r\n  }\r\n];\r\n","import LZString from \"lz-string\";\r\nimport { createStore } from \"redux\";\r\nimport comments from \"../comments\";\r\nimport {\r\n  ADD_COMMENT,\r\n  ADD_REPLY,\r\n  ATTACH_DRAW_OVER,\r\n  ATTACH_FILE,\r\n  ATTACH_PIN,\r\n  BEGIN_COMMENT,\r\n  CANCEL_COMMENT,\r\n  CHANGE_CAMERA,\r\n  CLOSE_THREAD,\r\n  DESELECT_COMMENT,\r\n  OPEN_THREAD,\r\n  RESOLVE_COMMENT,\r\n  RESOLVE_REPLY,\r\n  SELECT_COMMENT,\r\n  UNATTACH_DRAW_OVER,\r\n  UNATTACH_FILE,\r\n  UNATTACH_PIN,\r\n  UPDATE_DRAWING\r\n} from \"./actions\";\r\n\r\nexport const CURSOR = {\r\n  DEFAULT: \"pointer\",\r\n  DRAWOVER: \"drawover\",\r\n  PIN: \"pin\"\r\n};\r\n\r\nexport const INITIAL_CAMERA_POSITION = [0, 2, 4];\r\n\r\nconst initialState = {\r\n  cursor: CURSOR.DEFAULT,\r\n  cameraPosition: { position: INITIAL_CAMERA_POSITION, focus: [0, 0, 0] },\r\n  isCommenting: false,\r\n  fileIsAttached: false,\r\n  drawOverIsAttached: false,\r\n  pinIsAttached: false,\r\n  maxCommentId: 3,\r\n  comments: comments\r\n};\r\n\r\nfunction rootReducer(state = initialState, { type, data }) {\r\n  function cameraPositionEquals(camera1, camera2) {\r\n    return (\r\n      camera1 === camera2 ||\r\n      (camera1 &&\r\n        camera2 &&\r\n        camera1.position.every(\r\n          (p, i) => Math.abs(p - camera2.position[i]) < 1e-10\r\n        ) &&\r\n        camera1.focus.every((f, i) => Math.abs(f - camera2.focus[i]) < 1e-10))\r\n    );\r\n  }\r\n\r\n  switch (type) {\r\n    case CHANGE_CAMERA:\r\n      const selectedComment = state.comments.find(\r\n        ({ id }) => id === state.selectedCommentId\r\n      );\r\n      if (\r\n        selectedComment &&\r\n        !cameraPositionEquals(selectedComment.camera, data)\r\n      ) {\r\n        return {\r\n          ...state,\r\n          cameraPosition: data,\r\n          selectedCommentId: null,\r\n          drawing: null\r\n        };\r\n      }\r\n      return { ...state, cameraPosition: data };\r\n    case SELECT_COMMENT:\r\n      return {\r\n        ...state,\r\n        selectedCommentId: data.id,\r\n        drawing:\r\n          data.drawOver &&\r\n          JSON.parse(LZString.decompressFromEncodedURIComponent(data.drawOver))\r\n      };\r\n    case DESELECT_COMMENT:\r\n      return { ...state, selectedCommentId: null, drawing: null };\r\n    case RESOLVE_COMMENT:\r\n      return {\r\n        ...state,\r\n        comments: state.comments.filter(({ id }) => id !== data.id)\r\n      };\r\n    case RESOLVE_REPLY:\r\n      return {\r\n        ...state,\r\n        comments: state.comments.map(comment =>\r\n          comment.id === data.comment.id\r\n            ? {\r\n                ...comment,\r\n                thread: comment.thread.filter(({ id }) => id !== data.reply.id)\r\n              }\r\n            : comment\r\n        )\r\n      };\r\n    case BEGIN_COMMENT:\r\n      return { ...state, isCommenting: true };\r\n    case ATTACH_FILE:\r\n      return { ...state, fileIsAttached: true };\r\n    case UNATTACH_FILE:\r\n      return { ...state, fileIsAttached: false, attachedFile: null };\r\n    case ATTACH_DRAW_OVER:\r\n      return { ...state, drawOverIsAttached: true, cursor: CURSOR.DRAWOVER };\r\n    case UNATTACH_DRAW_OVER:\r\n      return {\r\n        ...state,\r\n        drawOverIsAttached: false,\r\n        drawing: null,\r\n        cursor: CURSOR.DEFAULT\r\n      };\r\n    case ATTACH_PIN:\r\n      return { ...state, pinIsAttached: true, cursor: CURSOR.PIN };\r\n    case UNATTACH_PIN:\r\n      return {\r\n        ...state,\r\n        pinIsAttached: false,\r\n        attachedPin: null,\r\n        cursor: CURSOR.DEFAULT\r\n      };\r\n    case CANCEL_COMMENT:\r\n      return {\r\n        ...state,\r\n        isCommenting: false,\r\n        fileIsAttached: false,\r\n        attachedFile: null,\r\n        drawOverIsAttached: false,\r\n        drawing: null,\r\n        pinIsAttached: false,\r\n        pin: null,\r\n        cursor: CURSOR.DEFAULT\r\n      };\r\n    case ADD_COMMENT:\r\n      return {\r\n        ...state,\r\n        maxCommentId: 1 + state.maxCommentId,\r\n        comments: [\r\n          {\r\n            id: 1 + state.maxCommentId,\r\n            author: \"Greg Gottesman\",\r\n            date: new Date().getTime(),\r\n            text: data,\r\n            file: state.file,\r\n            drawOver: LZString.compressToEncodedURIComponent(\r\n              JSON.stringify(state.drawing)\r\n            ),\r\n            pin: state.pin,\r\n            camera: state.cameraPosition,\r\n            thread: []\r\n          },\r\n          ...state.comments\r\n        ]\r\n      };\r\n    case ADD_REPLY:\r\n      return {\r\n        ...state,\r\n        maxCommentId: 1 + state.maxCommentId,\r\n        comments: state.comments.map(comment =>\r\n          comment.id === data.comment.id\r\n            ? {\r\n                ...comment,\r\n                thread: [\r\n                  {\r\n                    id: 1 + state.maxCommentId,\r\n                    author: \"Greg Gottesman\",\r\n                    date: new Date().getTime(),\r\n                    text: data.text,\r\n                    file: state.file,\r\n                    drawOver: LZString.compressToEncodedURIComponent(\r\n                      JSON.stringify(state.drawing)\r\n                    )\r\n                  },\r\n                  ...comment.thread\r\n                ]\r\n              }\r\n            : comment\r\n        )\r\n      };\r\n    case OPEN_THREAD:\r\n      return { ...state, activeThreadId: data.id };\r\n    case CLOSE_THREAD:\r\n      return { ...state, activeThreadId: null };\r\n    case UPDATE_DRAWING:\r\n      return { ...state, drawing: data };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default createStore(rootReducer);\r\n","import React from \"react\";\r\nimport { DrawCanvas } from \"../DrawCanvas/DrawCanvas\";\r\nimport \"./DrawOver.css\";\r\nimport { connect } from \"react-redux\";\r\nimport { CURSOR } from \"../redux/store\";\r\nimport { updateDrawing } from \"../redux/actions\";\r\n\r\nfunction DrawOver({ interactive, drawing, onChange, children, ...props }) {\r\n  return (\r\n    <div id=\"sketch-container\" {...props}>\r\n      {children}\r\n      <div id=\"sketch-canvas\" className={!interactive ? \"static\" : \"\"}>\r\n        <DrawCanvas\r\n          lineWidth={2}\r\n          lineColor=\"#ff0035\"\r\n          value={drawing}\r\n          onChange={onChange}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  ({ cursor, drawing }) => ({\r\n    interactive: cursor === CURSOR.DRAWOVER,\r\n    drawing\r\n  }),\r\n  dispatch => ({ onChange: drawing => dispatch(updateDrawing(drawing)) })\r\n)(DrawOver);\r\n","import React from \"react\";\r\nimport \"./Header.css\";\r\n\r\nclass Header extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"head\">\r\n        <div className=\"greeting-row\">\r\n          <span className=\"greeting\">Welcome Greg!</span>\r\n        </div>\r\n        <div className=\"button-row\">\r\n          <div className=\"buttons\">\r\n            <button\r\n              className=\"share\"\r\n              onClick={() => alert(\"share link copied\")}\r\n            >\r\n              <span className=\"textShare\">Share</span>\r\n            </button>\r\n            <button\r\n              className=\"AR\"\r\n              onClick={() => alert(\"more features to come\")}\r\n            >\r\n              <span className=\"textAR\">AR</span>\r\n            </button>\r\n          </div>\r\n          <img\r\n            className=\"profile\"\r\n            alt=\"Greg\"\r\n            src=\"https://assets.website-files.com/5d3152346d95065922960b3a/5db769036b1dff3418bffd20_Greg.jpg\"\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Header;\r\n","import React, { Suspense, useRef, useEffect } from \"react\";\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\nimport { Canvas, useThree, extend, useLoader } from \"react-three-fiber\";\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\r\nimport { Box3, Vector3, Color, sRGBEncoding } from \"three\";\r\nimport { connect } from \"react-redux\";\r\nimport { changeCamera } from \"./redux/actions\";\r\nimport { INITIAL_CAMERA_POSITION } from \"./redux/store\";\r\n\r\nextend({ OrbitControls });\r\n\r\nfunction Model({ path, ...props }) {\r\n  const gltf = useLoader(GLTFLoader, path);\r\n\r\n  useEffect(() => {\r\n    var mroot = gltf.scene;\r\n\r\n    //Rescale the object to normalized space\r\n    var bbox = new Box3().setFromObject(mroot);\r\n    mroot.scale.multiplyScalar(\r\n      5 / Math.max(...bbox.getSize(new Vector3()).toArray())\r\n    );\r\n\r\n    //Centering Object\r\n    bbox.setFromObject(mroot);\r\n    mroot.position.copy(bbox.getCenter(new Vector3())).multiplyScalar(-1);\r\n  }, [gltf]);\r\n\r\n  return <primitive object={gltf.scene} {...props} />;\r\n}\r\n\r\nfunction Controls({ cameraPosition, onOrbitChange, ...props }) {\r\n  const controlsRef = useRef();\r\n  useEffect(() => {\r\n    const controls = controlsRef.current;\r\n\r\n    if (cameraPosition) {\r\n      const { position, focus } = cameraPosition;\r\n      controls.object.position.set(...position);\r\n      controls.target.set(...focus);\r\n    }\r\n\r\n    controls.addEventListener(\"change\", onOrbitChange);\r\n    controls.update();\r\n\r\n    return () => controls.removeEventListener(\"change\", onOrbitChange);\r\n  }, [cameraPosition, controlsRef, onOrbitChange]);\r\n\r\n  const {\r\n    camera,\r\n    gl: { domElement }\r\n  } = useThree();\r\n  return (\r\n    <orbitControls ref={controlsRef} args={[camera, domElement]} {...props} />\r\n  );\r\n}\r\n\r\nfunction ModelRenderer({ cameraPosition, onOrbitChange, ...props }) {\r\n  return (\r\n    <Canvas\r\n      camera={{ fov: 60, near: 1, position: INITIAL_CAMERA_POSITION }}\r\n      onCreated={({ gl, scene }) => {\r\n        gl.outputEncoding = sRGBEncoding;\r\n        scene.background = new Color(0xfafafa);\r\n      }}\r\n      {...props}\r\n    >\r\n      <Controls\r\n        cameraPosition={cameraPosition}\r\n        minDistance={1}\r\n        maxDistance={50}\r\n        onOrbitChange={onOrbitChange}\r\n      />\r\n      <ambientLight />\r\n      <Suspense fallback={null}>\r\n        <Model path=\"models/gltf/nike_shoe/scene.gltf\" />\r\n      </Suspense>\r\n    </Canvas>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  ({ comments, selectedCommentId }) => ({\r\n    cameraPosition: comments.reduce(\r\n      (acc, comment) =>\r\n        comment.id === selectedCommentId ? comment.camera : acc,\r\n      null\r\n    )\r\n  }),\r\n  dispatch => ({\r\n    onOrbitChange: ({\r\n      target: {\r\n        object: { position },\r\n        target: focus\r\n      }\r\n    }) =>\r\n      dispatch(\r\n        changeCamera({ position: position.toArray(), focus: focus.toArray() })\r\n      )\r\n  })\r\n)(ModelRenderer);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider, connect } from \"react-redux\";\r\nimport CommentsColumn from \"./CommentsColumn/CommentsColumn\";\r\nimport DrawOver from \"./DrawOver/DrawOver\";\r\nimport Header from \"./Header/Header\";\r\nimport \"./index.css\";\r\nimport ModelRenderer from \"./ModelRenderer\";\r\nimport store from \"./redux/store\";\r\n\r\nfunction MainPage({ cursor }) {\r\n  return (\r\n    <div id=\"app-container\" className={cursor}>\r\n      <Header />\r\n      <div id=\"main-area\">\r\n        {/* <div id=\"variations-column\"></div> */}\r\n        <DrawOver className=\"draw-over\">\r\n          <ModelRenderer className=\"renderer\" />\r\n        </DrawOver>\r\n        <CommentsColumn />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst WrappedMainPage = connect(\r\n  ({ cursor }) => ({ cursor }),\r\n  () => ({})\r\n)(MainPage);\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <WrappedMainPage />\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}