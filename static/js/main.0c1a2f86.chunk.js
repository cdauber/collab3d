(this.webpackJsonpcollab3d=this.webpackJsonpcollab3d||[]).push([[0],{174:function(e,t,n){},175:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},189:function(e,t,n){},190:function(e,t,n){},191:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(4),o=n(0),r=n.n(o),i=n(12),s=n.n(i),l=n(9),m=n(6);n(84),n(85);function u(e){var t=e.isModalOpen,n=e.onCancel,a=e.onResolve,o=Object(c.a)(e,["isModalOpen","onCancel","onResolve"]);return r.a.createElement("div",{id:"modal",className:t?"":"hide",onClick:n},r.a.createElement("div",Object.assign({id:"modal-dialog",onClick:function(e){return e.stopPropagation()}},o),r.a.createElement("span",{id:"modal-warning"},"Are you sure you want to resolve?"),r.a.createElement("div",{id:"modal-actions"},r.a.createElement("span",{id:"modal-cancel",onClick:function(e){e.stopPropagation(),n()}},"Cancel"),r.a.createElement("span",{id:"modal-submit",onClick:function(e){e.stopPropagation(),a()}},"Submit"))))}function d(e){return{type:"MOVE_CAMERA",data:e}}function f(e){return{type:"SELECT_COMMENT",data:e}}function p(){return{type:"DESELECT_COMMENT"}}function v(){return{type:"UNATTACH_DRAW_OVER"}}function b(){return{type:"UNATTACH_PIN"}}function h(){return{type:"CANCEL_COMMENT"}}function E(e){return{type:"RESOLVE_COMMENT",data:e}}var C=n(66),g=n.n(C),O=n(67);n(90);var w=Object(l.b)((function(e){var t=e.isCommenting,n=e.fileIsAttached,a=e.file,c=e.drawOverIsAttached,o=e.drawing,r=e.pinIsAttached,i=e.pin;return{fileIsAttached:n,drawOverIsAttached:c,pinIsAttached:r,cancelEnabled:t,submitEnabled:n&&a||c&&o||r&&i,selectedCommentId:e.selectedCommentId}}),{deselectComment:p,beginComment:function(){return{type:"BEGIN_COMMENT"}},attachFile:function(){return{type:"ATTACH_FILE"}},unattachFile:function(){return{type:"UNATTACH_FILE"}},attachDrawOver:function(){return{type:"ATTACH_DRAW_OVER"}},unattachDrawOver:v,attachPin:function(){return{type:"ATTACH_PIN"}},unattachPin:b,cancelComment:h},(function(e,t,n){var o=e.selectedCommentId,r=Object(c.a)(e,["selectedCommentId"]),i=t.deselectComment,s=t.beginComment,l=t.attachFile,m=t.unattachFile,u=t.attachDrawOver,d=t.unattachDrawOver,f=t.attachPin,p=t.unattachPin,v=t.cancelComment;return Object(a.a)({},n,{},r,{onFocusTextArea:function(){r.isCommenting||(o&&i(),s())},onBlurTextArea:function(e){return!r.fileIsAttached&&!r.drawOverIsAttached&&!r.pinIsAttached&&(!e||0===e.length)&&v()},onClickAttachFile:function(e){r.fileIsAttached?r.drawOverIsAttached||r.pinIsAttached||e&&0!==e.length?m():v():(r.cancelEnabled||(i(),s()),l())},onClickAttachDrawOver:function(e){r.drawOverIsAttached?r.fileIsAttached||r.pinIsAttached||e&&0!==e.length?d():v():(r.cancelEnabled||(i(),s()),u())},onClickAttachPin:function(e){r.pinIsAttached?r.fileIsAttached||r.drawOverIsAttached||e&&0!==e.length?p():v():(r.cancelEnabled||(i(),s()),f())},onClickCancel:function(){return v()}})}))((function(e){var t=e.pinAttachable,n=void 0!==t&&t,a=(e.mainThread,e.fileIsAttached),i=e.drawOverIsAttached,s=e.pinIsAttached,l=e.cancelEnabled,u=e.submitEnabled,d=e.onFocusTextArea,f=e.onBlurTextArea,p=e.onClickAttachFile,v=e.onClickAttachDrawOver,b=e.onClickAttachPin,h=e.onClickCancel,E=e.onClickSubmit,C=void 0===E?function(){}:E,w=Object(c.a)(e,["pinAttachable","mainThread","fileIsAttached","drawOverIsAttached","pinIsAttached","cancelEnabled","submitEnabled","onFocusTextArea","onBlurTextArea","onClickAttachFile","onClickAttachDrawOver","onClickAttachPin","onClickCancel","onClickSubmit"]),j=Object(o.useState)(),A=Object(m.a)(j,2),N=A[0],k=A[1];return r.a.createElement("div",Object.assign({className:"comment-input-column"},w),r.a.createElement(g.a,{className:"comment-input-text-area",placeholder:"Add a comment",value:N,onChange:function(e){return k(e.target.value)},onFocus:d,onBlur:function(){return f(N)}}),r.a.createElement("div",{className:"comment-input-actions-row"},r.a.createElement("div",{className:"comment-input-icon-actions"},r.a.createElement("button",{className:"comment-input-icon-action-button"+(a?" active":""),"data-tip":"Attach file",onClick:function(){return p(N)}},r.a.createElement("img",{src:"assets/clip.svg",alt:"File attachment icon"})),r.a.createElement("button",{className:"comment-input-icon-action-button"+(i?" active":""),"data-tip":"Drawover",onClick:function(){return v(N)}},r.a.createElement("img",{src:"assets/pencil.svg",alt:"File attachment icon"})),n&&r.a.createElement("button",{className:"comment-input-icon-action-button"+(s?" active":""),"data-tip":"Pin",onClick:function(){return b(N)}},r.a.createElement("img",{src:"assets/pin.svg",alt:"File attachment icon"})),r.a.createElement(O.a,{className:"comment-input-tooltip",place:"bottom",effect:"solid"})),r.a.createElement("div",{className:"comment-input-text-actions"},r.a.createElement("button",{className:"comment-input-text-action-button comment-input-cancel-button",disabled:!(l||N&&N.length>0),onClick:function(){k(""),h()}},"Cancel"),r.a.createElement("button",{className:"comment-input-text-action-button comment-input-submit-button",disabled:!(u||N&&N.length>0),onClick:function(){C(N),k("")}},"Submit"))))})),j=n(13),A=n(68),N=n(5),k=n(8),y=n(69),T=n(31),_=n.n(T),I=n(25),P=n(193),R=[{name:"Greg Gottesman",profilePicture:"https://assets.website-files.com/5d3152346d95065922960b3a/5db769036b1dff3418bffd20_Greg.jpg"},{name:"Ed Lazowska",profilePicture:"https://upload.wikimedia.org/wikipedia/en/thumb/9/9b/Edward_D_Lazowska.jpg/1200px-Edward_D_Lazowska.jpg"},{name:"Peter Denton",profilePicture:"https://cdn.geekwire.com/wp-content/uploads/2017/03/Peter-Denton-300x300.jpg"},{name:"Gaurav Oberoi",profilePicture:"https://media-exp1.licdn.com/dms/image/C4E03AQEwMhRAnT--iA/profile-displayphoto-shrink_200_200/0?e=1585785600&v=beta&t=pZjeE2f7NZ2e_Tcftcdon5XXDlfozRSIVRmFzaQqRck"},{name:"David Zager",profilePicture:"https://pbs.twimg.com/profile_images/934197736378793985/Ol1kYt_d_400x400.jpg"},{name:"Ben Gilbert",profilePicture:"http://benjamingilbert.net/wp-content/uploads/2009/10/Ben-PSL-Headshot.jpg"},{name:"Xiao Wang",profilePicture:"https://assets-wp.boundless.com/uploads/2017/12/BoundlessXiao.jpg"},{name:"Aaron Easterly",profilePicture:"https://cdn.geekwire.com/wp-content/uploads/2017/07/Aaron-Headshot.jpg"},{name:"John Cook",profilePicture:"https://cdn.geekwire.com/wp-content/uploads/2019/12/John-square-300x300.jpg"},{name:"Glenn Kelman",profilePicture:"https://miro.medium.com/fit/c/256/256/0*wPsOMUjFt95aKYMy.jpg"},{name:"Kelly Wright",profilePicture:"https://cdn.geekwire.com/wp-content/uploads/2016/01/wright-kelly-247x300.png"},{name:"Palvi Mehta",profilePicture:"https://res-5.cloudinary.com/crunchbase-production/image/upload/c_thumb,h_256,w_256,f_auto,g_faces,z_0.7,q_auto:eco/v1401363391/fn99pnvtsrgeo2ze1blm.png"},{name:"Kabir Shahani",profilePicture:"https://www.adweek.com/wp-content/uploads/2018/11/kabir.jpg"},{name:"Matt McIlwain",profilePicture:"https://ga-core.s3.amazonaws.com/production/uploads/instructor/image/3032/thumb_Matt_McIlwain.png"},{name:"Jeana Kim",profilePicture:"https://www.wsgr.com/images/content/6/2/v1/6250/Kim_Jeana%2020160209%20HI_email.jpg"},{name:"Steve Singh",profilePicture:"https://media-exp1.licdn.com/dms/image/C5103AQES2HWYu834NA/profile-displayphoto-shrink_200_200/0?e=1587600000&v=beta&t=e85cbE830lKu3L4wbpIqVu83o5byIKrhQx8pPpbpPbQ"},{name:"Dan Levitan",profilePicture:"https://media-exp1.licdn.com/dms/image/C4E03AQEz4UJyxd_X2A/profile-displayphoto-shrink_200_200/0?e=1585785600&v=beta&t=EL_ECN6D5drKOXq77lWBIdtcGOBeRH5DKglaRGUCR3c"}],M="pointer",S="drawover",D="pin",L=R[Math.floor(Math.random()*R.length)],V={cursor:M,cameraPosition:{position:[0,1,4],focus:[0,0,0]},isCommenting:!1,fileIsAttached:!1,drawOverIsAttached:!1,pinIsAttached:!1,showPins:!0,activeVariationIds:{1:!0},variations:[{id:1,name:"Original",thumbnail:"assets/nike_shoe_thumbnail.png",model:"models/gltf/nike_shoe/scene.gltf"},{id:2,name:"Magenta",thumbnail:"assets/nike_shoe_pink_thumbnail.png",model:"models/gltf/nike_shoe_pink/scene.gltf"},{id:3,name:"Turquoise",thumbnail:"assets/nike_shoe_turquoise_thumbnail.png",model:"models/gltf/nike_shoe_turquoise/scene.gltf"},{id:4,name:"Black",thumbnail:"assets/nike_shoe_black_thumbnail.png",model:"models/gltf/nike_shoe_black/scene.gltf"}],comments:[]};function x(e,t){return e===t||e&&t&&e.position.every((function(e,n){return Math.abs(e-t.position[n])<1e-10}))&&e.focus.every((function(e,n){return Math.abs(e-t.focus[n])<1e-10}))}var H=Object(I.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.data;switch(n){case"CHANGE_CAMERA":var o=e.comments.find((function(t){return t.id===e.selectedCommentId}));return o&&!x(o.camera,c)?Object(a.a)({},e,{cameraPosition:c,selectedCommentId:null,drawing:void 0}):Object(a.a)({},e,{cameraPosition:c});case"MOVE_CAMERA":return Object(a.a)({},e,{cameraPosition:c});case"SELECT_COMMENT":return Object(a.a)({},e,{selectedCommentId:c.id,cameraPosition:c.camera,activeVariationIds:c.activeVariationIds||e.activeVariationIds,drawing:c.drawOver&&JSON.parse(_.a.decompressFromEncodedURIComponent(c.drawOver))});case"DESELECT_COMMENT":return Object(a.a)({},e,{selectedCommentId:null,drawing:void 0});case"RESOLVE_COMMENT":return F.send("deletecomment",{id:c.id}),Object(a.a)({},e,{comments:e.comments.filter((function(e){return e.id!==c.id}))});case"RESOLVE_REPLY":return F.send("deletecomment",{id:c.reply.id}),Object(a.a)({},e,{comments:e.comments.map((function(e){return e.id===c.comment.id?Object(a.a)({},e,{thread:e.thread.filter((function(e){return e.id!==c.reply.id}))}):e}))});case"BEGIN_COMMENT":return Object(a.a)({},e,{isCommenting:!0});case"ATTACH_FILE":return Object(a.a)({},e,{fileIsAttached:!0});case"UNATTACH_FILE":return Object(a.a)({},e,{fileIsAttached:!1,attachedFile:void 0});case"ATTACH_DRAW_OVER":return Object(a.a)({},e,{drawOverIsAttached:!0,cursor:S});case"UNATTACH_DRAW_OVER":return Object(a.a)({},e,{drawOverIsAttached:!1,drawing:void 0,cursor:M});case"ATTACH_PIN":return Object(a.a)({},e,{pinIsAttached:!0,cursor:D});case"UNATTACH_PIN":return Object(a.a)({},e,{pinIsAttached:!1,attachedPin:void 0,cursor:M});case"SET_PIN_POSITION":return Object(a.a)({},e,{pin:c});case"PLACE_PIN":return Object(a.a)({},e,{cursor:M});case"CANCEL_COMMENT":return Object(a.a)({},e,{isCommenting:!1,fileIsAttached:!1,attachedFile:void 0,drawOverIsAttached:!1,drawing:void 0,pinIsAttached:!1,pin:void 0,cursor:M});case"ADD_COMMENT":"string"===typeof c&&0===c.trim().length&&(c=void 0);var r={id:Object(P.a)(),author:L.name,profilePicture:L.profilePicture,date:(new Date).getTime(),text:c,file:e.file,drawOver:e.drawing&&_.a.compressToEncodedURIComponent(JSON.stringify(e.drawing)),pin:e.pin,camera:e.cameraPosition,activeVariationIds:e.activeVariationIds,thread:[]};return F.send("addcomment",r),Object(a.a)({},e,{comments:[r].concat(Object(k.a)(e.comments))});case"ADD_REPLY":"string"===typeof c&&0===c.trim().length&&(c=void 0);var i={id:Object(P.a)(),author:L.name,profilePicture:L.profilePicture,date:(new Date).getTime(),text:c.text,file:e.file,drawOver:e.drawing&&_.a.compressToEncodedURIComponent(JSON.stringify(e.drawing)),camera:e.cameraPosition,activeVariationIds:e.activeVariationIds,parent_id:c.comment.id};return F.send("addcomment",i),Object(a.a)({},e,{comments:e.comments.map((function(e){return e.id===c.comment.id?Object(a.a)({},e,{thread:[i].concat(Object(k.a)(e.thread))}):e}))});case"OPEN_THREAD":return Object(a.a)({},e,{activeThreadId:c.id});case"CLOSE_THREAD":return Object(a.a)({},e,{activeThreadId:null});case"UPDATE_DRAWING":return Object(a.a)({},e,{drawing:c});case"SELECT_VARIATION":return Object(a.a)({},e,{activeVariationIds:Object(a.a)({},e.activeVariationIds,Object(N.a)({},c.id,!0))});case"DESELECT_VARIATION":return Object(a.a)({},e,{activeVariationIds:Object(a.a)({},e.activeVariationIds,Object(N.a)({},c.id,!1))});case"SHOW_PINS":return Object(a.a)({},e,{showPins:!0});case"HIDE_PINS":return Object(a.a)({},e,{showPins:!1});case"SET_COMMENTS":return Object(a.a)({},e,{comments:c});default:return e}})),F=new(function(){function e(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object(j.a)(this,e),t&&(this.ws=new WebSocket(t),this.ws.onopen=n,this.ws.onmessage=o&&function(e){var t=e.data,n=Object(c.a)(e,["data"]);o(Object(a.a)({data:JSON.parse(t)},n))},this.ws.onerror=r,this.ws.onclose=i)}return Object(A.a)(e,[{key:"send",value:function(e,t){this.ws&&this.ws.send(JSON.stringify(Object(a.a)({commentAction:e},t)))}}]),e}())("wss://m4wsvsc677.execute-api.us-east-1.amazonaws.com/poctest",(function(){F.send("fetchcomments")}),(function(e){var t=e.data;Array.isArray(t)?(t=(t=t.map((function(e){return y.Converter.unmarshall(e)}))).filter((function(e){return!e.parent_id})).map((function(e){return Object(a.a)({},e,{thread:t.filter((function(t){return t.parent_id===e.id})).sort((function(e,t){return t.date-e.date}))})})).sort((function(e,t){return t.date-e.date})),H.dispatch({type:"SET_COMMENTS",data:t})):F.send("fetchcomments")}),console.log),B=H;n(174);var U=Object(l.b)((function(e){var t=e.cursor,n=e.drawing,a=e.pin;return{redrawEnabled:t===S&&n,repinEnabled:t===D&&a}}),(function(e){return{onRedraw:function(){e({type:"UNATTACH_DRAW_OVER"})},onRepin:function(){e({type:"UNATTACH_PIN"})}}}))((function(e){var t=e.headerText,n=e.iconImage,a=e.className,o=e.redrawEnabled,i=e.repinEnabled,s=e.onRedraw,l=e.onRepin,m=Object(c.a)(e,["headerText","iconImage","className","redrawEnabled","repinEnabled","onRedraw","onRepin"]);return r.a.createElement("div",Object.assign({className:"comments-column-header-row"+(a?" "+a:"")},m),r.a.createElement("div",null,n&&r.a.createElement("img",{className:"comments-column-header-icon-image",src:n,alt:"Back icon"}),r.a.createElement("span",{className:"comments-column-header-text"},t)),!n&&o&&r.a.createElement("button",{className:"comments-column-header-redo-button",onClick:s},"Redraw"),!n&&i&&r.a.createElement("button",{className:"comments-column-header-redo-button",onClick:l},"Repin"))})),W=(n(175),n(70));n(176);function G(e){var t=e.src,n=e.author;return t?r.a.createElement("img",{className:"profile-picture",src:t,alt:n}):r.a.createElement("div",{className:"initials"},n.split(" ").filter((function(e,t,n){return 0===t||t===n.length-1})).map((function(e){return e[0].toLocaleUpperCase()})).join(""))}n(177);function z(e){var t=new Date,n=new Date(e);return t.toDateString()===n.toDateString()?"".concat(n.toLocaleTimeString(navigator.language,{timeStyle:"short"})," Today"):t.toDateString()===function(e,t){var n=new Date(e.valueOf());return n.setDate(e.getDate()+t),n}(n,1).toDateString()?"Yesterday":n.toLocaleDateString(navigator.language,{dateStyle:"medium"})}function J(e){var t=e.profilePicture,n=e.author,a=e.date,c=e.onResolve,i=Object(o.useState)(!1),s=Object(m.a)(i,2),l=s[0],u=s[1];return Object(o.useEffect)((function(){l&&u(!1)}),[l,u]),r.a.createElement("div",{className:"comment-top-row"},r.a.createElement(G,{src:t,author:n}),r.a.createElement("div",{className:"comment-top-column"},r.a.createElement("div",{className:"author-name"},n),r.a.createElement("div",{className:"comment-date"},z(a))),r.a.createElement(W.a,{className:"top-row-popup",trigger:r.a.createElement("button",{className:"small-icon-button"},r.a.createElement("img",{src:"assets/dots.svg",alt:"More options icon"})),position:"bottom right",on:"click",closeOnDocumentClick:!0,closeOnEscape:!0,disabled:l,arrow:!1},r.a.createElement("div",{className:"top-row-menu"},r.a.createElement("div",{className:"top-row-menu-options-row"},"Options",r.a.createElement("button",{className:"small-icon-button"},r.a.createElement("img",{src:"assets/close.svg",alt:"Close menu icon",onClick:function(){return u(!0)}}))),r.a.createElement("div",{onClick:function(){u(!0),c()}},"Resolve"),r.a.createElement("div",{onClick:function(){return u(!0)}},"Edit"),r.a.createElement("div",{onClick:function(){u(!0),c()}},"Delete"))))}var Y=Object(l.b)((function(e,t){var n=e.cursor,a=e.activeThreadId,c=e.selectedCommentId,o=e.drawing,r=t.comment.id;return{selected:r===c,redrawEnabled:r===a&&n===S&&o}}),(function(e){return{onRedraw:function(){e({type:"UNATTACH_DRAW_OVER"})}}}))((function(e){var t=e.comment,n=t.text,a=t.drawOver,o=t.pin,i=Object(c.a)(t,["text","drawOver","pin"]),s=e.selected,l=e.redrawEnabled,m=e.onRedraw,u=e.onResolve,d=e.children,f=Object(c.a)(e,["comment","selected","redrawEnabled","onRedraw","onResolve","children"]);return r.a.createElement("div",Object.assign({className:"comment"+(s?" selected":"")},f),r.a.createElement("div",{className:"comment-content"},r.a.createElement(J,Object.assign({},i,{onResolve:u})),r.a.createElement("p",{className:"comment-text"},n),d),r.a.createElement("div",{className:"comment-flag-row"},a&&r.a.createElement("img",{className:"comment-flag",src:"assets/drawover-flag.svg",alt:"Drawover flag"}),o&&r.a.createElement("img",{className:"comment-flag",src:"assets/pin-flag.svg",alt:"Pin flag"}),l&&r.a.createElement("button",{className:"comment-flag-redo-button",onClick:m},"Redraw")))}));n(178);var K=Object(l.b)(null,(function(e,t){var n=t.comment;return{onClickReply:function(){e({type:"CANCEL_COMMENT"}),e(f(n)),e(function(e){return{type:"OPEN_THREAD",data:e}}(n))}}}))((function(e){var t=e.comment,n=t.thread,a=Object(c.a)(t,["thread"]),o=e.onClickReply,i=Object(c.a)(e,["comment","onClickReply"]);return r.a.createElement(Y,Object.assign({comment:a},i),r.a.createElement("button",{className:"reply-button",onClick:function(e){e.stopPropagation(),o()}},function(e){return e&&e.length>0?e.length>1?"".concat(e.length," Replies"):"1 Reply":"Reply"}(n)))}));n(179);var X=Object(l.b)((function(e){var t=e.isCommenting,n=e.selectedCommentId,a=e.comments;return{isCommenting:t,selectedComment:a.find((function(e){return e.id===n})),comments:a}}),(function(e){return{onAddComment:function(t){e({type:"ADD_COMMENT",data:t}),e({type:"CANCEL_COMMENT"})},selectComment:function(t){return e(f(t))},deselectComment:function(){return e({type:"DESELECT_COMMENT"})},resolveComment:function(t){return e(E(t))}}}),(function(e,t,n){var o=e.selectedComment,r=Object(c.a)(e,["selectedComment"]),i=t.selectComment,s=t.deselectComment,l=t.resolveComment,m=Object(c.a)(t,["selectComment","deselectComment","resolveComment"]);return Object(a.a)({},n,{},r,{},m,{onClickComment:function(e){return e!==o?i(e):s()},onResolveComment:function(e){e===o&&s(),l(e)}})}))((function(e){var t=e.isCommenting,n=e.comments,a=e.onAddComment,i=e.onClickComment,s=e.onResolveComment,l=Object(c.a)(e,["isCommenting","comments","onAddComment","onClickComment","onResolveComment"]),d=Object(o.useState)(),f=Object(m.a)(d,2),p=f[0],v=f[1];return r.a.createElement("div",Object.assign({id:"comment-column"},l),r.a.createElement("div",{id:"input-column"},r.a.createElement(U,{headerText:"Comments"}),r.a.createElement(w,{pinAttachable:!0,mainThread:!0,onClickSubmit:a})),r.a.createElement("div",{className:"scroll-column"+(t?" focused":"")},n.map((function(e){return r.a.createElement(K,{key:e.id,comment:e,onClick:function(){return i(e)},onResolve:function(){return v(e.id)}})})),t&&r.a.createElement("div",{id:"comment-vignette"})),r.a.createElement(u,{isModalOpen:p,onCancel:function(){return v(null)},onResolve:function(){s(n.find((function(e){return e.id===p}))),v(null)}}))}));n(180);var q=Object(l.b)((function(e){var t=e.isCommenting,n=e.selectedCommentId;return{isCommenting:t,selectedComment:e.comments.flatMap((function(e){return[e].concat(Object(k.a)(e.thread))})).find((function(e){return e.id===n}))}}),(function(e){return{onReturn:function(){e({type:"CANCEL_COMMENT"}),e({type:"CLOSE_THREAD"})},selectComment:function(t){return e(f(t))},deselectComment:function(){return e({type:"DESELECT_COMMENT"})},resolveComment:function(t){return e(E(t))},resolveReply:function(t,n){return e(function(e,t){return{type:"RESOLVE_REPLY",data:{comment:e,reply:t}}}(t,n))},onAddReply:function(t,n){e(function(e,t){return{type:"ADD_REPLY",data:{comment:e,text:t}}}(t,n)),e({type:"CANCEL_COMMENT"})}}}),(function(e,t,n){var o=e.selectedComment,r=Object(c.a)(e,["selectedComment"]),i=t.selectComment,s=t.deselectComment,l=t.resolveComment,m=t.resolveReply,u=Object(c.a)(t,["selectComment","deselectComment","resolveComment","resolveReply"]);return Object(a.a)({},n,{},r,{},u,{onClickComment:function(e){r.isCommenting||e===o||i(e)},onClickReply:function(e){return e!==o?i(e):s()},onResolveComment:function(e){e===o&&s(),e===n.comment?l(e):m(n.comment,e)}})}))((function(e){var t=e.comment,n=e.isCommenting,a=e.onReturn,i=e.onClickComment,s=e.onClickReply,l=e.onAddReply,d=e.onResolveComment,f=Object(c.a)(e,["comment","isCommenting","onReturn","onClickComment","onClickReply","onAddReply","onResolveComment"]),p=Object(o.useState)(),v=Object(m.a)(p,2),b=v[0],h=v[1];return t?r.a.createElement("div",Object.assign({id:"thread-column"},f),r.a.createElement(U,{className:"thread-column-header",iconImage:"assets/left-arrow.svg",headerText:"Back to all comments",onClick:a}),r.a.createElement(Y,{comment:t,onClick:function(){return i(t)},onResolve:function(){return h(t.id)}},r.a.createElement(w,{onClick:function(e){return e.stopPropagation()},onClickSubmit:function(e){return l(t,e)}})),r.a.createElement("div",{className:"scroll-column"},t&&t.thread.map((function(e){return r.a.createElement(Y,{key:e.id,comment:e,onClick:function(){return s(e)},onResolve:function(){return h(e.id)}})})),n&&r.a.createElement("div",{id:"reply-vignette"})),r.a.createElement(u,{isModalOpen:b,onCancel:function(){return h(null)},onResolve:function(){d([t].concat(Object(k.a)(t.thread)).find((function(e){return e.id===b}))),h(null)}})):null}));var Q=Object(l.b)((function(e){var t=e.activeThreadId;return{activeThread:e.comments.find((function(e){return e.id===t}))}}),(function(e){return{onClickShowHide:function(){e({type:"CANCEL_COMMENT"}),e({type:"CLOSE_THREAD"})}}}))((function(e){var t=e.activeThread,n=e.onClickShowHide,a=Object(c.a)(e,["activeThread","onClickShowHide"]),i=Object(o.useState)(!0),s=Object(m.a)(i,2),l=s[0],u=s[1];return r.a.createElement("div",{id:"comments-row",className:l?"":"closed"},r.a.createElement(U,{headerText:"Show comments",className:"comments-column-closed-label"+(l?"":" closed"),onClick:function(){return u(!0)}}),r.a.createElement("div",{className:"comments-column-inside"+(l?"":" closed")},r.a.createElement(X,Object.assign({className:"main-thread"+(t?" main-thread-inactive":"")},a)),r.a.createElement(q,{className:"active-thread"+(t?"":" active-thread-inactive"),comment:t})),r.a.createElement("button",{className:"comments-column-close-button"+(l?"":" closed"),onClick:function(){u(!l),n()}},r.a.createElement("img",{src:"assets/right-arrow.svg",alt:"Close sidebar icon"})))})),Z=n(29),$=n(71);n(182);function ee(e,t,n,a){return function(){e&&t(!1),(n=n.filter((function(e){return e.length>1}))).length>0&&a&&a(n.slice(0,n.length-1))}}function te(e,t,n,a){return function(c){var o=c.nativeEvent,r=o.offsetX,i=o.offsetY;e(!0),t&&t([].concat(Object(k.a)(n),[[{x:r/a.current.clientWidth,y:i/a.current.clientHeight}]]))}}function ne(e,t,n,a){return function(c){var o=c.nativeEvent;if(e){var r=o.offsetX,i=o.offsetY;if(t.length>0){var s=t[t.length-1];n&&n([].concat(Object(k.a)(t.slice(0,t.length-1)),[[].concat(Object(k.a)(s),[{x:r/a.current.clientWidth,y:i/a.current.clientHeight}])]))}}}}function ae(e){return function(t){var n=t.nativeEvent,a=n.target.getBoundingClientRect(),c=n.targetTouches[0];e({nativeEvent:{offsetX:c.pageX-a.left,offsetY:c.pageY-a.top}})}}function ce(e){var t=e.lineWidth,n=void 0===t?3:t,a=e.lineColor,i=void 0===a?"black":a,s=e.value,l=e.onChange,u=Object(c.a)(e,["lineWidth","lineColor","value","onChange"]);s=s||[];var d=Object(o.useRef)(),f=Object(o.useState)(),p=Object(m.a)(f,2),v=p[0],b=p[1],h=Object(o.useState)(!1),E=Object(m.a)(h,2),C=E[0],g=E[1];return Object(o.useEffect)((function(){v||b(d.current.getContext("2d"))}),[d,v]),Object(o.useEffect)((function(){return function(e,t,n,a,c){if(t){t.clearRect(0,0,e.width,e.height);var o=!0,r=!1,i=void 0;try{for(var s,l=n[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var m=s.value,u=Object(Z.a)(m),d=u[0],f=d.x,p=d.y,v=u.slice(1);t.lineJoin="round",t.lineCap="round",t.lineWidth=a,t.strokeStyle=c,t.beginPath(),t.moveTo(f*e.width,p*e.height);var b=!0,h=!1,E=void 0;try{for(var C,g=v[Symbol.iterator]();!(b=(C=g.next()).done);b=!0){var O=C.value,w=O.x,j=O.y;t.lineTo(w*e.width,j*e.height)}}catch(A){h=!0,E=A}finally{try{b||null==g.return||g.return()}finally{if(h)throw E}}t.stroke()}}catch(A){r=!0,i=A}finally{try{o||null==l.return||l.return()}finally{if(r)throw i}}}}(d.current,v,s,n,i)}),[d,v,s,n,i]),r.a.createElement($.HotKeys,{allowChanges:!0,className:"draw-canvas-hotkeys",keyMap:{undo:["command+z","ctrl+z","backspace"]},handlers:{undo:ee(C,g,s,l)}},r.a.createElement("canvas",Object.assign({ref:d,className:"draw-canvas",width:1024,height:1024,onMouseDown:te(g,l,s,d),onMouseMove:ne(C,s,l,d),onMouseUp:function(){return g(!1)},onTouchStart:ae(te(g,l,s,d)),onTouchMove:ae(ne(C,s,l,d)),onTouchEnd:function(){return g(!1)},onTouchCancel:ee(C,g,s,l)},u)))}n(183);var oe=Object(l.b)((function(e){var t=e.cursor,n=e.drawing;return{interactive:t===S,drawing:n}}),(function(e){return{onChange:function(t){return e(function(e){return{type:"UPDATE_DRAWING",data:e}}(t))}}}))((function(e){var t=e.interactive,n=e.drawing,a=e.onChange,o=e.children,i=Object(c.a)(e,["interactive","drawing","onChange","children"]);return r.a.createElement("div",Object.assign({id:"sketch-container"},i),o,r.a.createElement("div",{id:"sketch-canvas",className:t?"":"static"},r.a.createElement(ce,{lineWidth:2,lineColor:"#ff0035",value:n,onChange:a})))}));n(184);var re=function(e){var t=e.eyeOpen,n=e.onClickEye;return r.a.createElement("div",{className:"head"},r.a.createElement("button",{className:"back-button"},"Back"),r.a.createElement("div",{className:"button-row"},r.a.createElement("img",{className:"profile",alt:L.name,src:L.profilePicture}),r.a.createElement("button",{className:"AR",onClick:function(){return alert("more features to come")}},"AR"),r.a.createElement("button",{className:"share",onClick:function(){return alert("share link copied")}},"Share"),r.a.createElement("button",{className:"eye",onClick:n},r.a.createElement("img",{src:"assets/eye-".concat(t?"open":"closed",".svg"),alt:"Show/hide pins icon"}))),r.a.createElement("div",{className:"greeting-row"},r.a.createElement("span",null,"Nike Zoom Prototype 1")))},ie=(n(185),n(21)),se=n(22),le=n.n(se),me=n(15),ue=n(1),de=n(72),fe=n(43);function pe(e){var t=e.path,n=e.fallback,a=Object(c.a)(e,["path","fallback"]),i=Object(o.useState)(),s=Object(m.a)(i,2),l=s[0],u=s[1];return Object(o.useEffect)((function(){l||function(){var e,n,a;le.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,le.a.awrap(new Promise((function(e,n){return(new fe.a).load(t,e,void 0,n)})));case 2:e=c.sent,n=e.scene,a=(new ue.Box3).setFromObject(n),n.scale.multiplyScalar(5/Math.max.apply(Math,Object(k.a)(a.getSize(new ue.Vector3).toArray()))),a.setFromObject(n),n.position.copy(a.getCenter(new ue.Vector3)).multiplyScalar(-1),u(e);case 9:case"end":return c.stop()}}))}()}),[t,l]),l?r.a.createElement("primitive",Object.assign({object:l.scene},a)):n}function ve(e){var t=e.pinPosition,n=e.color,a=void 0===n?"red":n,c=Object(o.useRef)();if(Object(o.useEffect)((function(){c.current&&(c.current.geometry.verticesNeedUpdate=!0)})),!t)return null;var i=Object(ie.a)(ue.Vector3,Object(k.a)(t.position)),s=Object(ie.a)(ue.Vector3,Object(k.a)(t.normal)),l=i.clone();l.addScaledVector(s,.2);var m=[i,l];return r.a.createElement("group",null,r.a.createElement("line",{ref:c},r.a.createElement("geometry",{attach:"geometry",vertices:m,verticesNeedUpdate:!0}),r.a.createElement("meshBasicMaterial",{attach:"material",color:"#7B7B7B"})),r.a.createElement("mesh",{visible:!0,position:m[1]},r.a.createElement("sphereGeometry",{attach:"geometry",args:[.03,16,16]}),r.a.createElement("meshStandardMaterial",{attach:"material",color:a})))}function be(e){var t=e.cameraPosition,n=e.onOrbitChange,a=Object(c.a)(e,["cameraPosition","onOrbitChange"]),i=Object(o.useRef)();Object(me.c)((function(){var e=i.current;if(t&&!x(t,{position:e.object.position.toArray(),focus:e.target.toArray()})){var n,a,c=t.position,o=t.focus;(n=e.object.position).set.apply(n,Object(k.a)(c)),(a=e.target).set.apply(a,Object(k.a)(o)),e.update()}})),Object(o.useEffect)((function(){var e=i.current;return e.addEventListener("change",n),function(){return e.removeEventListener("change",n)}}),[t,i,n]);var s=Object(me.d)(),l=s.camera,m=s.gl.domElement;return r.a.createElement("orbitControls",Object.assign({ref:i,args:[l,m]},a))}function he(e){e.color;var t=e.position,n=Object(c.a)(e,["color","position"]),a=Object(o.useRef)(),i=Object(o.useState)(),s=Object(m.a)(i,2),l=s[0],u=s[1];return Object(o.useEffect)((function(){var e=!0;return l||function(){var t;le.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,le.a.awrap(new Promise((function(e,t){return(new fe.a).load("models/gltf/vivid3d_loader/scene.gltf",e,void 0,t)})));case 2:t=n.sent,e&&(t.scene.scale.setLength(13),u(t));case 4:case"end":return n.stop()}}))}(),function(){e=!1}}),[l,u]),Object(me.c)((function(){var e;a.current&&(a.current.rotation.y-=.03,(e=a.current.position).set.apply(e,Object(k.a)(t)))})),l?r.a.createElement("primitive",Object.assign({ref:a,object:l.scene},n)):null}Object(me.b)({OrbitControls:de.a});var Ee=Object(l.b)((function(e){var t=e.cameraPosition,n=e.comments,a=e.pinIsAttached,c=e.cursor,o=e.pin,r=e.showPins;return{cameraPosition:t,comments:n,pinIsAttached:a,pinFollowCursor:c===D,pin:o,showPins:r}}),(function(e){return{onOrbitChange:function(t){var n=t.target,a=n.object.position,c=n.target;return e({type:"CHANGE_CAMERA",data:{position:a.toArray(),focus:c.toArray()}})},onPointerMove:function(t){return e({type:"SET_PIN_POSITION",data:{position:t.point.toArray(),normal:t.face.normal.toArray()}})},placePinClick:function(){return e({type:"PLACE_PIN"})}}}))((function(e){var t=e.cameraPosition,n=e.comments,a=e.modelPath,o=e.pinIsAttached,i=e.pinFollowCursor,s=e.pin,l=e.showPins,m=e.onOrbitChange,u=e.placePinClick,d=e.onPointerMove,f=Object(c.a)(e,["cameraPosition","comments","modelPath","pinIsAttached","pinFollowCursor","pin","showPins","onOrbitChange","placePinClick","onPointerMove"]);return r.a.createElement(me.a,Object.assign({camera:{fov:60,near:1},onCreated:function(e){var t=e.gl,n=e.scene;t&&(t.outputEncoding=ue.sRGBEncoding),n&&(n.background=new ue.Color(15066597))}},f),r.a.createElement(be,{cameraPosition:t,minDistance:1,maxDistance:50,onOrbitChange:m}),r.a.createElement("ambientLight",null),r.a.createElement(pe,{path:a,fallback:r.a.createElement(he,{position:t.focus}),onPointerMove:i&&d,onClick:i&&u}),o&&r.a.createElement(ve,{pinPosition:s,color:"#E37FFA"}),l&&n.filter((function(e){return e.pin})).map((function(e){return r.a.createElement(ve,{key:e.id,pinPosition:e.pin})})))}));n(189);var Ce=Object(l.b)((function(e,t){return{selected:e.activeVariationIds[t.id]}}),(function(){return{}}))((function(e){e.id;var t=e.name,n=e.thumbnail,a=e.selected,i=Object(c.a)(e,["id","name","thumbnail","selected"]),s=Object(o.useState)(!1),l=Object(m.a)(s,2),u=l[0],d=l[1];return r.a.createElement("div",Object.assign({className:"variation",onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)}},i),r.a.createElement("span",{className:"variation-name"},t),r.a.createElement("img",{className:"variation-thumbnail-image",src:n,alt:"".concat(t," thumbnail")}),(a||u)&&r.a.createElement("div",{className:"variation-checked-circle"+(a?" selected":"")},a&&r.a.createElement("img",{src:"assets/variation-check.svg",alt:"Variation checked icon"})))}));n(190);var ge=Object(l.b)((function(e){return{activeVariationIds:e.activeVariationIds,variations:e.variations}}),(function(e){return{selectVariation:function(t){return e(function(e){return{type:"SELECT_VARIATION",data:e}}(t))},deselectVariation:function(t){return e(function(e){return{type:"DESELECT_VARIATION",data:e}}(t))},deselectComment:function(){return e({type:"DESELECT_COMMENT"})}}}),(function(e,t,n){var o=t.selectVariation,r=t.deselectVariation,i=t.deselectComment,s=e.activeVariationIds,l=Object(c.a)(e,["activeVariationIds"]);return Object(a.a)({},n,{},l,{onClickVariation:function(e){i(),s[e.id]?r(e):o(e)}})}))((function(e){var t=e.variations,n=e.onClickVariation,a=Object(c.a)(e,["variations","onClickVariation"]),i=Object(o.useState)(!0),s=Object(m.a)(i,2),l=s[0],u=s[1];return r.a.createElement("div",Object.assign({id:"variations-column",className:l?"":"closed"},a),r.a.createElement(U,{headerText:"Show Variations",className:"variations-column-closed-label"+(l?"":" closed"),onClick:function(){return u(!0)}}),r.a.createElement("div",{className:"variations-column-inside"+(l?"":" closed")},r.a.createElement(U,{className:"variations-header",headerText:"Variations"}),r.a.createElement("div",{className:"variations-scroll-column"},t.map((function(e){return r.a.createElement(Ce,Object.assign({key:e.id,onClick:function(){return n(e)}},e))})))),r.a.createElement("button",{className:"variations-column-close-button"+(l?"":" closed"),onClick:function(){return u(!l)}},r.a.createElement("img",{src:"assets/right-arrow.svg",alt:"Close sidebar icon"})))}));var Oe=Object(l.b)((function(e){var t=e.cursor,n=e.activeVariationIds,a=e.variations,c=e.showPins;return{cursor:t,activeVariations:Object.keys(n).filter((function(e){return n[e]})).map((function(e){return a.find((function(t){var n=t.id;return"".concat(n)===e}))})),showPins:c}}),(function(e){return{onClickTopCamera:function(){e({type:"DESELECT_COMMENT"}),e(d({position:[0,4,0],focus:[0,0,0]}))},onClickFrontCamera:function(){e({type:"DESELECT_COMMENT"}),e(d({position:[0,0,4],focus:[0,0,0]}))},onClickSideCamera:function(){e({type:"DESELECT_COMMENT"}),e(d({position:[-4,0,0],focus:[0,0,0]}))},showPins:function(){return e({type:"SHOW_PINS"})},hidePins:function(){return e({type:"HIDE_PINS"})}}}),(function(e,t,n){var o=t.showPins,r=t.hidePins,i=Object(c.a)(t,["showPins","hidePins"]);return Object(a.a)({},n,{},e,{},i,{onClickEye:function(){e.showPins?r():o()}})}))((function(e){var t=e.cursor,n=e.showPins,a=e.activeVariations,c=e.onClickEye,o=e.onClickTopCamera,i=e.onClickFrontCamera,s=e.onClickSideCamera;return r.a.createElement("div",{id:"app-container",className:t},r.a.createElement(re,{eyeOpen:n,onClickEye:c}),r.a.createElement("div",{id:"main-area"},r.a.createElement(ge,null),r.a.createElement(oe,{className:"draw-over"},r.a.createElement("div",{className:"renderer-row"},a.map((function(e){return r.a.createElement("div",{key:e.id,className:"renderer",style:{width:"calc(100%/".concat(a.length,")")}},r.a.createElement(Ee,{modelPath:e.model}))}))),r.a.createElement("div",{className:"camera-button-row"},r.a.createElement("button",{className:"camera-button top-camera-button",onClick:o},r.a.createElement("div",{className:"camera-button-icon-container"},r.a.createElement("img",{src:"assets/top-icon.svg",alt:"Top camera view icon"})),"Top"),r.a.createElement("button",{className:"camera-button front-camera-button",onClick:i},r.a.createElement("div",{className:"camera-button-icon-container"},r.a.createElement("img",{src:"assets/front-icon.svg",alt:"Top camera view icon"})),"Front"),r.a.createElement("button",{className:"camera-button side-camera-button",onClick:s},r.a.createElement("div",{className:"camera-button-icon-container"},r.a.createElement("img",{src:"assets/side-icon.svg",alt:"Top camera view icon"})),"Side"))),r.a.createElement(Q,null)))}));s.a.render(r.a.createElement(l.a,{store:B},r.a.createElement(Oe,null)),document.getElementById("root"))},39:function(e,t){},77:function(e,t,n){e.exports=n(191)},84:function(e,t,n){},85:function(e,t,n){},90:function(e,t,n){}},[[77,1,2]]]);
//# sourceMappingURL=main.0c1a2f86.chunk.js.map