{"version":3,"sources":["ConfirmResolve/ConfirmResolve.js","redux/actions.js","CommentsColumn/CommentInput/CommentInput.js","CommentsColumn/Comment/TopRow/ProfileIcon/ProfileIcon.js","CommentsColumn/Comment/TopRow/TopRow.js","comments.js","redux/store.js","CommentsColumn/CommentsColumnHeader/CommentsColumnHeader.js","CommentsColumn/Comment/Comment.js","CommentsColumn/MainComment/MainComment.js","CommentsColumn/MainThread/MainThread.js","CommentsColumn/Thread/Thread.js","CommentsColumn/CommentsColumn.js","DrawCanvas/DrawCanvas.js","DrawOver/DrawOver.js","Header/Header.js","ModelRenderer.js","VariationsColumn/Variation/Variation.js","VariationsColumn/VariationsColumn.js","index.js"],"names":["ConfirmResolve","isModalOpen","onCancel","onResolve","props","id","className","onClick","event","stopPropagation","moveCamera","cameraPosition","type","data","selectComment","comment","deselectComment","unattachDrawOver","unattachPin","cancelComment","resolveComment","connect","isCommenting","fileIsAttached","file","drawOverIsAttached","drawing","pinIsAttached","pin","cancelEnabled","submitEnabled","selectedCommentId","beginComment","attachFile","unattachFile","attachDrawOver","attachPin","dispatchProps","ownProps","stateProps","onFocusTextArea","onBlurTextArea","length","onClickAttachFile","onClickAttachDrawOver","onClickAttachPin","onClickCancel","pinAttachable","mainThread","onClickSubmit","useState","inputComment","setInputComment","placeholder","value","onChange","target","onFocus","onBlur","data-tip","src","alt","place","effect","disabled","ProfileIcon","author","split","filter","_","i","names","map","name","toLocaleUpperCase","join","addDays","date","days","result","Date","valueOf","setDate","getDate","TopRow","profilePic","redrawEnabled","onRedraw","closeMenu","setCloseMenu","useEffect","dateInMillis","today","toDateString","toLocaleTimeString","navigator","language","timeStyle","toLocaleDateString","dateStyle","relativeDateString","trigger","position","on","closeOnDocumentClick","closeOnEscape","arrow","getTime","text","camera","focus","activeVariationIds","1","thread","drawOver","CURSOR","INITIAL_CAMERA_POSITION","initialState","cursor","maxCommentId","variations","thumbnail","model","comments","createStore","state","cameraPositionEquals","camera1","camera2","every","p","Math","abs","f","selectedComment","find","activeCameraPosition","JSON","parse","LZString","decompressFromEncodedURIComponent","reply","attachedFile","attachedPin","compressToEncodedURIComponent","stringify","activeThreadId","repinEnabled","dispatch","onRepin","headerText","iconImage","selected","children","onClickReply","openThread","replyLabel","onAddComment","onClickComment","onResolveComment","resolveCommentId","setResolveCommentId","key","flatMap","onReturn","resolveReply","onAddReply","addReply","restOfDispatchProps","e","activeThread","handleUndo","isPainting","setPainting","line","slice","handleClick","ref","nativeEvent","offsetX","offsetY","x","current","clientWidth","y","clientHeight","handleDrag","currLine","convertTouchToMouse","handler","canvasRect","getBoundingClientRect","touch","targetTouches","pageX","left","pageY","top","DrawCanvas","lineWidth","lineColor","useRef","ctx","setContext","getContext","canvas","clearRect","width","height","rest","lineJoin","lineCap","strokeStyle","beginPath","moveTo","lineTo","stroke","paint","allowChanges","keyMap","undo","handlers","onMouseDown","onMouseMove","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","interactive","updateDrawing","Header","eyeOpen","setEyeOpen","alert","Model","path","setModel","GLTFLoader","load","gltf","mroot","scene","bbox","Box3","setFromObject","scale","multiplyScalar","max","getSize","Vector3","toArray","copy","getCenter","object","Controls","onOrbitChange","controlsRef","controls","set","addEventListener","update","removeEventListener","useThree","domElement","gl","args","extend","OrbitControls","reduce","acc","modelPath","fov","near","onCreated","outputEncoding","sRGBEncoding","background","Color","minDistance","maxDistance","fallback","mouseHover","setMouseHover","onMouseEnter","onMouseLeave","selectVariation","variation","deselectVariation","onClickVariation","WrappedMainPage","activeVariations","Object","keys","variationId","onClickTopCamera","onClickFrontCamera","onClickSideCamera","style","ReactDOM","render","store","document","getElementById"],"mappings":"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","file":"static/js/main.04bb6be0.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"./ConfirmResolve.css\";\r\n\r\nexport function ConfirmResolve({ isModalOpen, onCancel, onResolve, ...props }) {\r\n  return (\r\n    <div id=\"modal\" className={isModalOpen ? \"\" : \"hide\"} onClick={onCancel}>\r\n      <div\r\n        id=\"modal-dialog\"\r\n        onClick={event => event.stopPropagation()}\r\n        {...props}\r\n      >\r\n        <span id=\"modal-warning\">Are you sure you want to resolve?</span>\r\n        <div id=\"modal-actions\">\r\n          <span\r\n            id=\"modal-cancel\"\r\n            onClick={event => {\r\n              event.stopPropagation();\r\n              onCancel();\r\n            }}\r\n          >\r\n            Cancel\r\n          </span>\r\n          <span\r\n            id=\"modal-submit\"\r\n            onClick={event => {\r\n              event.stopPropagation();\r\n              onResolve();\r\n            }}\r\n          >\r\n            Submit\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * action types\r\n */\r\n\r\nexport const CHANGE_CAMERA = \"CHANGE_CAMERA\";\r\nexport const MOVE_CAMERA = \"MOVE_CAMERA\";\r\nexport const SELECT_COMMENT = \"SELECT_COMMENT\";\r\nexport const DESELECT_COMMENT = \"DESELECT_COMMENT\";\r\n\r\nexport const BEGIN_COMMENT = \"BEGIN_COMMENT\";\r\nexport const ATTACH_FILE = \"ATTACH_FILE\";\r\nexport const UNATTACH_FILE = \"UNATTACH_FILE\";\r\nexport const ATTACH_DRAW_OVER = \"ATTACH_DRAW_OVER\";\r\nexport const UNATTACH_DRAW_OVER = \"UNATTACH_DRAW_OVER\";\r\nexport const ATTACH_PIN = \"ATTACH_PIN\";\r\nexport const UNATTACH_PIN = \"UNATTACH_PIN\";\r\nexport const CANCEL_COMMENT = \"CANCEL_COMMENT\";\r\n\r\nexport const ADD_COMMENT = \"ADD_COMMENT\";\r\nexport const ADD_REPLY = \"ADD_REPLY\";\r\nexport const RESOLVE_COMMENT = \"RESOLVE_COMMENT\";\r\nexport const RESOLVE_REPLY = \"RESOLVE_REPLY\";\r\n\r\nexport const OPEN_THREAD = \"OPEN_THREAD\";\r\nexport const CLOSE_THREAD = \"CLOSE_THREAD\";\r\n\r\nexport const UPDATE_DRAWING = \"UPDATE_DRAWING\";\r\nexport const UPDATE_PIN = \"UPDATE_PIN\";\r\n\r\nexport const SELECT_VARIATION = \"SELECT_VARIATION\";\r\nexport const DESELECT_VARIATION = \"DESELECT_VARIATION\";\r\n\r\n/**\r\n * action creators\r\n */\r\n\r\nexport function changeCamera(cameraPosition) {\r\n  return { type: CHANGE_CAMERA, data: cameraPosition };\r\n}\r\nexport function moveCamera(cameraPosition) {\r\n  return { type: MOVE_CAMERA, data: cameraPosition };\r\n}\r\nexport function selectComment(comment) {\r\n  return { type: SELECT_COMMENT, data: comment };\r\n}\r\nexport function deselectComment() {\r\n  return { type: DESELECT_COMMENT };\r\n}\r\n\r\nexport function beginComment() {\r\n  return { type: BEGIN_COMMENT };\r\n}\r\nexport function attachFile() {\r\n  return { type: ATTACH_FILE };\r\n}\r\nexport function unattachFile() {\r\n  return { type: UNATTACH_FILE };\r\n}\r\nexport function attachDrawOver() {\r\n  return { type: ATTACH_DRAW_OVER };\r\n}\r\nexport function unattachDrawOver() {\r\n  return { type: UNATTACH_DRAW_OVER };\r\n}\r\nexport function attachPin() {\r\n  return { type: ATTACH_PIN };\r\n}\r\nexport function unattachPin() {\r\n  return { type: UNATTACH_PIN };\r\n}\r\nexport function cancelComment() {\r\n  return { type: CANCEL_COMMENT };\r\n}\r\n\r\nexport function addComment(text) {\r\n  return { type: ADD_COMMENT, data: text };\r\n}\r\nexport function addReply(comment, text) {\r\n  return { type: ADD_REPLY, data: { comment, text } };\r\n}\r\nexport function resolveComment(comment) {\r\n  return { type: RESOLVE_COMMENT, data: comment };\r\n}\r\nexport function resolveReply(comment, reply) {\r\n  return { type: RESOLVE_REPLY, data: { comment, reply } };\r\n}\r\n\r\nexport function openThread(comment) {\r\n  return { type: OPEN_THREAD, data: comment };\r\n}\r\nexport function closeThread() {\r\n  return { type: CLOSE_THREAD };\r\n}\r\n\r\nexport function updateDrawing(drawing) {\r\n  return { type: UPDATE_DRAWING, data: drawing };\r\n}\r\nexport function updatePin(pin) {\r\n  return { type: UPDATE_PIN, data: pin };\r\n}\r\n\r\nexport function selectVariation(variation) {\r\n  return { type: SELECT_VARIATION, data: variation };\r\n}\r\nexport function deselectVariation(variation) {\r\n  return { type: DESELECT_VARIATION, data: variation };\r\n}\r\n","import React, { useState } from \"react\";\r\nimport TextareaAutosize from \"react-autosize-textarea/lib\";\r\nimport { connect } from \"react-redux\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport {\r\n  attachDrawOver,\r\n  attachFile,\r\n  attachPin,\r\n  beginComment,\r\n  cancelComment,\r\n  deselectComment,\r\n  unattachDrawOver,\r\n  unattachFile,\r\n  unattachPin\r\n} from \"../../redux/actions\";\r\nimport \"./CommentInput.css\";\r\n\r\nfunction CommentInput({\r\n  pinAttachable = false,\r\n  mainThread = false,\r\n  fileIsAttached,\r\n  drawOverIsAttached,\r\n  pinIsAttached,\r\n  cancelEnabled,\r\n  submitEnabled,\r\n  onFocusTextArea,\r\n  onBlurTextArea,\r\n  onClickAttachFile,\r\n  onClickAttachDrawOver,\r\n  onClickAttachPin,\r\n  onClickCancel,\r\n  onClickSubmit = () => {},\r\n  ...props\r\n}) {\r\n  const [inputComment, setInputComment] = useState();\r\n\r\n  return (\r\n    <div className=\"comment-input-column\" {...props}>\r\n      <TextareaAutosize\r\n        className=\"comment-input-text-area\"\r\n        placeholder=\"Add a comment\"\r\n        value={inputComment}\r\n        onChange={event => setInputComment(event.target.value)}\r\n        onFocus={onFocusTextArea}\r\n        onBlur={() => onBlurTextArea(inputComment)}\r\n      />\r\n      <div className=\"comment-input-actions-row\">\r\n        <div className=\"comment-input-icon-actions\">\r\n          <button\r\n            className={\r\n              \"comment-input-icon-action-button\" +\r\n              (fileIsAttached ? \" active\" : \"\")\r\n            }\r\n            data-tip=\"Attach file\"\r\n            onClick={() => onClickAttachFile(inputComment)}\r\n          >\r\n            <img src=\"assets/clip.svg\" alt=\"File attachment icon\" />\r\n          </button>\r\n          <button\r\n            className={\r\n              \"comment-input-icon-action-button\" +\r\n              (drawOverIsAttached ? \" active\" : \"\")\r\n            }\r\n            data-tip=\"Drawover\"\r\n            onClick={() => onClickAttachDrawOver(inputComment)}\r\n          >\r\n            <img src=\"assets/pencil.svg\" alt=\"File attachment icon\" />\r\n          </button>\r\n          {pinAttachable && (\r\n            <button\r\n              className={\r\n                \"comment-input-icon-action-button\" +\r\n                (pinIsAttached ? \" active\" : \"\")\r\n              }\r\n              data-tip=\"Pin\"\r\n              onClick={() => onClickAttachPin(inputComment)}\r\n            >\r\n              <img src=\"assets/pin.svg\" alt=\"File attachment icon\" />\r\n            </button>\r\n          )}\r\n          <ReactTooltip\r\n            className=\"comment-input-tooltip\"\r\n            place=\"bottom\"\r\n            effect=\"solid\"\r\n          />\r\n        </div>\r\n        <div className=\"comment-input-text-actions\">\r\n          <button\r\n            className=\"comment-input-text-action-button comment-input-cancel-button\"\r\n            disabled={\r\n              !(cancelEnabled || (inputComment && inputComment.length > 0))\r\n            }\r\n            onClick={() => {\r\n              setInputComment(\"\");\r\n              onClickCancel();\r\n            }}\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            className=\"comment-input-text-action-button comment-input-submit-button\"\r\n            disabled={\r\n              !(submitEnabled || (inputComment && inputComment.length > 0))\r\n            }\r\n            onClick={() => {\r\n              onClickSubmit(inputComment || \"\");\r\n              setInputComment(\"\");\r\n            }}\r\n          >\r\n            Submit\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mergeProps(\r\n  { selectedCommentId, ...stateProps },\r\n  dispatchProps,\r\n  ownProps\r\n) {\r\n  const {\r\n    deselectComment,\r\n    beginComment,\r\n    attachFile,\r\n    unattachFile,\r\n    attachDrawOver,\r\n    unattachDrawOver,\r\n    attachPin,\r\n    unattachPin,\r\n    cancelComment\r\n  } = dispatchProps;\r\n\r\n  return {\r\n    ...ownProps,\r\n    ...stateProps,\r\n    onFocusTextArea: () => {\r\n      if (!stateProps.isCommenting) {\r\n        if (selectedCommentId) {\r\n          deselectComment();\r\n        }\r\n        beginComment();\r\n      }\r\n    },\r\n    onBlurTextArea: comment =>\r\n      !stateProps.fileIsAttached &&\r\n      !stateProps.drawOverIsAttached &&\r\n      !stateProps.pinIsAttached &&\r\n      (!comment || comment.length === 0) &&\r\n      cancelComment(),\r\n    onClickAttachFile: comment => {\r\n      if (stateProps.fileIsAttached) {\r\n        if (\r\n          !stateProps.drawOverIsAttached &&\r\n          !stateProps.pinIsAttached &&\r\n          (!comment || comment.length === 0)\r\n        ) {\r\n          cancelComment();\r\n        } else {\r\n          unattachFile();\r\n        }\r\n      } else {\r\n        if (!stateProps.cancelEnabled) {\r\n          deselectComment();\r\n          beginComment();\r\n        }\r\n        attachFile();\r\n      }\r\n    },\r\n    onClickAttachDrawOver: comment => {\r\n      if (stateProps.drawOverIsAttached) {\r\n        if (\r\n          !stateProps.fileIsAttached &&\r\n          !stateProps.pinIsAttached &&\r\n          (!comment || comment.length === 0)\r\n        ) {\r\n          cancelComment();\r\n        } else {\r\n          unattachDrawOver();\r\n        }\r\n      } else {\r\n        if (!stateProps.cancelEnabled) {\r\n          deselectComment();\r\n          beginComment();\r\n        }\r\n        attachDrawOver();\r\n      }\r\n    },\r\n    onClickAttachPin: comment => {\r\n      if (stateProps.pinIsAttached) {\r\n        if (\r\n          !stateProps.fileIsAttached &&\r\n          !stateProps.drawOverIsAttached &&\r\n          (!comment || comment.length === 0)\r\n        ) {\r\n          cancelComment();\r\n        } else {\r\n          unattachPin();\r\n        }\r\n      } else {\r\n        if (!stateProps.cancelEnabled) {\r\n          deselectComment();\r\n          beginComment();\r\n        }\r\n        attachPin();\r\n      }\r\n    },\r\n    onClickCancel: () => cancelComment()\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  ({\r\n    isCommenting,\r\n    fileIsAttached,\r\n    file,\r\n    drawOverIsAttached,\r\n    drawing,\r\n    pinIsAttached,\r\n    pin,\r\n    selectedCommentId\r\n  }) => ({\r\n    fileIsAttached,\r\n    drawOverIsAttached,\r\n    pinIsAttached,\r\n    cancelEnabled: isCommenting,\r\n    submitEnabled:\r\n      (fileIsAttached && file) ||\r\n      (drawOverIsAttached && drawing) ||\r\n      (pinIsAttached && pin),\r\n    selectedCommentId\r\n  }),\r\n  {\r\n    deselectComment,\r\n    beginComment,\r\n    attachFile,\r\n    unattachFile,\r\n    attachDrawOver,\r\n    unattachDrawOver,\r\n    attachPin,\r\n    unattachPin,\r\n    cancelComment\r\n  },\r\n  mergeProps\r\n)(CommentInput);\r\n","import React from \"react\";\r\nimport \"./ProfileIcon.css\";\r\n\r\nexport function ProfileIcon({ src, author }) {\r\n  return src ? (\r\n    <img className=\"profile-picture\" src={src} alt={author} />\r\n  ) : (\r\n    <div className=\"initials\">\r\n      {author\r\n        .split(\" \")\r\n        .filter((_, i, names) => i === 0 || i === names.length - 1)\r\n        .map(name => name[0].toLocaleUpperCase())\r\n        .join(\"\")}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Popup from \"reactjs-popup\";\r\nimport { ProfileIcon } from \"./ProfileIcon/ProfileIcon\";\r\nimport \"./TopRow.css\";\r\n\r\nexport function addDays(date, days) {\r\n  const result = new Date(date.valueOf());\r\n  result.setDate(date.getDate() + days);\r\n  return result;\r\n}\r\n\r\nfunction relativeDateString(dateInMillis) {\r\n  const today = new Date();\r\n  const date = new Date(dateInMillis);\r\n\r\n  if (today.toDateString() === date.toDateString()) {\r\n    return `${date.toLocaleTimeString(navigator.language, {\r\n      timeStyle: \"short\"\r\n    })} Today`;\r\n  } else if (today.toDateString() === addDays(date, 1).toDateString()) {\r\n    return \"Yesterday\";\r\n  } else {\r\n    return date.toLocaleDateString(navigator.language, { dateStyle: \"medium\" });\r\n  }\r\n}\r\n\r\nexport function TopRow({\r\n  profilePic,\r\n  author,\r\n  date,\r\n  redrawEnabled,\r\n  onRedraw,\r\n  onResolve\r\n}) {\r\n  const [closeMenu, setCloseMenu] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (closeMenu) {\r\n      setCloseMenu(false);\r\n    }\r\n  }, [closeMenu, setCloseMenu]);\r\n\r\n  return (\r\n    <div className=\"comment-top-row\">\r\n      <ProfileIcon src={profilePic} author={author} />\r\n      <div className=\"comment-top-column\">\r\n        <div className=\"author-name\">{author}</div>\r\n        <div className=\"comment-date\">{relativeDateString(date)}</div>\r\n      </div>\r\n      {redrawEnabled && (\r\n        <button\r\n          className=\"top-row-redo-button\"\r\n          onClick={onRedraw}\r\n        >\r\n          Redraw\r\n        </button>\r\n      )}\r\n      <Popup\r\n        className=\"top-row-popup\"\r\n        trigger={\r\n          <button className=\"small-icon-button\">\r\n            <img src=\"assets/dots.svg\" alt=\"More options icon\" />\r\n          </button>\r\n        }\r\n        position=\"bottom right\"\r\n        on=\"click\"\r\n        closeOnDocumentClick\r\n        closeOnEscape\r\n        disabled={closeMenu}\r\n        arrow={false}\r\n      >\r\n        <div className=\"top-row-menu\">\r\n          <div className=\"top-row-menu-options-row\">\r\n            Options\r\n            <button className=\"small-icon-button\">\r\n              <img\r\n                src=\"assets/close.svg\"\r\n                alt=\"Close menu icon\"\r\n                onClick={() => setCloseMenu(true)}\r\n              />\r\n            </button>\r\n          </div>\r\n          <div\r\n            onClick={() => {\r\n              setCloseMenu(true);\r\n              onResolve();\r\n            }}\r\n          >\r\n            Resolve\r\n          </div>\r\n          <div onClick={() => setCloseMenu(true)}>Edit</div>\r\n          <div\r\n            onClick={() => {\r\n              setCloseMenu(true);\r\n              onResolve();\r\n            }}\r\n          >\r\n            Delete\r\n          </div>\r\n        </div>\r\n      </Popup>\r\n    </div>\r\n  );\r\n}\r\n","import { addDays } from \"./CommentsColumn/Comment/TopRow/TopRow\";\r\n\r\nexport default [\r\n  {\r\n    id: 1,\r\n    author: \"Steve Singh\",\r\n    date: new Date().getTime(),\r\n    text:\r\n      \"I dont like how the openings end before the bottom of the black canvas, what can we do about this?\",\r\n    camera: {\r\n      position: [3.6724893617668513, 0.10448181831762553, -0.10443959458119491],\r\n      focus: [0, 0, 0]\r\n    },\r\n    activeVariationIds: { 1: true },\r\n    thread: []\r\n  },\r\n  {\r\n    id: 2,\r\n    author: \"Ed Lazowska\",\r\n    date: addDays(new Date(), -1).getTime(),\r\n    text:\r\n      \"I'm really proud of the lacing design here, do we think it will be too complicated?\",\r\n    camera: {\r\n      position: [-0.2391278466290959, 0.2413250726086689, 1.7599386342780603],\r\n      focus: [0, 0, 0]\r\n    },\r\n    activeVariationIds: { 1: true },\r\n    thread: []\r\n  },\r\n  {\r\n    id: 3,\r\n    author: \"Dan Levitan\",\r\n    date: addDays(new Date(), -2).getTime(),\r\n    text:\r\n      \"I love the differnent fonts, but make the nike and zoom closer together in size\",\r\n    drawOver:\r\n      \"NrDeCIA9wLgBgHQGYCsSBMB2AbKjO91sAacAT1kQBYAOOATgEZs4k40rVHHMBfYiNHjIU2RujSjxksaQrCqmenDgFUNTJhrYJ-QZRE16mTiiMnU9OQcWYG9dEmzYq49Iyp6oBpxkXa-LVxHawVMDBp0KiosWgZmLyFEJ0wUdxS0xgyUUOpMLJM4KjM4RjTsPgFvYSQ7WtY6xtYc8ht82qoikrKiSv0akxckDSohkedchFH6UdFaGhQqejEaTyqk5C0mcK2eWqNJ0dSUTAlGZRokZfpEnxoeZ2GH3HuaQ4qUE7OLq+wb9buLCuNG0rHoIJYVHecxBi2WjEu6Dg2FuNRB6IxmKsrQUuEKxToPQq6FRyXoSGYjnJlKuFJa8moeM6BNK5VOpOQxlM5m5XMOKHoDicLjcBTW-WopTsMylDE6PH5gsczlc6HSJg5zM+qy6ZmZJBx1G6bJ4n1OKE1cBBFIul3OVtW-MJJuO5s13GwdCYzC93Ew-LEyI0cDVylULndFPYrijiyyjADjCDdlDKhw4uq1D2ux2Rj2BoZUykyZD6DD6c1SLVSirWAcIcTJdT4YzGxizDS7ewnfcFUbnpTZbTEYBCgkDgF46nAqQ-eDzYro+o6A0Jgcq6WK7ehqLgYHpfLI4lUwpOlpNOpLjng8PrZs6i5D4sAuvB+Hd4UtQw5y-7nJ4VfBcj0zKZ5WlMC5VKAsbDjcFFAiKIYj6EDolQtD0OiflXDg8IV0QrBNUUMskGiU5yVI2cd2KICkHUTQNE1FBShiYpmKiJisn5Gi6K0ZC20WVwBQEsp6AErih3DWizHoviYNOFxRPkpYvnpGDuOk3jGO0IwCU9GZpPEw8pNXBilymMQ0FWCzhlGMpoIUNIJLUDTTOPUZOHGDzBk4f0qMcoyeNclDu3uc4Qu4ZYzEM4djJkzVPWcBgEpYZYNGiyTAtksIynsfImMFPKoT81h7gqckjApMsLTMxReWfHkSP5ErmCUYZqSqzVNCRJQutUYxTiap4yrayrRM1e5aA8Cbpo8VSFFmFxYSWFYMCQcbODYWgNqKVZKMLaJu0WhZloRVbxvyJRaAumYNAVKiFvmOEVscTUmGowVZrLN69psA6YWO+FLler4FJB5STEOP6jqe07XoWVIlnhuFtEh2JfSBdgSOq48OJY3H2NZVGTHR1hMeKDkmKQ1AiiwanOCJuImAxjhsZApj8jVdm3HZ9AGZJtgWYp7hflKLJllFor9qQxnmFJwWzJQDwCaV1ilb5+JmaxoXwNlGUeATe6rV+GZDsetaFfOGY2EtzgGyokbxH6+xHCyxBHJrUsPerQ4HbLTRndqCmsGRT5g+7NJ8h9irHf9pVA4VilaOUROrlYDwo-ap249dhAOAROgSPz1gYgz0bY6FHO0Caeoa8j+3o796UK4pmMkzjWMY1LmOm5dlvBNE6IRIE3n68z8ve4VrbaJ27atq7xuA8rxW8PYcRIlXn7PwbrPm4V9u29b6MDf232d4nnHRHBFRL7odg-nns-44v8EhwFSJlDfh-x6ftmdAqOg-5aGREQH2N4Yp0RRArZwok7J-EVqIe+9swEZWkpAnGHMJCqG5lgze1B6jqQ0GgtmhQSGdFIcfe8yDnKEIpj1U4fVepKG3CfKhuAIEUx1MUPUupHRILfCgmhCtrT2mEbaXBJ5WGxSIRsScsiJzyJAXwghOAKapUSmolKnpQH8OoSohWBUcoGPysYbRyjpEGBYBIEUIY5hJgkKYpybDUEchYPvI+HcHEBWcWZFgkQdBJj8e4K0I8WE6KcYI48YhuDRJiTEkJlCwlSJcWUGy1krJlElgksxyTIi0RWI4JwCJ4mfkkewnxQTAkBKIO4ChJTEllMiRIVAYgmlSAkJkup2TynLDLDoHp-TfKhK6ZEpOadRkp2xEMxxSSfFPBwC8Z4wxil4NKd4yJeM2KqxYp48BayQIuGJE4I4yojg7IEXo9ZM1JrXPuGc3R5jhDdlyoY4whi7nhIufs0Odhw5h0+OIny9S9kbHCmFMwEVwrvJmZEzR2hYXqKhQ0-Z3Yoi9h7B2AF+DplIpBZ6eIPp8WelqSsoFETkUwIQRS6Bc0SXDP2acI5hyDkMsRcCixqR0gfE5akTFqyyUgqAYAgBvRblKOxWyx5uTClSvyby0lnyQWXBwEGWoLBPTDFZfyixcKko6o0ZqhVFixEiLtBcA1DzEB-EcOGIUNqQhiq8Vqx5VK4GwNEssk829v45z+KCyKoVIqQyNtcB6sJzaRMFLbG21tBQ0tAsGv4oaFjhpAnYK0iw03HUzUGy4IbTZho5IOL2dYqwAs6LmxN+bk2FtXivZe680g5uNkmtANbfk-O+SHJteb-qtrMjrHgkFB0zHVkzOWWt+1VP8cE6dzDfpow1uO8mk7OZYNXRg0dssBYTuPBgrm663Cbs1su3dWQuVno5QUSGLaTpA0ncYvKzzFbXqrTDO9p7Lq3U-fkOd80b2AxTRsfI-5vwgb-B06gW1cKRGiGjRghbur9UQ71X9kHVjQfwsTeD-bkP0LoUiVDoF0MIVg1hhDaoKOUao4NUqrVt6syA5gvda6zg0ZauVTODGDCnGLbxyZalxUmRzmREiRFyJiYg0WbCxG8KkcLWwHAtrFPWsGTBaT8FZNIXk3+X8P5cIeuKHuecjiPyIFwnp0Dv4DPFn3EBUzCBwjSoKbKpwTpWS9FNCpeTlNaY+fCM+vyccVSig6N5mm-nwtcEVEKYLaoxTyeZScplknbKImREmWzgHuOMoZYlo57wOhdGdL0Ek-b9jbHK9mfjuJCssiJOyMrl4qSnipCl19t6MDIkLV2dFKKYgGfawBpEFqHM9dRR2VFA3XTfATf8XddUFuuaopW3tt77P1UfGYR89lGQm1W4DdbWzlZ42JVMdo+JjS9G6-jI7xRTuKDFEV9zFRutjG8sMbyhwMOkZliNkwQRAgBCiEoL7JHpbo26+uTQm4Nzki+4rH4PbuyFv3Ux7Bqmwg92FKqdw63Uf49UF9rHsXcco+5ZkDI7gvuOvojoLjwhL2U4vZkQ4-MyZcB4Cj5p0hudNJ21MNnHAOfCZkDztpaB+e0E0wusdWWGei9aS0iXrPpfE0XXLszCutdLf2jJmD4OGBc-F7z5XVE9eYcZkbpXJudc2DhTjx7BIrdi+t5L+3IWLs0Gd4rnnbuAbPXS8iEXiMTjI1D0sVn-vTrDYy8H8E4f48I2q9QZQdWXSiBR9YqxrgbFXioqny7FRTR-ZOJcRQpeSKpC0IcGLIo4u1fp5rhRcjxwAtrw7hvKPm-d7bwb2XmMS-d+nHD-Pfet0D678P4fbfBckS4HjofciZ-q-Z4rBfU+l+TEbw5lvu+R+Fm38q9VR+lVqq36URHK2FKFrVaflVR-z8iObabObqbZ3VKnVTncTEhp0bHjfipD-GdL-A-ZqYaL1AAz-KA8-FSJ-ENYTd-RAkAgwdmD5IIccP7JA6A7-c5dAgUTAwArA8-Aec4c3aISA4A7A0AkgnCMHCgypSgrfbgViX-DjDXBzLAxg7-Zgn-WjNg+goAypJg2KPAgeUrXdTgoQ7gkQ7QccRYcQt-QgpQ07eBDzabBHbDCQ5Qrgg-fWdQkRdbSQj-Jgi6M0GbVYAQog7gy-PbI6Sw5QpgmwpNewqglApEILOvdUFwnQtwgOEnAobwqQg-ZRTSftIw-xLfEIoKIDcI5A4QTsWfUwG-e-W-VVZESIovfQi4QwlI3I-nNIWQoSdTXCSfPfVvSIwomgmTUoxfffFA7dUwHgkqBQoDCvcvLQSvUvLfBojnFgyIFHDo9osvKvQjNAC3fmTQ1NWxXPHPbPbo8Y9XSY1okPJPJGCPb-OfRWWaMApQFHFYsPJPbounKojTL3ftCnc9JnLfToXA2QkvFjAnDHN2G43RdAv7GHaHKHNccRWCMgpCQ-dyD7QEzya40+ceQ7G7SElQtPNQsw7rNFcbPrNUa47+EnFo7jMhTE1QLEp43OVQzIswhHeTHMSrHYZPPE+rTzc0c4BLY5HLE5LfIXLYvon0MLKmPzKLb-JkpooaM43dSzczMDD1T4bk7YoaeTO1BTK1BTRk6kpw5wBDPjWsEHLkuU2bUYP7IgcGLUxSIgONT4fvUUw-JLXLOk3EmzYzIyQtCzHTQUyTUQBeDw1Ua079HgG6H9LfaGDrYbdEhnF5R9IxFQr0obYBa0g9cM4U4MgPHQGtPWAdcCT0x6b00M-tBhPDJDK0RMpaEMmM1M9tEOCOLtb-KM6PFM3dBoCs2uBoLMqPNLXM8s9NRQFQLNZsmst9Tres-ZSNGNK2C-USNs5MzskFf1CFcFMFAcnM30y1MDG0vTCc6MqchAPSXSHSMwPSfUksusxcz0AuVwEEYufOec0soc7VdRZKXVCYYs8AsefIFxBYBERWe8p8xtK8v-MuW8nxGVIpPJb8z06898pY7VQlX0AlckhBN87uQCx5QVEVYBf+IM-8yClxeZOZR4e4eZP8iCxuKCy1XMCrEk0Y2zcVV-AVE0sin4oirxEi9lIdeMhgT0y03Zaix5V1SleBalBi1ZZiy1PFb0Xij0UVA-SipilxJEibHrCixilBbipchZFC9CtCzioFGSs8vVc8sC4S6SlxMckcsFQSlAzS5yFStit1di80wypxYy1JFJdJNAMCn5DLKSn1B9f0t5b-BypsJyFxOkvLZlLfDywy7yoEt7QE+ywPQKnxWY6Y7Pbgfy8KpylxVCuStC4UgKhK2ZMYggTK3ARYOKozKhRK4HIHfwYIfUtKgq2ZA+eMdxWK9y+KiqxpBtNeJEetVK+qnRFxH3Lq3Kuq-Kjq8pNHCMsq9qhcTqqAyglQ8q-qyJb8pzH8yIfy8w5-DPHxGy2ySyda+0tUitWw5JEWYWcWZgxahHdUw6ZJWJC67gVKpapHFxC8+FFKc07a5akbVIk-NIrRdym6q-O6txP6ra763anxUWfasWFgcQY6uAn6-Rd+dgF+D+cEH45626-RdStG0Y5G6GnGWoqcfIzGoGnGBqLbDbDGwGhaDhZctc1c7SSG+UlawmwQxmvGsms6hWfDNMxDUmk6na8mtm6UyUm1Wm06+m4hHEsWyalmkWmRZjGWziL67ml6imY-N62-AGhWlGnGLPaK2xIWnm1mzWl3Q2pGyWkbbULUbhLhXhA-fG3mi+EU+2h20QXWxWveZq2tJq429WrGtmS282zhJ2+WqGgmn23zSLPzZ2jWtmYEUEaOoEQUCO72mRQufc5O3c66r24OpOrIVOCZNONWoO22tmP5Qs9tCWjOwumRRE3rHsBOzOtw5ncnXHWuiulA4dCCOMsugu-WtmFWSEtiZu7umRA68GsGiWAeqWlAp9J9Tuum02h4+egaQO2eimMO1e+mJe4Wue3uzZDiMqk216AM15Fy-O5emqL4j4tcMscekbeYOOiEMECEa+9aaeKeTaXaJ+mqK5L+2aD+tyRhDM-DX+lCEYzowY1ILmruiesIYiUiGBiTIBtsTNDNZs5Bmeze+KNSzBp6-emqZLPBxe62nBtyP1EhqKDevWqBxkLyYE97bB8uwemwNJda6ygOwh+hyh8yEGw60etBihm+qm-SbSQRuhyB-hpSXU0Gc0BBtTfuYSIok+9Bmqdi1i6lZgaRhyHezRuWth0RwiL9d0t0q6T23RmqMTUTETCidRyDDCGxhRvhwiHsqNbsqx0CIeQeeRtR8hl2tydu3xqCFxnyAUoJgJp8RbF8LxyOtsF+3aN+7aPe9hm+lrc8M8S8Ox7xlCRxzJu2HR0+tyUO9kyLYx3JlCDfHvAJ47Cp4oIpxRvJqUpTaU3h9JtsZU+sasVpgJouVOg8kEDpjxvp5YDp96N6NID6QzDpjuaq-eDpmYuxaKrakarymqB0G0ZZk1eZvq0apZ0hbEnZiGXqxyhqlCOG2Gt+IcfIiyqSGSzoXOm5hCrC-qHCqYFQFcJYZ51YMMLATCtgpCsyWOh+mO8ENKV8757CjkK4DbCF+0zcjsxc0GuFgZ4sx09vcQMFprZJ5rMoT0g5xJVFsZHO7O5OLFzyq035zEMl9EDS7FmiMFzyYK6h+0gUcfI0mlu+gF++hlm2hU0l5h2y1JDllmkbJKoV14Rk0UlkwV3czpvcguUVzYnk0qMFkkpVg4LkuVsU0qPkkCWoS+2HFcaHc0sV3g1k3597Wl8YfI-E0w2AmS3TGcsDa4nMg5xVwx-Rq6BEFE4nTw2F66N1100Y2wPwr1sFymoRlc-s7-GEgkr4YN6mkN9c64wvK1hrY8YUe6+66EsEnuezeknNlwc0jyG852bN4IEqwHYIH44osHLAbfOa2tlaa40g04zDGt1l1toobovgzNsF4msJsC1grt35hPNYxPfIpwOQytlcbt63Y3KQI48dxt6DbtpsxspBxQboxo9V9jbt-AHKndwgUdhY2XR5rgZ8h8s9lGDYw9rdY9jk299tjY1feV2F15kMd5t59Yg-Ho5k3g59kBoYyvfIlcY434jTMF-98DnADIpN8w7NnluDiySI37JdVAMDphtDzF7-KInOcxuBix2qSIwNjvbD2B8TPDvZ3Q2e+YMDqVmjsCvQwkgw6jlO6Vg8uj9Pa149v2rjooH47OlyYDmIMDnhbj9e3Qzd-8sF-F8ZAl1gJg8Tt8yT5OGTm54gkD77bNqTzTwlnAk49TxTvFpT8Zc-V4yowVrTgz2TnAkz44szwz8zn49gG27D+z5T8-ftiA35lzoznA9z--TzuzgLyz0A0RpYfT257z4Lyjm1rznOrfML5T1z7-eL6TiLmwK+Q0uVjTwLlT-PRI+fZL+zmvaMqloT324TnjmvMfTWQVkTs2ir0fGXJlpwJjyV5j84Srxr6rsD6J2eGJjrtXDLmrsxkj8xlLGYTr8dIbsj3Dsbqryb1Dta9DuNTcbHD3LUBbjapbmvZUTwx3GtiDtoyD-PHboj9b35g7sByXZF+vC7MDj5t919j9tLk7tbroO799+7p7hQa79UM7lNu9gpsbl7m7v7rVx88H89x8q74H37t7wdyHhHi9-aH7vb7drAXd9H-d7b1bkHuH-7vd7KrH47nH2Hk9MH5dlsldmvJ7Sk1IQV5BldlBtd-PGn9PeninhnrNanyN0w9n1d-nyPdsmPIPJd-npn3E2gfwhvTVjYVADn+XiX93XHp3QdhX8X1nJtn7L0UX8X9Xs3TXvvHXxnqns3VXJD9guXsXk33XM3-mI3ynrns3FfUUvgAAXVd6AA\",\r\n    camera: {\r\n      position: [\r\n        1.2556252511652628,\r\n        -1.8845128318655633,\r\n        -0.006335531414734807\r\n      ],\r\n      focus: [1.2637327202535016, 0, -0.09982552431336995]\r\n    },\r\n    activeVariationIds: { 1: true },\r\n    thread: []\r\n  }\r\n];\r\n","import LZString from \"lz-string\";\r\nimport { createStore } from \"redux\";\r\nimport comments from \"../comments\";\r\nimport {\r\n  ADD_COMMENT,\r\n  ADD_REPLY,\r\n  ATTACH_DRAW_OVER,\r\n  ATTACH_FILE,\r\n  ATTACH_PIN,\r\n  BEGIN_COMMENT,\r\n  CANCEL_COMMENT,\r\n  CHANGE_CAMERA,\r\n  CLOSE_THREAD,\r\n  DESELECT_COMMENT,\r\n  OPEN_THREAD,\r\n  RESOLVE_COMMENT,\r\n  RESOLVE_REPLY,\r\n  SELECT_COMMENT,\r\n  UNATTACH_DRAW_OVER,\r\n  UNATTACH_FILE,\r\n  UNATTACH_PIN,\r\n  UPDATE_DRAWING,\r\n  MOVE_CAMERA,\r\n  SELECT_VARIATION,\r\n  DESELECT_VARIATION\r\n} from \"./actions\";\r\n\r\nexport const CURSOR = {\r\n  DEFAULT: \"pointer\",\r\n  DRAWOVER: \"drawover\",\r\n  PIN: \"pin\"\r\n};\r\n\r\nexport const INITIAL_CAMERA_POSITION = [0, 2, 4];\r\n\r\nconst initialState = {\r\n  cursor: CURSOR.DEFAULT,\r\n  cameraPosition: { position: INITIAL_CAMERA_POSITION, focus: [0, 0, 0] },\r\n  isCommenting: false,\r\n  fileIsAttached: false,\r\n  drawOverIsAttached: false,\r\n  pinIsAttached: false,\r\n  maxCommentId: 3,\r\n  activeVariationIds: { 1: true },\r\n  variations: [\r\n    {\r\n      id: 1,\r\n      name: \"Shoe V1\",\r\n      thumbnail: \"assets/iteration_1_thumbnail.png\",\r\n      model: \"models/gltf/nike_shoe/scene.gltf\"\r\n    },\r\n    {\r\n      id: 2,\r\n      name: \"Shoe V2\",\r\n      thumbnail: \"assets/iteration_2_thumbnail.png\",\r\n      model: \"models/gltf/sneaker/scene.gltf\"\r\n    },\r\n    {\r\n      id: 3,\r\n      name: \"Shoe V3\",\r\n      thumbnail: \"assets/iteration_3_thumbnail.png\",\r\n      model: \"models/gltf/Avocado/Avocado.glb\"\r\n    },\r\n    {\r\n      id: 4,\r\n      name: \"Shoe V4\",\r\n      thumbnail: \"assets/iteration_4_thumbnail.png\",\r\n      model: \"models/gltf/microphone/scene.gltf\"\r\n    }\r\n  ],\r\n  comments: comments\r\n};\r\n\r\nfunction rootReducer(state = initialState, { type, data }) {\r\n  function cameraPositionEquals(camera1, camera2) {\r\n    return (\r\n      camera1 === camera2 ||\r\n      (camera1 &&\r\n        camera2 &&\r\n        camera1.position.every(\r\n          (p, i) => Math.abs(p - camera2.position[i]) < 1e-10\r\n        ) &&\r\n        camera1.focus.every((f, i) => Math.abs(f - camera2.focus[i]) < 1e-10))\r\n    );\r\n  }\r\n\r\n  switch (type) {\r\n    case CHANGE_CAMERA:\r\n      const selectedComment = state.comments.find(\r\n        ({ id }) => id === state.selectedCommentId\r\n      );\r\n      if (\r\n        selectedComment &&\r\n        !cameraPositionEquals(selectedComment.camera, data)\r\n      ) {\r\n        return {\r\n          ...state,\r\n          cameraPosition: data,\r\n          selectedCommentId: null,\r\n          drawing: null\r\n        };\r\n      }\r\n      return { ...state, activeCameraPosition: null, cameraPosition: data };\r\n    case MOVE_CAMERA:\r\n      return { ...state, cameraPosition: data };\r\n    case SELECT_COMMENT:\r\n      return {\r\n        ...state,\r\n        selectedCommentId: data.id,\r\n        cameraPosition: data.camera ? data.camera : state.cameraPosition,\r\n        activeVariationIds: data.activeVariationIds\r\n          ? data.activeVariationIds\r\n          : state.activeVariationIds,\r\n        drawing:\r\n          data.drawOver &&\r\n          JSON.parse(LZString.decompressFromEncodedURIComponent(data.drawOver))\r\n      };\r\n    case DESELECT_COMMENT:\r\n      return { ...state, selectedCommentId: null, drawing: null };\r\n    case RESOLVE_COMMENT:\r\n      return {\r\n        ...state,\r\n        comments: state.comments.filter(({ id }) => id !== data.id)\r\n      };\r\n    case RESOLVE_REPLY:\r\n      return {\r\n        ...state,\r\n        comments: state.comments.map(comment =>\r\n          comment.id === data.comment.id\r\n            ? {\r\n                ...comment,\r\n                thread: comment.thread.filter(({ id }) => id !== data.reply.id)\r\n              }\r\n            : comment\r\n        )\r\n      };\r\n    case BEGIN_COMMENT:\r\n      return { ...state, isCommenting: true };\r\n    case ATTACH_FILE:\r\n      return { ...state, fileIsAttached: true };\r\n    case UNATTACH_FILE:\r\n      return { ...state, fileIsAttached: false, attachedFile: null };\r\n    case ATTACH_DRAW_OVER:\r\n      return { ...state, drawOverIsAttached: true, cursor: CURSOR.DRAWOVER };\r\n    case UNATTACH_DRAW_OVER:\r\n      return {\r\n        ...state,\r\n        drawOverIsAttached: false,\r\n        drawing: null,\r\n        cursor: CURSOR.DEFAULT\r\n      };\r\n    case ATTACH_PIN:\r\n      return { ...state, pinIsAttached: true, cursor: CURSOR.PIN };\r\n    case UNATTACH_PIN:\r\n      return {\r\n        ...state,\r\n        pinIsAttached: false,\r\n        attachedPin: null,\r\n        cursor: CURSOR.DEFAULT\r\n      };\r\n    case CANCEL_COMMENT:\r\n      return {\r\n        ...state,\r\n        isCommenting: false,\r\n        fileIsAttached: false,\r\n        attachedFile: null,\r\n        drawOverIsAttached: false,\r\n        drawing: null,\r\n        pinIsAttached: false,\r\n        pin: null,\r\n        cursor: CURSOR.DEFAULT\r\n      };\r\n    case ADD_COMMENT:\r\n      return {\r\n        ...state,\r\n        maxCommentId: 1 + state.maxCommentId,\r\n        comments: [\r\n          {\r\n            id: 1 + state.maxCommentId,\r\n            author: \"Greg Gottesman\",\r\n            date: new Date().getTime(),\r\n            text: data,\r\n            file: state.file,\r\n            drawOver: LZString.compressToEncodedURIComponent(\r\n              JSON.stringify(state.drawing)\r\n            ),\r\n            pin: state.pin,\r\n            camera: state.cameraPosition,\r\n            activeVariationIds: state.activeVariationIds,\r\n            thread: []\r\n          },\r\n          ...state.comments\r\n        ]\r\n      };\r\n    case ADD_REPLY:\r\n      return {\r\n        ...state,\r\n        maxCommentId: 1 + state.maxCommentId,\r\n        comments: state.comments.map(comment =>\r\n          comment.id === data.comment.id\r\n            ? {\r\n                ...comment,\r\n                thread: [\r\n                  {\r\n                    id: 1 + state.maxCommentId,\r\n                    author: \"Greg Gottesman\",\r\n                    date: new Date().getTime(),\r\n                    text: data.text,\r\n                    file: state.file,\r\n                    drawOver: LZString.compressToEncodedURIComponent(\r\n                      JSON.stringify(state.drawing)\r\n                    )\r\n                  },\r\n                  ...comment.thread\r\n                ]\r\n              }\r\n            : comment\r\n        )\r\n      };\r\n    case OPEN_THREAD:\r\n      return { ...state, activeThreadId: data.id };\r\n    case CLOSE_THREAD:\r\n      return { ...state, activeThreadId: null };\r\n    case UPDATE_DRAWING:\r\n      return { ...state, drawing: data };\r\n    case SELECT_VARIATION:\r\n      return {\r\n        ...state,\r\n        activeVariationIds: { ...state.activeVariationIds, [data.id]: true }\r\n      };\r\n    case DESELECT_VARIATION:\r\n      return {\r\n        ...state,\r\n        activeVariationIds: { ...state.activeVariationIds, [data.id]: false }\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default createStore(rootReducer);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { unattachDrawOver, unattachPin } from \"../../redux/actions\";\r\nimport { CURSOR } from \"../../redux/store\";\r\nimport \"./CommentsColumnHeader.css\";\r\n\r\nfunction CommentsColumnHeader({\r\n  headerText,\r\n  iconImage,\r\n  className,\r\n  redrawEnabled,\r\n  repinEnabled,\r\n  onRedraw,\r\n  onRepin,\r\n  ...props\r\n}) {\r\n  return (\r\n    <div\r\n      className={\r\n        \"comments-column-header-row\" + (className ? \" \" + className : \"\")\r\n      }\r\n      {...props}\r\n    >\r\n      <div>\r\n        {iconImage && (\r\n          <img\r\n            className=\"comments-column-header-icon-image\"\r\n            src={iconImage}\r\n            alt=\"Back icon\"\r\n          />\r\n        )}\r\n        <span className=\"comments-column-header-text\">{headerText}</span>\r\n      </div>\r\n      {!iconImage && redrawEnabled && (\r\n        <button\r\n          className=\"comments-column-header-redo-button\"\r\n          onClick={onRedraw}\r\n        >\r\n          Redraw\r\n        </button>\r\n      )}\r\n      {!iconImage && repinEnabled && (\r\n        <button\r\n          className=\"comments-column-header-redo-button\"\r\n          onClick={onRepin}\r\n        >\r\n          Repin\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  ({ cursor, drawing, pin }) => ({\r\n    redrawEnabled: cursor === CURSOR.DRAWOVER && drawing,\r\n    repinEnabled: cursor === CURSOR.PIN && pin\r\n  }),\r\n  dispatch => ({\r\n    onRedraw: () => {\r\n      dispatch(unattachDrawOver());\r\n    },\r\n    onRepin: () => {\r\n      dispatch(unattachPin());\r\n    }\r\n  })\r\n)(CommentsColumnHeader);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport \"./Comment.css\";\r\nimport { TopRow } from \"./TopRow/TopRow\";\r\nimport { CURSOR } from \"../../redux/store\";\r\nimport { unattachDrawOver } from \"../../redux/actions\";\r\n\r\nfunction Comment({\r\n  comment: { text, drawOver, pin, ...comment },\r\n  selected,\r\n  redrawEnabled,\r\n  onRedraw,\r\n  onResolve,\r\n  children,\r\n  ...props\r\n}) {\r\n  return (\r\n    <div className={\"comment\" + (selected ? \" selected\" : \"\")} {...props}>\r\n      <div className=\"comment-content\">\r\n        <TopRow\r\n          {...comment}\r\n          redrawEnabled={redrawEnabled}\r\n          onRedraw={onRedraw}\r\n          onResolve={onResolve}\r\n        />\r\n        <p className=\"comment-text\">{text}</p>\r\n        {children}\r\n      </div>\r\n      <div className=\"comment-flag-row\">\r\n        {drawOver && (\r\n          <img\r\n            className=\"comment-flag\"\r\n            src=\"assets/drawover-flag.svg\"\r\n            alt=\"Drawover flag\"\r\n          />\r\n        )}\r\n        {pin && (\r\n          <img\r\n            className=\"comment-flag\"\r\n            src=\"assets/pin-flag.svg\"\r\n            alt=\"Pin flag\"\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  (\r\n    { cursor, activeThreadId, selectedCommentId, drawing },\r\n    { comment: { id } }\r\n  ) => ({\r\n    selected: id === selectedCommentId,\r\n    redrawEnabled:\r\n      id === activeThreadId && cursor === CURSOR.DRAWOVER && drawing\r\n  }),\r\n  dispatch => ({\r\n    onRedraw: () => {\r\n      dispatch(unattachDrawOver());\r\n    }\r\n  })\r\n)(Comment);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { cancelComment, openThread, selectComment } from \"../../redux/actions\";\r\nimport Comment from \"../Comment/Comment\";\r\nimport \"./MainComment.css\";\r\n\r\nfunction MainComment({\r\n  comment: { thread, ...comment },\r\n  onClickReply,\r\n  ...props\r\n}) {\r\n  function replyLabel(thread) {\r\n    if (thread && thread.length > 0) {\r\n      if (thread.length > 1) {\r\n        return `${thread.length} Replies`;\r\n      } else {\r\n        return \"1 Reply\";\r\n      }\r\n    } else {\r\n      return \"Reply\";\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Comment comment={comment} {...props}>\r\n      <button\r\n        className=\"reply-button\"\r\n        onClick={event => {\r\n          event.stopPropagation();\r\n          onClickReply();\r\n        }}\r\n      >\r\n        {replyLabel(thread)}\r\n      </button>\r\n    </Comment>\r\n  );\r\n}\r\n\r\nexport default connect(null, (dispatch, { comment }) => ({\r\n  onClickReply: () => {\r\n    dispatch(cancelComment());\r\n    dispatch(selectComment(comment));\r\n    dispatch(openThread(comment));\r\n  }\r\n}))(MainComment);\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { ConfirmResolve } from \"../../ConfirmResolve/ConfirmResolve\";\r\nimport {\r\n  addComment,\r\n  cancelComment,\r\n  deselectComment,\r\n  resolveComment,\r\n  selectComment\r\n} from \"../../redux/actions\";\r\nimport CommentInput from \"../CommentInput/CommentInput\";\r\nimport CommentsColumnHeader from \"../CommentsColumnHeader/CommentsColumnHeader\";\r\nimport MainComment from \"../MainComment/MainComment\";\r\nimport \"./MainThread.css\";\r\n\r\nfunction MainThread({\r\n  isCommenting,\r\n  comments,\r\n  onAddComment,\r\n  onClickComment,\r\n  onResolveComment,\r\n  ...props\r\n}) {\r\n  const [resolveCommentId, setResolveCommentId] = useState();\r\n\r\n  return (\r\n    <div id=\"comment-column\" {...props}>\r\n      <div id=\"input-column\">\r\n        <CommentsColumnHeader headerText=\"Comments\" />\r\n        <CommentInput pinAttachable mainThread onClickSubmit={onAddComment} />\r\n      </div>\r\n      <div className={\"scroll-column\" + (isCommenting ? \" focused\" : \"\")}>\r\n        {comments.map(comment => (\r\n          <MainComment\r\n            key={comment.id}\r\n            comment={comment}\r\n            onClick={() => onClickComment(comment)}\r\n            onResolve={() => setResolveCommentId(comment.id)}\r\n          />\r\n        ))}\r\n        {isCommenting && <div id=\"comment-vignette\"></div>}\r\n      </div>\r\n      <ConfirmResolve\r\n        isModalOpen={resolveCommentId}\r\n        onCancel={() => setResolveCommentId(null)}\r\n        onResolve={() => {\r\n          onResolveComment(comments.find(({ id }) => id === resolveCommentId));\r\n          setResolveCommentId(null);\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  ({ isCommenting, selectedCommentId, comments }) => ({\r\n    isCommenting,\r\n    selectedComment: comments.find(({ id }) => id === selectedCommentId),\r\n    comments\r\n  }),\r\n  dispatch => ({\r\n    onAddComment: comment => {\r\n      dispatch(addComment(comment));\r\n      dispatch(cancelComment());\r\n    },\r\n    selectComment: comment => dispatch(selectComment(comment)),\r\n    deselectComment: () => dispatch(deselectComment()),\r\n    resolveComment: comment => dispatch(resolveComment(comment))\r\n  }),\r\n  (\r\n    { selectedComment, ...stateProps },\r\n    { selectComment, deselectComment, resolveComment, ...dispatchProps },\r\n    ownProps\r\n  ) => ({\r\n    ...ownProps,\r\n    ...stateProps,\r\n    ...dispatchProps,\r\n    onClickComment: comment =>\r\n      comment !== selectedComment ? selectComment(comment) : deselectComment(),\r\n    onResolveComment: comment => {\r\n      if (comment === selectedComment) {\r\n        deselectComment();\r\n      }\r\n      resolveComment(comment);\r\n    }\r\n  })\r\n)(MainThread);\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { ConfirmResolve } from \"../../ConfirmResolve/ConfirmResolve\";\r\nimport {\r\n  addReply,\r\n  cancelComment,\r\n  closeThread,\r\n  deselectComment,\r\n  resolveComment,\r\n  resolveReply,\r\n  selectComment\r\n} from \"../../redux/actions\";\r\nimport Comment from \"../Comment/Comment\";\r\nimport CommentInput from \"../CommentInput/CommentInput\";\r\nimport CommentsColumnHeader from \"../CommentsColumnHeader/CommentsColumnHeader\";\r\nimport \"./Thread.css\";\r\n\r\nfunction Thread({\r\n  comment,\r\n  isCommenting,\r\n  onReturn,\r\n  onClickComment,\r\n  onClickReply,\r\n  onAddReply,\r\n  onResolveComment,\r\n  ...props\r\n}) {\r\n  const [resolveCommentId, setResolveCommentId] = useState();\r\n\r\n  return comment ? (\r\n    <div id=\"thread-column\" {...props}>\r\n      <CommentsColumnHeader\r\n        className=\"thread-column-header\"\r\n        iconImage=\"assets/left-arrow.svg\"\r\n        headerText=\"Back to all comments\"\r\n        onClick={onReturn}\r\n      />\r\n      <Comment\r\n        comment={comment}\r\n        onClick={() => onClickComment(comment)}\r\n        onResolve={() => setResolveCommentId(comment.id)}\r\n      >\r\n        <CommentInput\r\n          onClick={e => e.stopPropagation()}\r\n          onClickSubmit={text => onAddReply(comment, text)}\r\n        />\r\n      </Comment>\r\n      <div className=\"scroll-column\">\r\n        {comment &&\r\n          comment.thread.map(reply => (\r\n            <Comment\r\n              key={reply.id}\r\n              comment={reply}\r\n              onClick={() => onClickReply(reply)}\r\n              onResolve={() => setResolveCommentId(reply.id)}\r\n            />\r\n          ))}\r\n        {isCommenting && <div id=\"reply-vignette\"></div>}\r\n      </div>\r\n      <ConfirmResolve\r\n        isModalOpen={resolveCommentId}\r\n        onCancel={() => setResolveCommentId(null)}\r\n        onResolve={() => {\r\n          onResolveComment(\r\n            [comment, ...comment.thread].find(\r\n              ({ id }) => id === resolveCommentId\r\n            )\r\n          );\r\n          setResolveCommentId(null);\r\n        }}\r\n      />\r\n    </div>\r\n  ) : null;\r\n}\r\n\r\nfunction mergeProps(\r\n  { selectedComment, ...stateProps },\r\n  dispatchProps,\r\n  ownProps\r\n) {\r\n  const {\r\n    selectComment,\r\n    deselectComment,\r\n    resolveComment,\r\n    resolveReply,\r\n    ...restOfDispatchProps\r\n  } = dispatchProps;\r\n\r\n  return {\r\n    ...ownProps,\r\n    ...stateProps,\r\n    ...restOfDispatchProps,\r\n    onClickComment: comment => {\r\n      if (!stateProps.isCommenting && comment !== selectedComment) {\r\n        selectComment(comment);\r\n      }\r\n    },\r\n    onClickReply: comment =>\r\n      comment !== selectedComment ? selectComment(comment) : deselectComment(),\r\n    onResolveComment: comment => {\r\n      if (comment === selectedComment) {\r\n        deselectComment();\r\n      }\r\n      if (comment === ownProps.comment) {\r\n        resolveComment(comment);\r\n      } else {\r\n        resolveReply(ownProps.comment, comment);\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  ({ isCommenting, selectedCommentId, comments }) => ({\r\n    isCommenting,\r\n    selectedComment: comments\r\n      .flatMap(comment => [comment, ...comment.thread])\r\n      .find(({ id }) => id === selectedCommentId)\r\n  }),\r\n  dispatch => ({\r\n    onReturn: () => {\r\n      dispatch(cancelComment());\r\n      dispatch(closeThread());\r\n    },\r\n    selectComment: comment => dispatch(selectComment(comment)),\r\n    deselectComment: () => dispatch(deselectComment()),\r\n    resolveComment: comment => dispatch(resolveComment(comment)),\r\n    resolveReply: (comment, reply) => dispatch(resolveReply(comment, reply)),\r\n    onAddReply: (comment, text) => {\r\n      dispatch(addReply(comment, text));\r\n      dispatch(cancelComment());\r\n    }\r\n  }),\r\n  mergeProps\r\n)(Thread);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport \"./CommentsColumn.css\";\r\nimport MainThread from \"./MainThread/MainThread\";\r\nimport Thread from \"./Thread/Thread\";\r\n\r\nfunction CommentsColumn({ activeThread, ...props }) {\r\n  return (\r\n    <div id=\"comments-row\">\r\n      <MainThread\r\n        className={\r\n          \"main-thread\" + (activeThread ? \" main-thread-inactive\" : \"\")\r\n        }\r\n        {...props}\r\n      />\r\n      <Thread\r\n        className={\r\n          \"active-thread\" + (!activeThread ? \" active-thread-inactive\" : \"\")\r\n        }\r\n        comment={activeThread}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  ({ activeThreadId, comments }) => ({\r\n    activeThread: comments.find(({ id }) => id === activeThreadId)\r\n  }),\r\n  () => ({})\r\n)(CommentsColumn);\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { HotKeys } from \"react-hotkeys\";\r\nimport \"./DrawCanvas.css\";\r\n\r\nfunction handleUndo(isPainting, setPainting, value, onChange) {\r\n  return () => {\r\n    if (isPainting) {\r\n      setPainting(false);\r\n    }\r\n    value = value.filter(line => line.length > 1);\r\n    if (value.length > 0) {\r\n      onChange && onChange(value.slice(0, value.length - 1));\r\n    }\r\n  };\r\n}\r\n\r\nfunction handleClick(setPainting, onChange, value, ref) {\r\n  return ({ nativeEvent }) => {\r\n    const { offsetX, offsetY } = nativeEvent;\r\n    setPainting(true);\r\n    onChange &&\r\n      onChange([\r\n        ...value,\r\n        [\r\n          {\r\n            x: offsetX / ref.current.clientWidth,\r\n            y: offsetY / ref.current.clientHeight\r\n          }\r\n        ]\r\n      ]);\r\n  };\r\n}\r\n\r\nfunction handleDrag(isPainting, value, onChange, ref) {\r\n  return ({ nativeEvent }) => {\r\n    if (isPainting) {\r\n      const { offsetX, offsetY } = nativeEvent;\r\n      if (value.length > 0) {\r\n        const currLine = value[value.length - 1];\r\n        onChange &&\r\n          onChange([\r\n            ...value.slice(0, value.length - 1),\r\n            [\r\n              ...currLine,\r\n              {\r\n                x: offsetX / ref.current.clientWidth,\r\n                y: offsetY / ref.current.clientHeight\r\n              }\r\n            ]\r\n          ]);\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nfunction convertTouchToMouse(handler) {\r\n  return ({ nativeEvent }) => {\r\n    const canvasRect = nativeEvent.target.getBoundingClientRect();\r\n    const touch = nativeEvent.targetTouches[0];\r\n    handler({\r\n      nativeEvent: {\r\n        offsetX: touch.pageX - canvasRect.left,\r\n        offsetY: touch.pageY - canvasRect.top\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\nfunction paint(canvas, ctx, value, lineWidth, lineColor) {\r\n  if (ctx) {\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    for (const line of value) {\r\n      const [{ x, y }, ...rest] = line;\r\n\r\n      ctx.lineJoin = \"round\";\r\n      ctx.lineCap = \"round\";\r\n      ctx.lineWidth = lineWidth;\r\n      ctx.strokeStyle = lineColor;\r\n\r\n      ctx.beginPath();\r\n      ctx.moveTo(x * canvas.width, y * canvas.height);\r\n      for (const { x, y } of rest) {\r\n        ctx.lineTo(x * canvas.width, y * canvas.height);\r\n      }\r\n      ctx.stroke();\r\n    }\r\n  }\r\n}\r\n\r\nexport function DrawCanvas({\r\n  lineWidth = 3,\r\n  lineColor = \"black\",\r\n  value,\r\n  onChange,\r\n  ...props\r\n}) {\r\n  value = value || [];\r\n  const ref = useRef();\r\n  const width = 1024;\r\n  const height = 1024;\r\n  const [ctx, setContext] = useState();\r\n  const [isPainting, setPainting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!ctx) {\r\n      setContext(ref.current.getContext(\"2d\"));\r\n    }\r\n  }, [ref, ctx]);\r\n  useEffect(() => paint(ref.current, ctx, value, lineWidth, lineColor), [\r\n    ref,\r\n    ctx,\r\n    value,\r\n    lineWidth,\r\n    lineColor\r\n  ]);\r\n\r\n  return (\r\n    <HotKeys\r\n      allowChanges\r\n      className=\"draw-canvas-hotkeys\"\r\n      keyMap={{ undo: [\"command+z\", \"ctrl+z\", \"backspace\"] }}\r\n      handlers={{\r\n        undo: handleUndo(isPainting, setPainting, value, onChange)\r\n      }}\r\n    >\r\n      <canvas\r\n        ref={ref}\r\n        className=\"draw-canvas\"\r\n        width={width}\r\n        height={height}\r\n        onMouseDown={handleClick(setPainting, onChange, value, ref)}\r\n        onMouseMove={handleDrag(isPainting, value, onChange, ref)}\r\n        onMouseUp={() => setPainting(false)}\r\n        onTouchStart={convertTouchToMouse(\r\n          handleClick(setPainting, onChange, value, ref)\r\n        )}\r\n        onTouchMove={convertTouchToMouse(\r\n          handleDrag(isPainting, value, onChange, ref)\r\n        )}\r\n        onTouchEnd={() => setPainting(false)}\r\n        onTouchCancel={handleUndo(isPainting, setPainting, value, onChange)}\r\n        {...props}\r\n      />\r\n    </HotKeys>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { DrawCanvas } from \"../DrawCanvas/DrawCanvas\";\r\nimport { updateDrawing } from \"../redux/actions\";\r\nimport { CURSOR } from \"../redux/store\";\r\nimport \"./DrawOver.css\";\r\n\r\nfunction DrawOver({ interactive, drawing, onChange, children, ...props }) {\r\n  return (\r\n    <div id=\"sketch-container\" {...props}>\r\n      {children}\r\n      <div id=\"sketch-canvas\" className={!interactive ? \"static\" : \"\"}>\r\n        <DrawCanvas\r\n          lineWidth={2}\r\n          lineColor=\"#ff0035\"\r\n          value={drawing}\r\n          onChange={onChange}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  ({ cursor, drawing }) => ({\r\n    interactive: cursor === CURSOR.DRAWOVER,\r\n    drawing\r\n  }),\r\n  dispatch => ({ onChange: drawing => dispatch(updateDrawing(drawing)) })\r\n)(DrawOver);\r\n","import React, { useState } from \"react\";\r\nimport \"./Header.css\";\r\n\r\nfunction Header() {\r\n  const [eyeOpen, setEyeOpen] = useState(true);\r\n\r\n  return (\r\n    <div className=\"head\">\r\n      <button className=\"back-button\">Back</button>\r\n      <div className=\"button-row\">\r\n        <img\r\n          className=\"profile\"\r\n          alt=\"Greg\"\r\n          src=\"https://assets.website-files.com/5d3152346d95065922960b3a/5db769036b1dff3418bffd20_Greg.jpg\"\r\n        />\r\n        <button className=\"AR\" onClick={() => alert(\"more features to come\")}>\r\n          AR\r\n        </button>\r\n        <button className=\"share\" onClick={() => alert(\"share link copied\")}>\r\n          Share\r\n        </button>\r\n        <button className=\"eye\" onClick={() => setEyeOpen(!eyeOpen)}>\r\n          <img\r\n            src={`assets/eye-${eyeOpen ? \"open\" : \"closed\"}.svg`}\r\n            alt=\"Show/hide pins icon\"\r\n          />\r\n        </button>\r\n      </div>\r\n      <div className=\"greeting-row\">\r\n        <span>Nike Zoom Prototype 1</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React, { Suspense, useEffect, useRef, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  Canvas,\r\n  extend,\r\n  useLoader,\r\n  useThree,\r\n  useFrame\r\n} from \"react-three-fiber\";\r\nimport { Box3, Color, sRGBEncoding, Vector3 } from \"three\";\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\r\nimport { changeCamera } from \"./redux/actions\";\r\nimport { INITIAL_CAMERA_POSITION } from \"./redux/store\";\r\n\r\nextend({ OrbitControls });\r\n\r\nfunction Model({ path, activeVariationIds, ...props }) {\r\n  const [model, setModel] = useState();\r\n\r\n  useEffect(() => {\r\n    if (!model) {\r\n      const loader = new GLTFLoader();\r\n      loader.load(path, gltf => {\r\n        var mroot = gltf.scene;\r\n\r\n        //Rescale the object to normalized space\r\n        var bbox = new Box3().setFromObject(mroot);\r\n        mroot.scale.multiplyScalar(\r\n          5 / Math.max(...bbox.getSize(new Vector3()).toArray())\r\n        );\r\n\r\n        //Centering Object\r\n        bbox.setFromObject(mroot);\r\n        mroot.position.copy(bbox.getCenter(new Vector3())).multiplyScalar(-1);\r\n\r\n        setModel(gltf);\r\n      });\r\n    }\r\n  }, [path, activeVariationIds, model]);\r\n\r\n  return model ? <primitive object={model.scene} {...props} /> : null;\r\n}\r\n\r\nfunction Controls({ cameraPosition, onOrbitChange, ...props }) {\r\n  const controlsRef = useRef();\r\n  useEffect(() => {\r\n    const controls = controlsRef.current;\r\n\r\n    if (cameraPosition) {\r\n      const { position, focus } = cameraPosition;\r\n      controls.object.position.set(...position);\r\n      controls.target.set(...focus);\r\n    }\r\n\r\n    controls.addEventListener(\"change\", onOrbitChange);\r\n    controls.update();\r\n\r\n    return () => controls.removeEventListener(\"change\", onOrbitChange);\r\n  }, [cameraPosition, controlsRef, onOrbitChange]);\r\n\r\n  const {\r\n    camera,\r\n    gl: { domElement }\r\n  } = useThree();\r\n  return (\r\n    <orbitControls ref={controlsRef} args={[camera, domElement]} {...props} />\r\n  );\r\n}\r\n\r\nfunction ModelRenderer({\r\n  cameraPosition,\r\n  modelPath,\r\n  onOrbitChange,\r\n  activeVariationIds,\r\n  ...props\r\n}) {\r\n  return (\r\n    <Canvas\r\n      camera={{ fov: 60, near: 1, position: INITIAL_CAMERA_POSITION }}\r\n      onCreated={({ gl, scene }) => {\r\n        gl.outputEncoding = sRGBEncoding;\r\n        scene.background = new Color(0xfafafa);\r\n      }}\r\n      {...props}\r\n    >\r\n      <Controls\r\n        cameraPosition={cameraPosition}\r\n        minDistance={1}\r\n        maxDistance={50}\r\n        onOrbitChange={onOrbitChange}\r\n      />\r\n      <ambientLight />\r\n      {/* <mesh>\r\n        <sphereGeometry attach=\"geometry\" />\r\n        <meshBasicMaterial attach=\"material\" color=\"hotpink\" />\r\n      </mesh> */}\r\n      <Suspense fallback={null}>\r\n        <Model path={modelPath} activeVariationIds={activeVariationIds} />\r\n      </Suspense>\r\n    </Canvas>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  ({\r\n    cameraPosition,\r\n    comments,\r\n    selectedCommentId,\r\n    activeCameraPosition,\r\n    activeVariationIds\r\n  }) => ({\r\n    cameraPosition:\r\n      cameraPosition ||\r\n      comments.reduce(\r\n        (acc, comment) =>\r\n          comment.id === selectedCommentId ? comment.camera : acc,\r\n        activeCameraPosition\r\n      ),\r\n    activeVariationIds: activeVariationIds\r\n  }),\r\n  dispatch => ({\r\n    onOrbitChange: ({\r\n      target: {\r\n        object: { position },\r\n        target: focus\r\n      }\r\n    }) =>\r\n      dispatch(\r\n        changeCamera({ position: position.toArray(), focus: focus.toArray() })\r\n      )\r\n  })\r\n)(ModelRenderer);\r\n","import React, { useState } from \"react\";\r\nimport \"./Variation.css\";\r\nimport { connect } from \"react-redux\";\r\n\r\nfunction Variation({ id, name, thumbnail, selected, ...props }) {\r\n  const [mouseHover, setMouseHover] = useState(false);\r\n\r\n  return (\r\n    <div\r\n      className=\"variation\"\r\n      onMouseEnter={() => setMouseHover(true)}\r\n      onMouseLeave={() => setMouseHover(false)}\r\n      {...props}\r\n    >\r\n      <span className=\"variation-name\">{name}</span>\r\n      <img\r\n        className=\"variation-thumbnail-image\"\r\n        src={thumbnail}\r\n        alt={`${name} thumbnail`}\r\n      />\r\n      {(selected || mouseHover) && (\r\n        <div\r\n          className={\"variation-checked-circle\" + (selected ? \" selected\" : \"\")}\r\n        >\r\n          {selected && (\r\n            <img\r\n              src=\"assets/variation-check.svg\"\r\n              alt=\"Variation checked icon\"\r\n            />\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  ({ activeVariationIds }, ownProps) => ({\r\n    selected: activeVariationIds[ownProps.id]\r\n  }),\r\n  () => ({})\r\n)(Variation);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport CommentsColumnHeader from \"../CommentsColumn/CommentsColumnHeader/CommentsColumnHeader\";\r\nimport \"./VariationsColumn.css\";\r\nimport Variation from \"./Variation/Variation\";\r\nimport { selectVariation, deselectVariation } from \"../redux/actions\";\r\n\r\nfunction VariationsColumn({ variations, onClickVariation, ...props }) {\r\n  return (\r\n    <div id=\"variations-column\" {...props}>\r\n      <CommentsColumnHeader\r\n        className=\"variations-header\"\r\n        headerText=\"Iterations\"\r\n      />\r\n      <div className=\"variations-scroll-column\">\r\n        {variations.map(variation => (\r\n          <Variation\r\n            key={variation.id}\r\n            onClick={() => onClickVariation(variation)}\r\n            {...variation}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(\r\n  ({ activeVariationIds, variations }) => ({ activeVariationIds, variations }),\r\n  dispatch => ({\r\n    selectVariation: variation => dispatch(selectVariation(variation)),\r\n    deselectVariation: variation => dispatch(deselectVariation(variation))\r\n  }),\r\n  (\r\n    { activeVariationIds, ...stateProps },\r\n    { selectVariation, deselectVariation },\r\n    ownProps\r\n  ) => ({\r\n    ...ownProps,\r\n    ...stateProps,\r\n    onClickVariation: variation => {\r\n      if (activeVariationIds[variation.id]) {\r\n        deselectVariation(variation);\r\n      } else {\r\n        selectVariation(variation);\r\n      }\r\n    }\r\n  })\r\n)(VariationsColumn);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { connect, Provider } from \"react-redux\";\r\nimport CommentsColumn from \"./CommentsColumn/CommentsColumn\";\r\nimport DrawOver from \"./DrawOver/DrawOver\";\r\nimport Header from \"./Header/Header\";\r\nimport \"./index.css\";\r\nimport ModelRenderer from \"./ModelRenderer\";\r\nimport store from \"./redux/store\";\r\nimport { deselectComment, moveCamera } from \"./redux/actions\";\r\nimport VariationsColumn from \"./VariationsColumn/VariationsColumn\";\r\n\r\nfunction MainPage({\r\n  cursor,\r\n  activeVariations,\r\n  onClickTopCamera,\r\n  onClickFrontCamera,\r\n  onClickSideCamera\r\n}) {\r\n  return (\r\n    <div id=\"app-container\" className={cursor}>\r\n      <Header />\r\n      <div id=\"main-area\">\r\n        <VariationsColumn />\r\n        <DrawOver className=\"draw-over\">\r\n          <div className=\"renderer-row\">\r\n            {activeVariations.map(variation => (\r\n              <div\r\n                key={variation.id}\r\n                className=\"renderer\"\r\n                style={{\r\n                  width: `calc(100%/${activeVariations.length})`\r\n                }}\r\n              >\r\n                <ModelRenderer modelPath={variation.model} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"camera-button-row\">\r\n            <button\r\n              className=\"camera-button top-camera-button\"\r\n              onClick={onClickTopCamera}\r\n            >\r\n              <div className=\"camera-button-icon-container\">\r\n                <img src=\"assets/top-icon.svg\" alt=\"Top camera view icon\" />\r\n              </div>\r\n              Top\r\n            </button>\r\n            <button\r\n              className=\"camera-button front-camera-button\"\r\n              onClick={onClickFrontCamera}\r\n            >\r\n              <div className=\"camera-button-icon-container\">\r\n                <img src=\"assets/front-icon.svg\" alt=\"Top camera view icon\" />\r\n              </div>\r\n              Front\r\n            </button>\r\n            <button\r\n              className=\"camera-button side-camera-button\"\r\n              onClick={onClickSideCamera}\r\n            >\r\n              <div className=\"camera-button-icon-container\">\r\n                <img src=\"assets/side-icon.svg\" alt=\"Top camera view icon\" />\r\n              </div>\r\n              Side\r\n            </button>\r\n          </div>\r\n        </DrawOver>\r\n        <CommentsColumn />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst WrappedMainPage = connect(\r\n  ({ cursor, activeVariationIds, variations }) => ({\r\n    cursor,\r\n    activeVariations: Object.keys(activeVariationIds)\r\n      .filter(id => activeVariationIds[id])\r\n      .map(variationId => variations.find(({ id }) => id == variationId))\r\n  }),\r\n  dispatch => ({\r\n    onClickTopCamera: () => {\r\n      dispatch(deselectComment());\r\n      dispatch(moveCamera({ position: [0, 4, 0], focus: [0, 0, 0] }));\r\n    },\r\n    onClickFrontCamera: () => {\r\n      dispatch(deselectComment());\r\n      dispatch(moveCamera({ position: [0, 0, 4], focus: [0, 0, 0] }));\r\n    },\r\n    onClickSideCamera: () => {\r\n      dispatch(deselectComment());\r\n      dispatch(moveCamera({ position: [-4, 0, 0], focus: [0, 0, 0] }));\r\n    }\r\n  })\r\n)(MainPage);\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <WrappedMainPage />\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}